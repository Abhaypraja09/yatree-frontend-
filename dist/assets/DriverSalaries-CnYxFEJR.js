import{b as i,j as e,I as F,O as ne,Q as se,s as D,m as S,Y as oe,X as I,C as le,ag as de,y as ce,ah as xe}from"./vendor-CCQY6jT8.js";import{b as pe,i as l}from"./index-aG9LDhtf.js";import{S as ge}from"./SEO-DDwZsfBo.js";const me=()=>{const{selectedCompany:o}=pe(),[M,Y]=i.useState([]),[G,T]=i.useState(!0),[d,J]=i.useState(new Date().getMonth()+1),[c,V]=i.useState(new Date().getFullYear()),[g,X]=i.useState(""),[q,w]=i.useState(!1),[H,C]=i.useState(null),[K,N]=i.useState(!1),[U,Q]=i.useState([]),[Z,ee]=i.useState([]),[te,m]=i.useState(!1),[s,x]=i.useState({driverId:"",amount:"",date:new Date().toISOString().split("T")[0],remark:""}),[R,B]=i.useState(!1),[h,f]=i.useState({type:"",text:""}),[u,k]=i.useState(null);i.useEffect(()=>{o&&(A(),z())},[o,d,c]);const A=async()=>{if(o?._id){T(!0);try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:r}=await l.get(`/api/admin/salary-summary/${o._id}?month=${d}&year=${c}`,{headers:{Authorization:`Bearer ${t.token}`}});Y(r||[])}catch(t){console.error(t)}finally{T(!1)}}},z=async()=>{if(o?._id)try{const t=JSON.parse(localStorage.getItem("userInfo")),[r,n]=await Promise.all([l.get(`/api/admin/advances/${o._id}?month=${d}&year=${c}&isFreelancer=false`,{headers:{Authorization:`Bearer ${t.token}`}}),l.get(`/api/admin/drivers/${o._id}?usePagination=false&isFreelancer=false`,{headers:{Authorization:`Bearer ${t.token}`}})]);Q(r.data||[]),ee(n.data.drivers||[])}catch(t){console.error("Error fetching advance data:",t)}},re=async t=>{t.preventDefault(),B(!0),f({type:"",text:""});try{const r=JSON.parse(localStorage.getItem("userInfo"));u?(await l.put(`/api/admin/advances/${u}`,{...s,companyId:o._id},{headers:{Authorization:`Bearer ${r.token}`}}),f({type:"success",text:"Advance updated successfully!"})):(await l.post("/api/admin/advances",{...s,companyId:o._id},{headers:{Authorization:`Bearer ${r.token}`}}),f({type:"success",text:"Advance recorded successfully!"})),setTimeout(()=>{m(!1),k(null),x({driverId:"",amount:"",date:new Date().toISOString().split("T")[0],remark:""}),f({type:"",text:""}),A(),z()},1500)}catch(r){f({type:"error",text:r.response?.data?.message||"Operation failed"})}finally{B(!1)}},L=t=>{k(t._id),x({driverId:t.driver?._id||"",amount:t.amount||"",date:t.date?new Date(t.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],remark:t.remark||""}),m(!0)},E=async t=>{if(window.confirm("Are you sure you want to delete this advance record?"))try{const r=JSON.parse(localStorage.getItem("userInfo"));await l.delete(`/api/admin/advances/${t}`,{headers:{Authorization:`Bearer ${r.token}`}}),A(),z()}catch(r){console.error("Failed to delete advance:",r),alert("Failed to delete advance record")}},P=async t=>{N(!0),w(!0),C(null);try{const r=JSON.parse(localStorage.getItem("userInfo")),{data:n}=await l.get(`/api/admin/salary-details/${t}?month=${d}&year=${c}`,{headers:{Authorization:`Bearer ${r.token}`}});C(n)}catch(r){console.error(r),alert("Error: "+(r.response?.data?.message||r.message)),w(!1)}finally{N(!1)}},b=M.filter(t=>t.name?.toLowerCase().includes(g.toLowerCase())||t.mobile?.includes(g)),j=U.filter(t=>t.driver?.name?.toLowerCase().includes(g.toLowerCase())||t.remark?.toLowerCase().includes(g.toLowerCase())),ie=b.reduce((t,r)=>t+(r.netPayable||0),0),a=H,$=a?.driver?.name||a?.driver?.[0]?.name||"",p=a?.summary||{},O=p.totalWages||0,_=p.parkingTotal||a?.parkingEntries?.reduce((t,r)=>t+(Number(r.amount)||0),0)||0,W=p.totalAdvances||a?.advances?.reduce((t,r)=>t+(Number(r.amount)||0),0)||0,v=p.grandTotal||O+_,y=p.netPayable||v-W;return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(ge,{title:"Driver Payroll",description:"View driver salary reports, duty days, and advances."}),e.jsxs("header",{className:"flex-resp",style:{justifyContent:"space-between",flexWrap:"wrap",gap:"20px",padding:"30px 0",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"clamp(40px,10vw,50px)",height:"clamp(40px,10vw,50px)",background:"linear-gradient(135deg, white, #f8fafc)",borderRadius:"16px",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:e.jsx(F,{size:28,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 8px #fbbf24"}}),e.jsx("span",{style:{fontSize:"clamp(9px,2.5vw,10px)",fontWeight:"800",color:"rgba(255,255,255,0.5)",letterSpacing:"1px",textTransform:"uppercase"},children:"Payroll System"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"900",margin:0,letterSpacing:"-1px",cursor:"pointer"},children:["Driver ",e.jsx("span",{className:"text-gradient-yellow",children:"Salaries"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("select",{value:d,onChange:t=>J(Number(t.target.value)),className:"glass-card",style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",color:"white",background:"#0f172a",borderRadius:"10px"},children:Array.from({length:12},(t,r)=>r+1).map(t=>e.jsx("option",{value:t,children:new Date(0,t-1).toLocaleString("default",{month:"long"})},t))}),e.jsx("select",{value:c,onChange:t=>V(Number(t.target.value)),className:"glass-card",style:{padding:"10px",border:"1px solid rgba(255,255,255,0.1)",color:"white",background:"#0f172a",borderRadius:"10px"},children:[2024,2025,2026,2027].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsxs("div",{className:"glass-card",style:{padding:"0",display:"flex",alignItems:"center",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx(ne,{size:18,style:{margin:"0 15px",color:"rgba(255,255,255,0.4)"}}),e.jsx("input",{type:"text",placeholder:"Search...",value:g,onChange:t=>X(t.target.value),style:{background:"transparent",border:"none",color:"white",height:"45px",outline:"none"}})]}),e.jsxs("button",{onClick:()=>m(!0),className:"btn-primary",style:{height:"45px",padding:"0 20px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",whiteSpace:"nowrap"},children:[e.jsx(se,{size:18})," RECORD ADVANCE"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap"},children:[e.jsxs("div",{className:"glass-card",style:{flex:"1",minWidth:"200px",padding:"20px",background:"linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(16,185,129,0.05) 100%)",border:"1px solid rgba(16,185,129,0.2)"},children:[e.jsxs("p",{style:{fontSize:"11px",fontWeight:"800",color:"#10b981",marginBottom:"4px",textTransform:"uppercase"},children:["Total Net Payable (",new Date(0,d-1).toLocaleString("default",{month:"short"})," ",c,")"]}),e.jsxs("h3",{style:{fontSize:"28px",fontWeight:"900",color:"white"},children:["₹ ",ie.toLocaleString()]})]}),e.jsxs("div",{className:"glass-card",style:{flex:"1",minWidth:"200px",padding:"20px",background:"linear-gradient(135deg, rgba(244,63,94,0.1) 0%, rgba(244,63,94,0.05) 100%)",border:"1px solid rgba(244,63,94,0.2)"},children:[e.jsx("p",{style:{fontSize:"11px",fontWeight:"800",color:"#f43f5e",marginBottom:"4px",textTransform:"uppercase"},children:"Total Advances Issued"}),e.jsxs("h3",{style:{fontSize:"28px",fontWeight:"900",color:"white"},children:["₹ ",j.reduce((t,r)=>t+(r.amount||0),0).toLocaleString()]})]})]}),e.jsx("div",{className:"glass-card hide-mobile",style:{padding:"0",overflowX:"auto",border:"1px solid rgba(255,255,255,0.05)",background:"transparent"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 8px",padding:"0 10px",minWidth:"800px"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{textAlign:"left"},children:["Driver","Daily Wage","Duty Days","Total Earnings","Advances (This Month)","Pending Balance","Net Payable"].map(t=>e.jsx("th",{style:{padding:"15px 25px",color:t==="Net Payable"?"#10b981":"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:t},t))})}),e.jsx("tbody",{children:e.jsx(D,{children:G?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{textAlign:"center",padding:"40px",color:"white"},children:"Loading report..."})}):b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"No records found for this period."})}):b.map((t,r)=>e.jsxs(S.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.05},onClick:()=>P(t.driverId),className:"glass-card-hover-effect",style:{background:"rgba(30,41,59,0.4)",borderRadius:"12px",cursor:"pointer"},children:[e.jsxs("td",{style:{padding:"20px 25px",borderTopLeftRadius:"12px",borderBottomLeftRadius:"12px"},children:[e.jsx("div",{style:{fontWeight:"700",color:"white"},children:t.name}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:t.mobile})]}),e.jsxs("td",{style:{padding:"20px 25px",color:"rgba(255,255,255,0.7)",fontWeight:"600",fontFamily:"monospace"},children:["₹ ",t.dailyWage]}),e.jsx("td",{style:{padding:"20px 25px",color:"white",fontWeight:"800"},children:t.workingDays||0}),e.jsxs("td",{style:{padding:"20px 25px",color:"#38bdf8",fontWeight:"700"},children:["₹ ",t.totalEarned]}),e.jsxs("td",{style:{padding:"20px 25px",color:"#f43f5e",fontWeight:"700"},children:["₹ ",t.totalAdvances]}),e.jsxs("td",{style:{padding:"20px 25px",color:"#f59e0b",fontWeight:"700"},children:["₹ ",t.pendingAdvance]}),e.jsxs("td",{style:{padding:"20px 25px",borderTopRightRadius:"12px",borderBottomRightRadius:"12px",color:"#10b981",fontWeight:"900",fontSize:"15px"},children:["₹ ",t.netPayable]})]},t.driverId))})})]})}),e.jsx("div",{className:"show-mobile",style:{display:"flex",flexDirection:"column",gap:"15px"},children:b.map(t=>e.jsxs("div",{className:"glass-card",style:{padding:"20px",cursor:"pointer"},onClick:()=>P(t.driverId),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"15px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"white",fontSize:"16px"},children:t.name}),e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"12px"},children:t.mobile})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{margin:0,fontSize:"10px",fontWeight:"800",color:"#10b981"},children:"NET PAYABLE"}),e.jsxs("h3",{style:{margin:0,color:"#10b981",fontSize:"18px"},children:["₹ ",t.netPayable]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"13px"},children:[["DAILY WAGE",`₹ ${t.dailyWage}`,"rgba(255,255,255,0.7)"],["DUTY DAYS",t.workingDays,"white"],["TOTAL EARNINGS",`₹ ${t.totalEarned}`,"white"],["ADVANCES",`₹ ${t.totalAdvances}`,"#f43f5e"]].map(([r,n,ae])=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"10px",borderRadius:"8px"},children:[e.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"10px"},children:r}),e.jsx("p",{style:{margin:"4px 0 0",color:ae,fontWeight:"700"},children:n})]},r))})]},t.driverId))}),e.jsxs("div",{style:{marginTop:"60px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"25px"},children:[e.jsx("div",{style:{width:"4px",height:"24px",background:"#fbbf24",borderRadius:"2px"}}),e.jsxs("h2",{style:{color:"white",fontSize:"22px",fontWeight:"900",margin:0,letterSpacing:"-0.5px"},children:["Advance ",e.jsx("span",{style:{color:"#fbbf24"},children:"Payment History"})]})]}),e.jsx("div",{className:"glass-card hide-mobile",style:{padding:"0",overflowX:"auto",border:"1px solid rgba(255,255,255,0.05)",background:"transparent"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 8px",padding:"0 10px",minWidth:"800px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"left"},children:[e.jsx("th",{style:{padding:"15px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Driver"}),e.jsx("th",{style:{padding:"15px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Date"}),e.jsx("th",{style:{padding:"15px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Amount"}),e.jsx("th",{style:{padding:"15px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Remarks"}),e.jsx("th",{style:{padding:"15px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Actions"})]})}),e.jsx("tbody",{children:j.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",style:{textAlign:"center",padding:"120px 0",background:"rgba(30, 41, 59, 0.2)",borderRadius:"30px",border:"2px dashed rgba(255,255,255,0.05)"},children:[e.jsx(F,{size:60,style:{margin:"0 auto 20px",opacity:.1,color:"#fbbf24"}}),e.jsx("h3",{style:{color:"white",fontSize:"20px",fontWeight:"700",margin:0},children:"No Advance Records"}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"8px"},children:"Record a new advance to start tracking."})]})}):j.map((t,r)=>e.jsxs(S.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.03},className:"glass-card-hover-effect",style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"12px"},children:[e.jsx("td",{style:{padding:"20px 25px",borderTopLeftRadius:"12px",borderBottomLeftRadius:"12px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(251, 191, 36, 0.1)",color:"#fbbf24",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"800"},children:t.driver?.name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"700"},children:t.driver?.name}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:t.driver?.mobile})]})]})}),e.jsx("td",{style:{padding:"20px 25px"},children:e.jsx("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:"14px"},children:new Date(t.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),e.jsx("td",{style:{padding:"20px 25px"},children:e.jsxs("div",{style:{color:"white",fontWeight:"800"},children:["₹ ",t.amount?.toLocaleString()]})}),e.jsx("td",{style:{padding:"20px 25px"},children:e.jsx("div",{style:{color:"var(--text-muted)",fontSize:"13px",fontStyle:"italic",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.remark||"-"})}),e.jsx("td",{style:{padding:"20px 25px",borderTopRightRadius:"12px",borderBottomRightRadius:"12px"},children:e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),L(t)},style:{background:"rgba(56, 189, 248, 0.1)",color:"#38bdf8",border:"none",padding:"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:e.jsx(oe,{size:16})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),E(t._id)},style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",border:"none",padding:"8px",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:e.jsx(I,{size:16})})]})})]},t._id))})]})}),e.jsx("div",{className:"show-mobile",style:{display:"flex",flexDirection:"column",gap:"15px"},children:j.map(t=>e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"rgba(30, 41, 59, 0.4)",borderRadius:"14px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(251, 191, 36, 0.1)",color:"#fbbf24",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"800"},children:t.driver?.name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"800",color:"white"},children:t.driver?.name}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:new Date(t.date).toLocaleDateString()})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#fbbf24",fontWeight:"800"},children:["₹",t.amount]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"4px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>L(t),style:{background:"transparent",border:"none",color:"#38bdf8",fontSize:"10px"},children:"Edit"}),e.jsx("button",{onClick:()=>E(t._id),style:{background:"transparent",border:"none",color:"#f43f5e",fontSize:"10px"},children:"Delete"})]})]})]}),t.remark&&e.jsxs("p",{style:{margin:"8px 0 0",fontSize:"12px",color:"var(--text-muted)",fontStyle:"italic"},children:['"',t.remark,'"']})]},t._id))})]}),e.jsx(D,{children:te&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(16px)",zIndex:1100,display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},children:e.jsxs(S.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"glass-card",style:{width:"100%",maxWidth:"480px",padding:"40px",border:"1px solid rgba(255,255,255,0.1)",background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"30px"},children:[e.jsx("h2",{style:{color:"white",fontSize:"22px",fontWeight:"900",margin:0},children:u?"Edit Advance":"Record Advance"}),e.jsx("button",{onClick:()=>{m(!1),k(null)},style:{background:"transparent",border:"none",color:"white",cursor:"pointer"},children:e.jsx(I,{size:24})})]}),e.jsxs("form",{onSubmit:re,style:{display:"grid",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.6)",fontSize:"11px",fontWeight:"800",marginBottom:"8px",textTransform:"uppercase"},children:"Select Driver"}),e.jsxs("select",{className:"input-field",required:!0,value:s.driverId,onChange:t=>x({...s,driverId:t.target.value}),style:{width:"100%",height:"50px",background:"#1e293b",color:"white"},children:[e.jsx("option",{value:"",style:{background:"#1e293b",color:"white"},children:"Choose a driver..."}),Z.map(t=>e.jsxs("option",{value:t._id,style:{background:"#1e293b",color:"white"},children:[t.name," (",t.mobile,")"]},t._id))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.6)",fontSize:"11px",fontWeight:"800",marginBottom:"8px",textTransform:"uppercase"},children:"Amount"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.amount,onChange:t=>x({...s,amount:t.target.value}),style:{width:"100%",height:"50px"},placeholder:"₹ 0"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.6)",fontSize:"11px",fontWeight:"800",marginBottom:"8px",textTransform:"uppercase"},children:"Date"}),e.jsx("input",{type:"date",className:"input-field",required:!0,value:s.date,onChange:t=>x({...s,date:t.target.value}),style:{width:"100%",height:"50px"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.6)",fontSize:"11px",fontWeight:"800",marginBottom:"8px",textTransform:"uppercase"},children:"Remark"}),e.jsx("textarea",{className:"input-field",value:s.remark,onChange:t=>x({...s,remark:t.target.value}),style:{width:"100%",padding:"15px"},rows:"2",placeholder:"Ex: Fuel advance, Family need..."})]}),h.text&&e.jsx("div",{style:{padding:"12px",borderRadius:"10px",background:h.type==="success"?"rgba(16,185,129,0.1)":"rgba(244,63,94,0.1)",color:h.type==="success"?"#10b981":"#f43f5e",border:`1px solid ${h.type==="success"?"rgba(16,185,129,0.2)":"rgba(244,63,94,0.2)"}`,fontSize:"13px",fontWeight:"700"},children:h.text}),e.jsx("button",{type:"submit",disabled:R,className:"btn-primary",style:{height:"50px",fontWeight:"900",fontSize:"15px"},children:R?"PROCESSING...":u?"UPDATE ADVANCE":"CONFIRM ADVANCE"})]})]})})}),e.jsx(D,{children:q&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(8px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"15px"},children:e.jsxs(S.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"glass-card",style:{padding:"0",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",border:"1px solid rgba(255,255,255,0.1)",background:"#0f172a"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",background:"linear-gradient(to right, rgba(255,255,255,0.02), transparent)",position:"sticky",top:0,backdropFilter:"blur(10px)",zIndex:5},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"18px",fontWeight:"800",margin:0},children:"Salary Breakdown"}),$&&e.jsx("p",{style:{color:"var(--primary)",fontSize:"13px",margin:"4px 0 0",fontWeight:"600"},children:$})]}),e.jsx("button",{onClick:()=>w(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%",cursor:"pointer",border:"none"},children:e.jsx(I,{size:20})})]}),e.jsx("div",{style:{padding:"20px"},children:K?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"white"},children:"Loading details..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"12px",marginBottom:"28px"},children:[e.jsxs("div",{style:{background:"rgba(14,165,233,0.08)",border:"1px solid rgba(14,165,233,0.2)",borderRadius:"12px",padding:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsx(le,{size:14,color:"#38bdf8"}),e.jsx("span",{style:{fontSize:"10px",color:"#38bdf8",fontWeight:"800",textTransform:"uppercase"},children:"Wages & Bonus"})]}),e.jsxs("div",{style:{color:"white",fontWeight:"900",fontSize:"20px"},children:["₹",O.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:[p.workingDays||a?.breakdown?.length||0," duty days"]})]}),e.jsxs("div",{style:{background:"rgba(245,158,11,0.08)",border:"1px solid rgba(245,158,11,0.2)",borderRadius:"12px",padding:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsx(de,{size:14,color:"#f59e0b"}),e.jsx("span",{style:{fontSize:"10px",color:"#f59e0b",fontWeight:"800",textTransform:"uppercase"},children:"Parking"})]}),e.jsxs("div",{style:{color:"white",fontWeight:"900",fontSize:"20px"},children:["₹",_.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:[a?.parkingEntries?.length||0," entries"]})]}),e.jsxs("div",{style:{background:"rgba(16,185,129,0.08)",border:"1px solid rgba(16,185,129,0.2)",borderRadius:"12px",padding:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsx(ce,{size:14,color:"#10b981"}),e.jsx("span",{style:{fontSize:"10px",color:"#10b981",fontWeight:"800",textTransform:"uppercase"},children:"Total Earned"})]}),e.jsxs("div",{style:{color:"white",fontWeight:"900",fontSize:"20px"},children:["₹",v.toLocaleString()]}),e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:"Wages + Parking"})]}),e.jsxs("div",{style:{background:"rgba(244,63,94,0.08)",border:"1px solid rgba(244,63,94,0.2)",borderRadius:"12px",padding:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[e.jsx(xe,{size:14,color:"#f43f5e"}),e.jsx("span",{style:{fontSize:"10px",color:"#f43f5e",fontWeight:"800",textTransform:"uppercase"},children:"Advances"})]}),e.jsxs("div",{style:{color:"white",fontWeight:"900",fontSize:"20px"},children:["₹",W.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:[a?.advances?.length||0," taken"]})]})]}),e.jsxs("div",{style:{background:y>=0?"linear-gradient(135deg, rgba(16,185,129,0.15), rgba(16,185,129,0.05))":"linear-gradient(135deg, rgba(244,63,94,0.15), rgba(244,63,94,0.05))",border:`1px solid ${y>=0?"rgba(16,185,129,0.3)":"rgba(244,63,94,0.3)"}`,borderRadius:"12px",padding:"16px 20px",marginBottom:"28px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"800",color:y>=0?"#10b981":"#f43f5e",textTransform:"uppercase",marginBottom:"4px"},children:"Net Payable This Month"}),e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:["₹",v.toLocaleString()," earned − ₹",W.toLocaleString()," advances"]})]}),e.jsxs("div",{style:{color:y>=0?"#10b981":"#f43f5e",fontWeight:"900",fontSize:"26px"},children:["₹",Math.abs(y).toLocaleString()]})]}),e.jsx("h3",{style:{fontSize:"14px",color:"white",marginBottom:"15px",borderLeft:"3px solid #3b82f6",paddingLeft:"10px"},children:"Duty Calendar (Earnings)"}),e.jsx("div",{style:{overflowX:"auto",marginBottom:"30px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(255,255,255,0.02)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",color:"var(--text-muted)"},children:"Date"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"WAGES"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"Same Day Return"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"Parking"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"Night"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"Bonus"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",color:"white"},children:"Total"})]})}),e.jsxs("tbody",{children:[a?.breakdown?.map((t,r)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsxs("td",{style:{padding:"12px",color:"white"},children:[new Date(t.date).toLocaleDateString(),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:t.type||"Duty"}),t.remarks&&e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.35)"},children:t.remarks})]}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"rgba(255,255,255,0.7)"},children:["₹",t.wage||0]}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"#38bdf8",fontWeight:"600"},children:["₹",t.sameDayReturn||0]}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"#f59e0b",fontWeight:"800"},children:["₹",t.parking||0]}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"#10b981",fontWeight:"600"},children:["₹",t.nightStay||0]}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"rgba(255,255,255,0.7)"},children:["₹",t.otherBonuses||0]}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"#10b981",fontWeight:"700"},children:["₹",(t.total||0).toLocaleString()]})]},r)),a?.parkingEntries?.filter(t=>{const r=new Date(t.date).toLocaleString("en-CA",{timeZone:"Asia/Kolkata"}).split(",")[0];return!a?.breakdown?.some(n=>n.date===r)}).map((t,r)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)",background:"rgba(245,158,11,0.02)"},children:[e.jsxs("td",{style:{padding:"12px",color:"white"},children:[new Date(t.date).toLocaleDateString(),e.jsx("div",{style:{fontSize:"10px",color:"#f59e0b",fontWeight:"800"},children:"STANDALONE PARKING"}),t.remark&&e.jsx("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.35)"},children:t.remark})]}),e.jsx("td",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"-"}),e.jsx("td",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"-"}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"#f59e0b",fontWeight:"800"},children:["₹",t.amount||0]}),e.jsx("td",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"-"}),e.jsx("td",{style:{padding:"12px",textAlign:"right",color:"var(--text-muted)"},children:"-"}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"#10b981",fontWeight:"700"},children:["₹",(t.amount||0).toLocaleString()]})]},`p-${r}`)),a?.breakdown?.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:"20px",textAlign:"center",color:"var(--text-muted)"},children:"No completed duties found this month."})}),a?.breakdown?.length>0&&e.jsxs("tr",{style:{background:"rgba(16,185,129,0.05)",borderTop:"2px solid rgba(16,185,129,0.15)"},children:[e.jsx("td",{colSpan:"6",style:{padding:"15px 12px",color:"#10b981",fontWeight:"800",fontSize:"13px",textTransform:"uppercase"},children:"Grand Total (Wages + Parking + Bonuses)"}),e.jsxs("td",{style:{padding:"15px 12px",textAlign:"right",color:"#10b981",fontWeight:"900",fontSize:"15px"},children:["₹",v.toLocaleString()]})]})]})]})}),e.jsx("h3",{style:{fontSize:"14px",color:"white",marginBottom:"15px",borderLeft:"3px solid #f43f5e",paddingLeft:"10px"},children:"Advances Taken (This Month)"}),e.jsx("div",{style:{overflowX:"auto",marginBottom:"20px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(255,255,255,0.02)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",color:"var(--text-muted)"},children:"Date"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",color:"var(--text-muted)"},children:"Reason"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",color:"white"},children:"Amount"})]})}),e.jsxs("tbody",{children:[a?.advances?.map((t,r)=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsx("td",{style:{padding:"12px",color:"white"},children:new Date(t.date).toLocaleDateString()}),e.jsx("td",{style:{padding:"12px",color:"var(--text-muted)"},children:t.remark}),e.jsxs("td",{style:{padding:"12px",textAlign:"right",color:"#f43f5e",fontWeight:"700"},children:["₹",t.amount]})]},r)),a?.advances?.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:{padding:"20px",textAlign:"center",color:"var(--text-muted)"},children:"No advances taken this month."})})]})]})})]})})]})})})]})};export{me as default};
