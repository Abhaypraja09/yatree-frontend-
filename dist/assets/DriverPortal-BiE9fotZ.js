import{b as n,j as e,t as Fe,D as J,c as q,W as Z,f as Le,L as qe,q as Me,T as Ke,v as Ve,w as Ye,o as $e,x as K,X as D,y as Ue,z as He}from"./vendor-CERFoa1q.js";import{u as Ge,a as Ne,i as M}from"./index-kmtjtap3.js";import{u as S,w as Qe}from"./excel-C9b669kG.js";import{S as Xe}from"./SEO-Cg6SSuFB.js";const Je=({side:p,onCapture:ee,onClose:j})=>{const{t:u}=Ne(),t=n.useRef(null),m=n.useRef(null),k=n.useRef(null),[E,te]=n.useState(null);n.useEffect(()=>(P(),()=>N()),[]);const P=async()=>{try{const c={video:{facingMode:p==="selfie"?"user":"environment",width:{ideal:1280},height:{ideal:720}}},x=await navigator.mediaDevices.getUserMedia(c);k.current=x,t.current&&(t.current.srcObject=x)}catch(c){console.error("Camera error:",c),te(u("cameraError"))}},N=()=>{k.current&&(k.current.getTracks().forEach(c=>{c.stop(),console.log("Track stopped:",c.label)}),k.current=null)},V=()=>{const c=t.current,x=m.current;c&&x&&(x.width=c.videoWidth,x.height=c.videoHeight,x.getContext("2d").drawImage(c,0,0,x.width,x.height),x.toBlob($=>{const I=new File([$],`${p}.jpg`,{type:"image/jpeg"});ee(I,x.toDataURL("image/jpeg")),N(),j()},"image/jpeg",.8))};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content glass-card",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:u(p==="selfie"?"modalTakeSelfie":p==="km"?"modalCaptureKm":p==="car"?"modalTakeCarSelfie":p==="fuel"?"modalFuelSlip":p==="parking"?"modalParkingSlip":p==="other"?"modalOtherSlip":"modalCapturePhoto")}),e.jsx("button",{onClick:()=>{N(),j()},className:"modal-close-btn",children:e.jsx(D,{size:20})})]}),E?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#f43f5e"},children:E}):e.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,style:{width:"100%",borderRadius:"12px",background:"#000"}}),e.jsx("canvas",{ref:m,style:{display:"none"}}),!E&&e.jsxs("button",{onClick:V,className:"btn-primary",style:{width:"100%",marginTop:"20px",padding:"16px"},children:[e.jsx(K,{size:20,style:{display:"inline",marginRight:"8px"}}),u("capture")]})]})})},pt=()=>{const{user:p,logout:ee}=Ge(),{language:j,setLanguage:u,t}=Ne(),[m,k]=n.useState(null),[E,te]=n.useState(!0),[P,N]=n.useState(""),[V,c]=n.useState(null),[x,Y]=n.useState(null),[$,I]=n.useState(null),[xe,ae]=n.useState(null),[ge,se]=n.useState(null),[ue,ie]=n.useState(null),[re,ze]=n.useState(!1),[ne,he]=n.useState([{amount:"",km:"",fuelType:"Diesel",slip:null,preview:null}]),[o,l]=n.useState([{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),[le,Ce]=n.useState(!1),[oe,me]=n.useState([{amount:"",slip:null,preview:null}]),[f,U]=n.useState(0),[O,pe]=n.useState(!1),[w,H]=n.useState([]),[Ze,et]=n.useState(""),[tt,at]=n.useState(!1),[st,it]=n.useState(!1),[be,fe]=n.useState(""),[ye,ve]=n.useState(""),[b,A]=n.useState(null),[z,C]=n.useState(!1),[je,de]=n.useState(!1),[G,h]=n.useState({type:"",text:""}),[ce,we]=n.useState(""),[Te,_]=n.useState(!1),[y,Q]=n.useState(null),[T,Se]=n.useState("home"),[g,We]=n.useState(null),[Re,ke]=n.useState(!1);n.useEffect(()=>{X(),T==="ledger"&&Be()},[T]);const Be=async()=>{ke(!0);try{const{data:a}=await M.get("/api/driver/ledger",{headers:{Authorization:`Bearer ${p.token}`}});We(a)}catch(a){console.error("Error fetching ledger",a)}finally{ke(!1)}},X=async()=>{try{const{data:a}=await M.get("/api/driver/dashboard",{headers:{Authorization:`Bearer ${p.token}`}});k(a),a.vehicle?._id&&we(a.vehicle._id)}catch(a){console.error("Error fetching dashboard",a)}finally{te(!1)}},De=async a=>{if(!P||!V||!$||!ge){h({type:"error",text:t("mandatoryFields")});return}if(a==="punch-out"){if(re&&ne.some(r=>!r.amount||!r.slip||!r.km)){h({type:"error",text:t("fuelValidation")});return}if(le&&oe.some(r=>!r.amount||!r.slip)){h({type:"error",text:t("parkingValidation")});return}}C(!0),h({type:"",text:""});const i=new FormData;i.append("km",P),i.append("selfie",V),i.append("kmPhoto",$),i.append("carSelfie",ge),i.append("latitude",0),i.append("longitude",0),i.append("address","Location Disabled"),a==="punch-in"&&i.append("vehicleId",ce),a==="punch-out"&&(i.append("remarks",ye),i.append("otherRemarks",be),i.append("fuelFilled",re),re&&ne.forEach(s=>{i.append("fuelAmounts",s.amount),i.append("fuelKMs",s.km),i.append("fuelTypes",s.fuelType),i.append("fuelSlips",s.slip)}),i.append("parkingPaid",le),le&&oe.forEach(s=>{i.append("parkingAmounts",s.amount),i.append("parkingSlips",s.slip)}),i.append("outsideTripOccurred",O),O&&i.append("outsideTripType",w.join(",")));try{await M.post(`/api/driver/${a}`,i,{headers:{Authorization:`Bearer ${p.token}`,"Content-Type":"multipart/form-data"}}),h({type:"success",text:t(a==="punch-in"?"punchInSuccess":"punchOutSuccess")}),N(""),c(null),Y(null),I(null),ae(null),se(null),ie(null),ze(!1),he([{amount:"",km:"",slip:null,preview:null}]),Ce(!1),me([{amount:"",slip:null,preview:null}]),U(0),pe(!1),ve(""),fe(""),de(!1),X()}catch(s){h({type:"error",text:s.response?.data?.message||"Submission failed"})}finally{C(!1)}},Ee=async()=>{C(!0);try{await M.post("/api/driver/request-trip",{},{headers:{Authorization:`Bearer ${p.token}`}}),h({type:"success",text:t("requestSent")}),X()}catch{h({type:"error",text:t("requestFailed")})}finally{C(!1)}},Pe=async()=>{const a=o.filter(s=>s.amount&&s.amount>0);if(a.length===0){h({type:"error",text:t("mandatoryFields")});return}C(!0);const i=new FormData;a.forEach((s,r)=>{i.append("types",s.type),i.append("amounts",s.amount),i.append("kms",s.km||0),i.append("fuelTypes",s.fuelType||""),i.append("fuelQuantities",s.quantity||0),i.append("fuelRates",s.rate||0),i.append("paymentSources",s.paymentSource||"Yatree Office"),s.slip&&i.append(`slip_${r}`,s.slip)});try{await M.post("/api/driver/add-expense",i,{headers:{Authorization:`Bearer ${p.token}`,"Content-Type":"multipart/form-data"}}),h({type:"success",text:t("expenseSubmitted")}),_(!1),l([]),U(0),X()}catch(s){h({type:"error",text:s.response?.data?.message||"Submission failed"})}finally{C(!1)}},Ie=()=>{if(!g)return;const a=g.history.map(d=>({Date:d.date,Vehicle:d.vehicle,"Daily Wage":d.dailyWage,Bonuses:d.bonuses,"Total KM":d.totalKM,Status:d.status,"Day Total":d.dailyWage+d.bonuses})),i=g.advances.map(d=>({Date:new Date(d.date).toLocaleDateString(),Remark:d.remark,"Amount Taken":d.amount,Recovered:d.recovered,Balance:d.amount-d.recovered,Status:d.status})),s=[{Item:"Total Duties",Value:g.summary.workingDays},{Item:"Total Earned",Value:g.summary.totalEarned},{Item:"Total Advances Taken",Value:g.summary.totalAdvances},{Item:"Remaining Balance",Value:g.summary.pendingAdvance},{Item:"Net Payable",Value:g.summary.netPayable}],r=S.book_new(),Oe=S.json_to_sheet(s);S.book_append_sheet(r,Oe,"Overview");const Ae=S.json_to_sheet(a);S.book_append_sheet(r,Ae,"Duties");const _e=S.json_to_sheet(i);S.book_append_sheet(r,_e,"Advances"),Qe(r,`Driver_Report_${p.name}_${new Date().toLocaleDateString().replace(/\//g,"-")}.xlsx`)};if(E)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsx("div",{className:"spinner"})});const W=m?.todayAttendance,F=!!W?.punchIn?.time,L=!!W?.punchOut?.time,R=m?.driver?.tripStatus,B=R==="approved",v=R==="active";return e.jsxs("div",{className:"admin-layout-wrapper",children:[e.jsx(Xe,{title:"Driver Portal"}),e.jsx("div",{className:"main-content",children:e.jsxs("div",{className:"container-fluid",children:[e.jsxs("header",{className:"dashboard-header",style:{marginBottom:"32px",paddingBottom:"24px",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{className:"header-logo-section",children:[e.jsx("img",{src:"/logos/logo.png",alt:"Yatree Destination",style:{width:"100px",height:"auto",marginRight:"15px"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"header-title",style:{fontSize:"clamp(20px, 5vw, 26px)",fontWeight:"900",letterSpacing:"-0.5px",background:"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"4px"},children:"Yatree Destination"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 8px #10b981"}}),e.jsx("p",{className:"header-subtitle",style:{fontSize:"clamp(13px, 3.2vw, 15px)",fontWeight:"700",color:"rgba(255,255,255,0.8)",margin:0},children:p.name})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[v&&e.jsxs(e.Fragment,{children:[W?.pendingExpenses?.length>0&&e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.15)",padding:"6px 10px",borderRadius:"10px",display:"flex",alignItems:"center",gap:"6px",color:"#f59e0b",fontSize:"12px",fontWeight:"800",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx(Fe,{size:14})," ",W.pendingExpenses.length]}),e.jsxs("button",{onClick:()=>{l([{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),Q("fuel"),_(!0)},style:{background:"linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)",color:"white",height:"42px",padding:"0 14px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",border:"none",boxShadow:"0 6px 16px rgba(14, 165, 233, 0.25)",cursor:"pointer",fontWeight:"700",fontSize:"13px"},children:[e.jsx(J,{size:18})," ",t("fuel")]}),e.jsxs("button",{onClick:()=>{l([{type:"parking",amount:"",quantity:"",km:"",fuelType:"",slip:null,preview:null}]),Q("parking"),_(!0)},style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",height:"42px",padding:"0 14px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",border:"none",boxShadow:"0 6px 16px rgba(245, 158, 11, 0.25)",cursor:"pointer",fontWeight:"700",fontSize:"13px"},children:[e.jsx(q,{size:18})," ",t("parking")]}),e.jsxs("button",{onClick:()=>{l([{type:"other",amount:"",quantity:"",km:"",fuelType:"Other",slip:null,preview:null}]),Q("other"),_(!0)},style:{background:"linear-gradient(135deg, #f43f5e 0%, #dc2626 100%)",color:"white",height:"42px",padding:"0 14px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",border:"none",boxShadow:"0 6px 16px rgba(244, 63, 94, 0.25)",cursor:"pointer",fontWeight:"700",fontSize:"13px"},children:[e.jsx(Z,{size:18})," ",t("driverSeva")]})]}),e.jsxs("div",{className:"language-switcher",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%)",borderRadius:"12px",padding:"5px",display:"flex",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("button",{onClick:()=>u("en"),style:{padding:"8px 14px",borderRadius:"9px",fontSize:"12px",fontWeight:"800",background:j==="en"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",transition:"all 0.3s ease",boxShadow:j==="en"?"0 4px 12px rgba(14, 165, 233, 0.3)":"none"},children:"EN"}),e.jsx("button",{onClick:()=>u("hi"),style:{padding:"8px 14px",borderRadius:"9px",fontSize:"12px",fontWeight:"800",background:j==="hi"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",transition:"all 0.3s ease",boxShadow:j==="hi"?"0 4px 12px rgba(14, 165, 233, 0.3)":"none"},children:"हिन्दी"})]}),e.jsxs("button",{onClick:ee,style:{background:"linear-gradient(135deg, rgba(244,63,94,0.15) 0%, rgba(244,63,94,0.08) 100%)",color:"#f43f5e",padding:"10px 18px",borderRadius:"12px",fontWeight:"800",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",border:"1px solid rgba(244,63,94,0.2)",boxShadow:"0 4px 12px rgba(244,63,94,0.15)",transition:"all 0.3s ease"},children:[e.jsx(Le,{size:16})," ",t("logout")]})]})]}),e.jsxs("div",{className:"tab-navigation",style:{display:"flex",gap:"8px",marginBottom:"24px",background:"rgba(255,255,255,0.03)",padding:"6px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("button",{onClick:()=>Se("home"),style:{flex:1,padding:"12px",borderRadius:"12px",background:T==="home"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",fontWeight:"800",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",border:"none",transition:"all 0.3s"},children:[e.jsx(qe,{size:18})," ",t("today")]}),e.jsxs("button",{onClick:()=>Se("ledger"),style:{flex:1,padding:"12px",borderRadius:"12px",background:T==="ledger"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",fontWeight:"800",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",border:"none",transition:"all 0.3s"},children:[e.jsx(Me,{size:18})," ",t("ledger")]})]}),T==="home"&&e.jsxs(e.Fragment,{children:[!m?.vehicle&&!B&&R!=="completed"&&R!=="pending_approval"?e.jsxs("div",{className:"glass-card",style:{padding:"40px",textAlign:"center"},children:[e.jsx(Ke,{size:48,color:"#f59e0b",style:{margin:"0 auto 16px"}}),e.jsx("h2",{style:{color:"white",marginBottom:"8px"},children:t("noVehicle")}),e.jsx("p",{style:{color:"var(--text-muted)"},children:t("startDutyMessage")})]}):e.jsxs("div",{className:"form-section-wrapper",children:[m?.vehicle&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(20px, 5vw, 28px)",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.08) 0%, rgba(99, 102, 241, 0.05) 100%)",border:"1px solid rgba(14, 165, 233, 0.15)",boxShadow:"0 8px 24px rgba(14, 165, 233, 0.1)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"100px",height:"100px",background:"radial-gradient(circle, rgba(14, 165, 233, 0.15) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{marginBottom:"12px",position:"relative"},children:[e.jsx("p",{className:"section-subtitle",style:{fontSize:"clamp(10px, 2.5vw, 11px)",fontWeight:"800",letterSpacing:"1px",color:"rgba(14, 165, 233, 0.8)",marginBottom:"8px"},children:t("assignedVehicle")}),e.jsx("h2",{style:{fontSize:"clamp(22px, 5.5vw, 28px)",color:"white",fontWeight:"900",marginBottom:"6px",letterSpacing:"-0.5px"},children:m.vehicle.carNumber}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"clamp(13px, 3.2vw, 15px)",fontWeight:"600"},children:m.vehicle.model})]})]}),e.jsx("div",{className:"glass-card",style:{padding:"clamp(20px, 5vw, 28px)",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 8px 24px rgba(0,0,0,0.15)"},children:e.jsxs("div",{className:"modal-grid-2",style:{gap:"clamp(16px, 4vw, 24px)"},children:[e.jsxs("div",{style:{background:F?"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)":"rgba(255,255,255,0.02)",padding:"clamp(16px, 4vw, 20px)",borderRadius:"16px",border:F?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(255,255,255,0.05)",position:"relative",overflow:"hidden"},children:[F&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 12px #10b981",animation:"pulse 2s infinite"}}),e.jsx("p",{className:"section-subtitle",style:{fontSize:"clamp(10px, 2.5vw, 11px)",fontWeight:"800",letterSpacing:"0.5px",marginBottom:"8px"},children:t("punchIn")}),e.jsx("p",{style:{fontSize:"clamp(24px, 6vw, 32px)",fontWeight:"900",color:F?"#10b981":"rgba(255,255,255,0.2)",letterSpacing:"-1px"},children:F?new Date(W.punchIn.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})]}),e.jsxs("div",{style:{background:L?"linear-gradient(135deg, rgba(244, 63, 94, 0.1) 0%, rgba(244, 63, 94, 0.05) 100%)":"rgba(255,255,255,0.02)",padding:"clamp(16px, 4vw, 20px)",borderRadius:"16px",border:L?"1px solid rgba(244, 63, 94, 0.2)":"1px solid rgba(255,255,255,0.05)",position:"relative",overflow:"hidden"},children:[L&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",borderRadius:"50%",background:"#f43f5e",boxShadow:"0 0 12px #f43f5e"}}),e.jsx("p",{className:"section-subtitle",style:{fontSize:"clamp(10px, 2.5vw, 11px)",fontWeight:"800",letterSpacing:"0.5px",marginBottom:"8px"},children:t("punchOut")}),e.jsx("p",{style:{fontSize:"clamp(24px, 6vw, 32px)",fontWeight:"900",color:L?"#f43f5e":"rgba(255,255,255,0.2)",letterSpacing:"-1px"},children:L?new Date(W.punchOut.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})]})]})}),R==="completed"&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(32px, 8vw, 48px)",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",boxShadow:"0 8px 32px rgba(16, 185, 129, 0.15)"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 8px 24px rgba(16, 185, 129, 0.2)"},children:e.jsx(Ve,{size:40,color:"#10b981"})}),e.jsx("h2",{style:{color:"white",fontSize:"clamp(20px, 5vw, 24px)",marginBottom:"12px",fontWeight:"900",letterSpacing:"-0.5px"},children:t("dutyCompleted")}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"28px",fontSize:"clamp(14px, 3.5vw, 15px)",fontWeight:"600"},children:t("offDutyMessage")}),e.jsx("button",{onClick:Ee,disabled:z,className:"btn-primary",style:{width:"100%",maxWidth:"320px",margin:"0 auto",display:"block",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",padding:"16px 24px",fontSize:"15px",fontWeight:"800",borderRadius:"14px",boxShadow:"0 8px 24px rgba(16, 185, 129, 0.3)",border:"none"},children:t(z?"processing":"startNewDuty")})]}),R==="pending_approval"&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(32px, 8vw, 48px)",textAlign:"center",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.08) 0%, rgba(14, 165, 233, 0.03) 100%)",border:"1px solid rgba(14, 165, 233, 0.15)",boxShadow:"0 8px 32px rgba(14, 165, 233, 0.15)"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.15) 0%, rgba(14, 165, 233, 0.05) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid rgba(14, 165, 233, 0.2)",boxShadow:"0 8px 24px rgba(14, 165, 233, 0.2)"},children:e.jsx(Ye,{size:40,color:"#0ea5e9",className:"spinner"})}),e.jsx("h2",{style:{color:"white",fontSize:"clamp(20px, 5vw, 24px)",marginBottom:"12px",fontWeight:"900",letterSpacing:"-0.5px"},children:t("waitingAdmin")}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"clamp(14px, 3.5vw, 15px)",fontWeight:"600"},children:t("reviewMessage")})]}),v&&!je&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(32px, 8vw, 48px)",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",boxShadow:"0 8px 32px rgba(16, 185, 129, 0.15)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"150px",height:"150px",background:"radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 8px 24px rgba(16, 185, 129, 0.2)",position:"relative"},children:e.jsx(q,{size:40,color:"#10b981"})}),e.jsx("h2",{style:{color:"white",fontSize:"clamp(20px, 5vw, 24px)",marginBottom:"12px",fontWeight:"900",letterSpacing:"-0.5px",position:"relative"},children:t("onDuty")}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"28px",fontSize:"clamp(14px, 3.5vw, 15px)",fontWeight:"600",position:"relative"},children:t("driveSafely")}),e.jsx("button",{onClick:()=>de(!0),className:"btn-primary",style:{width:"100%",background:"linear-gradient(135deg, #f43f5e 0%, #dc2626 100%)",padding:"16px 24px",boxShadow:"0 8px 24px rgba(244, 63, 94, 0.3)",fontSize:"15px",fontWeight:"800",borderRadius:"14px",border:"none",position:"relative"},children:t("submitReports")})]}),(B||v&&je)&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(16px, 4vw, 24px)"},children:[e.jsxs("div",{className:"modal-header",style:{marginBottom:"clamp(16px, 4vw, 24px)"},children:[v&&e.jsx("button",{onClick:()=>de(!1),style:{background:"rgba(255,255,255,0.08)",color:"white",padding:"6px",borderRadius:"8px"},children:e.jsx($e,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"modal-title",children:t(B?"dutyPunchIn":"dutyPunchOut")}),e.jsx("p",{className:"section-subtitle",children:t(B?"start":"end")})]})]}),e.jsxs("div",{className:"input-wrapper-full",style:{marginBottom:"clamp(16px, 4vw, 20px)"},children:[e.jsx("label",{className:"input-label",children:t("currentKm")}),e.jsx("input",{type:"number",className:"input-field",placeholder:t("enterKm"),value:P,onChange:a=>N(a.target.value)})]}),B&&e.jsxs("div",{className:"input-wrapper-full",style:{marginBottom:"clamp(16px, 4vw, 20px)"},children:[e.jsx("label",{className:"input-label",children:t("selectVehicle")}),e.jsxs("select",{className:"input-field",value:ce,onChange:a=>we(a.target.value),style:{background:"rgba(255,255,255,0.05)",color:"white",cursor:"pointer",fontWeight:"700",fontSize:"14px",padding:"12px"},children:[e.jsx("option",{value:"",style:{background:"#0f172a",color:"white"},children:t("selectCar")}),m?.availableVehicles?.map(a=>e.jsxs("option",{value:a._id,style:{background:"#0f172a",color:"white"},children:[a.carNumber," (",a.model,")"]},a._id))]})]}),e.jsxs("div",{className:"photo-capture-grid",style:{marginBottom:"clamp(20px, 5vw, 28px)"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"input-label",style:{marginBottom:"8px"},children:t("driverSelfie")}),x?e.jsxs("div",{className:"photo-preview-container",children:[e.jsx("img",{src:x,alt:"Selfie",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{c(null),Y(null)},className:"photo-delete-button",children:e.jsx(D,{size:14})})]}):e.jsxs("div",{onClick:()=>A("selfie"),className:"photo-capture-button",children:[e.jsx(K,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontSize:"clamp(10px, 2.5vw, 11px)",color:"var(--text-muted)",fontWeight:"700"},children:t("takeSelfie")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"input-label",style:{marginBottom:"8px"},children:t("kmPhoto")}),xe?e.jsxs("div",{className:"photo-preview-container",children:[e.jsx("img",{src:xe,alt:"KM",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{I(null),ae(null)},className:"photo-delete-button",children:e.jsx(D,{size:14})})]}):e.jsxs("div",{onClick:()=>A("km"),className:"photo-capture-button",children:[e.jsx(K,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontSize:"clamp(10px, 2.5vw, 11px)",color:"var(--text-muted)",fontWeight:"700"},children:t("takeKmPhoto")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"input-label",style:{marginBottom:"8px"},children:t("carSelfie")}),ue?e.jsxs("div",{className:"photo-preview-container",children:[e.jsx("img",{src:ue,alt:"Car",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{se(null),ie(null)},className:"photo-delete-button",children:e.jsx(D,{size:14})})]}):e.jsxs("div",{onClick:()=>A("car"),className:"photo-capture-button",children:[e.jsx(K,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontSize:"clamp(10px, 2.5vw, 11px)",color:"var(--text-muted)",fontWeight:"700"},children:t("takeCarPhoto")})]})]})]}),v&&e.jsxs("div",{style:{marginBottom:"clamp(20px, 5vw, 28px)"},children:[e.jsx("h3",{className:"section-title",children:t("expenditureDetails")}),e.jsxs("div",{style:{marginBottom:"clamp(16px, 4vw, 20px)"},children:[e.jsx("p",{className:"input-label",style:{marginBottom:"10px"},children:t("outsideCityQuestion")}),e.jsxs("div",{className:"yes-no-button-group",children:[e.jsx("button",{onClick:()=>pe(!0),className:"yes-no-button",style:{background:O?"var(--primary)":"rgba(255,255,255,0.1)",color:"white"},children:t("yes")}),e.jsx("button",{onClick:()=>pe(!1),className:"yes-no-button",style:{background:O?"rgba(255,255,255,0.1)":"var(--primary)",color:"white"},children:t("no")})]}),O&&e.jsxs("div",{className:"checkbox-group",style:{marginTop:"12px"},children:[e.jsxs("div",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",className:"checkbox-input",checked:w.includes("Same Day"),onChange:a=>{a.target.checked?H([...w,"Same Day"]):H(w.filter(i=>i!=="Same Day"))}}),e.jsx("label",{className:"checkbox-label",children:t("sameDay")})]}),e.jsxs("div",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",className:"checkbox-input",checked:w.includes("Night Stay"),onChange:a=>{a.target.checked?H([...w,"Night Stay"]):H(w.filter(i=>i!=="Night Stay"))}}),e.jsx("label",{className:"checkbox-label",children:t("nightStay")})]})]})]})]}),v&&e.jsxs("div",{style:{marginBottom:"clamp(20px, 5vw, 28px)"},children:[e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",children:t("remarksAdmin")}),e.jsx("textarea",{className:"input-field",placeholder:t("enterRemarks"),value:ye,onChange:a=>ve(a.target.value),style:{marginBottom:"15px",resize:"vertical",minHeight:"60px"}})]}),e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px"},children:[e.jsx("label",{className:"input-label",children:t("otherRemarks")}),e.jsx("textarea",{className:"input-field",placeholder:t("explainOptional"),value:be,onChange:a=>fe(a.target.value),style:{fontSize:"14px",resize:"vertical",minHeight:"60px"}})]})]}),G.text&&e.jsx("div",{style:{padding:"12px",background:G.type==="error"?"rgba(244,63,94,0.1)":"rgba(16,185,129,0.1)",borderRadius:"10px",marginBottom:"16px"},children:e.jsx("p",{style:{color:G.type==="error"?"#f43f5e":"#10b981",fontSize:"clamp(12px, 3vw, 13px)",fontWeight:"600",margin:0},children:G.text})}),e.jsx("button",{onClick:()=>{if(B&&!ce)return h({type:"error",text:"Please select a vehicle"});De(v?"punch-out":"punch-in")},disabled:z,className:"btn-primary",style:{width:"100%",padding:"16px",fontSize:"clamp(14px, 3.5vw, 16px)",fontWeight:"800"},children:z?t("processing").toUpperCase():v?t("submitPunchOut").toUpperCase():t("submitPunchIn").toUpperCase()})]})]}),Te&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content glass-card",style:{maxWidth:"450px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",style:{paddingBottom:"16px",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"modal-title",children:t(y==="fuel"?"logFuel":y==="parking"?"logParking":"driverSeva")}),e.jsx("p",{className:"section-subtitle",children:t("logExpense").toUpperCase()})]}),e.jsx("button",{onClick:()=>{_(!1),l([]),Q(null),U(0)},className:"modal-close-btn",children:e.jsx(D,{size:20})})]}),e.jsx("div",{style:{display:"grid",gap:"16px",marginTop:"20px"},children:o.length===0?e.jsxs("div",{style:{padding:"30px 20px",textAlign:"center",background:"rgba(255,255,255,0.02)",borderRadius:"20px",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",marginBottom:"20px"},children:t("noExpensesYet")||"No expenses added yet"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[y==="fuel"&&e.jsxs("button",{onClick:()=>l([{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),className:"btn-primary",style:{padding:"12px 24px",fontSize:"14px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(J,{size:20})," ",t("logFuel")]}),y==="parking"&&e.jsxs("button",{onClick:()=>l([{type:"parking",amount:"",quantity:"",km:"",fuelType:"",slip:null,preview:null}]),className:"btn-primary",style:{padding:"12px 24px",fontSize:"14px",borderRadius:"12px",background:"var(--secondary)",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(q,{size:20})," ",t("logParking")]}),y==="other"&&e.jsxs("button",{onClick:()=>l([{type:"other",amount:"",quantity:"",km:"",fuelType:"Other",slip:null,preview:null}]),className:"btn-primary",style:{padding:"12px 24px",fontSize:"14px",borderRadius:"12px",background:"#f43f5e",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(Z,{size:20})," ",t("driverSeva")]})]})]}):e.jsxs(e.Fragment,{children:[o.map((a,i)=>e.jsxs("div",{className:"entry-card",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",padding:"16px",borderRadius:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:a.type==="fuel"?"rgba(14, 165, 233, 0.15)":a.type==="parking"?"rgba(245, 158, 11, 0.15)":"rgba(244, 63, 94, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.type==="fuel"?e.jsx(J,{size:16,color:"#0ea5e9"}):a.type==="parking"?e.jsx(q,{size:16,color:"#f59e0b"}):e.jsx(Z,{size:16,color:"#f43f5e"})}),e.jsx("span",{style:{fontWeight:"800",fontSize:"12px",color:"white",textTransform:"uppercase"},children:a.type==="fuel"?t("logFuel"):a.type==="parking"?t("logParking"):t("driverSeva")})]}),e.jsx("button",{onClick:()=>l(o.filter((s,r)=>r!==i)),style:{color:"#f43f5e",background:"rgba(244, 63, 94, 0.1)",padding:"6px",borderRadius:"6px"},children:e.jsx(Ue,{size:16})})]}),e.jsxs("div",{className:"input-grid-2",style:{marginBottom:"16px"},children:[e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px"},children:t("amount")}),e.jsx("input",{type:"number",className:"input-field",placeholder:"0.00",value:a.amount,onChange:s=>{const r=[...o];r[i].amount=s.target.value,l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]}),a.type==="fuel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px"},children:"Rate (₹/L) - Optional"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"₹/L",value:a.rate||"",onChange:s=>{const r=[...o];r[i].rate=s.target.value,r[i].amount&&s.target.value&&(r[i].quantity=(Number(r[i].amount)/Number(s.target.value)).toFixed(2)),l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]}),e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px"},children:"Liters - Optional"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"L",value:a.quantity||"",onChange:s=>{const r=[...o];r[i].quantity=s.target.value,r[i].amount&&s.target.value&&(r[i].rate=(Number(r[i].amount)/Number(s.target.value)).toFixed(2)),l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]})]}),a.type==="fuel"&&e.jsxs("div",{className:"input-wrapper-full",children:[e.jsxs("label",{className:"input-label",style:{fontSize:"10px"},children:[t("meterKm")," (Opt)"]}),e.jsx("input",{type:"number",className:"input-field",placeholder:"KM",value:a.km,onChange:s=>{const r=[...o];r[i].km=s.target.value,l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]})]}),a.type==="fuel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px",marginBottom:"16px"},children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px",marginBottom:"6px"},children:t("fuelType")}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px"},children:["Diesel","Petrol","CNG"].map(s=>e.jsx("button",{type:"button",onClick:()=>{const r=[...o];r[i].fuelType=s,l(r)},style:{padding:"8px 4px",borderRadius:"8px",fontSize:"11px",fontWeight:"800",border:"1px solid",borderColor:a.fuelType===s?"var(--primary)":"rgba(255,255,255,0.1)",background:a.fuelType===s?"rgba(14, 165, 233, 0.15)":"rgba(255,255,255,0.02)",color:a.fuelType===s?"var(--primary)":"var(--text-muted)",transition:"all 0.2s ease"},children:t(s.toLowerCase())},s))})]}),e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px",marginBottom:"16px"},children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px",marginBottom:"6px"},children:t("paymentSource")||"Payment Source"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:["Yatree Office","Guest"].map(s=>e.jsx("button",{type:"button",onClick:()=>{const r=[...o];r[i].paymentSource=s,l(r)},style:{padding:"8px 4px",borderRadius:"8px",fontSize:"11px",fontWeight:"800",border:"1px solid",borderColor:(a.paymentSource||"Yatree Office")===s?"var(--primary)":"rgba(255,255,255,0.1)",background:(a.paymentSource||"Yatree Office")===s?"rgba(14, 165, 233, 0.15)":"rgba(255,255,255,0.02)",color:(a.paymentSource||"Yatree Office")===s?"var(--primary)":"var(--text-muted)",transition:"all 0.2s ease"},children:s},s))})]})]}),a.type==="other"&&e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px",marginBottom:"16px"},children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px",marginBottom:"6px"},children:"Service Type"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px"},children:["Puncture","Car Wash","Other"].map(s=>e.jsx("button",{type:"button",onClick:()=>{const r=[...o];r[i].fuelType=s,l(r)},style:{padding:"8px 4px",borderRadius:"8px",fontSize:"11px",fontWeight:"800",border:"1px solid",borderColor:a.fuelType===s?"#f43f5e":"rgba(255,255,255,0.1)",background:a.fuelType===s?"rgba(244, 63, 94, 0.15)":"rgba(255,255,255,0.02)",color:a.fuelType===s?"#f43f5e":"var(--text-muted)",transition:"all 0.2s ease"},children:s},s))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"8px"},children:[e.jsxs("label",{className:"input-label",style:{fontSize:"10px"},children:[t("receipt")," (Optional)"]}),a.preview?e.jsxs("div",{className:"photo-preview-container",style:{height:"80px",borderRadius:"10px"},children:[e.jsx("img",{src:a.preview,alt:"Receipt",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{const s=[...o];s[i].slip=null,s[i].preview=null,l(s)},className:"photo-delete-button",style:{width:"24px",height:"24px",top:"5px",right:"5px"},children:e.jsx(D,{size:14})})]}):e.jsxs("div",{onClick:()=>{U(i),A("expense_slip")},className:"photo-capture-button",style:{height:"80px",borderRadius:"10px",background:"rgba(255,255,255,0.02)",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx(K,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontWeight:"700",color:"var(--text-muted)",fontSize:"10px",marginTop:"4px"},children:t("captureSlip")})]})]})]},i)),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:"12px"},children:[y==="fuel"&&e.jsxs("button",{onClick:()=>l([...o,{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),className:"action-button glass-card-hover-effect",style:{border:"1px dashed rgba(14, 165, 233, 0.3)",color:"#0ea5e9",background:"rgba(14, 165, 233, 0.05)",padding:"12px 24px",display:"flex",alignItems:"center",gap:"8px",borderRadius:"12px",fontSize:"13px",fontWeight:"800"},children:[e.jsx(J,{size:20})," ",t("logFuel")]}),y==="parking"&&e.jsxs("button",{onClick:()=>l([...o,{type:"parking",amount:"",quantity:"",km:"",fuelType:"",slip:null,preview:null}]),className:"action-button glass-card-hover-effect",style:{border:"1px dashed rgba(245, 158, 11, 0.3)",color:"#f59e0b",background:"rgba(245, 158, 11, 0.05)",padding:"12px 24px",display:"flex",alignItems:"center",gap:"8px",borderRadius:"12px",fontSize:"13px",fontWeight:"800"},children:[e.jsx(q,{size:20})," ",t("logParking")]}),y==="other"&&e.jsxs("button",{onClick:()=>l([...o,{type:"other",amount:"",quantity:"",km:"",fuelType:"Other",slip:null,preview:null}]),className:"action-button glass-card-hover-effect",style:{border:"1px dashed rgba(244, 63, 94, 0.3)",color:"#f43f5e",background:"rgba(244, 63, 94, 0.05)",padding:"12px 24px",display:"flex",alignItems:"center",gap:"8px",borderRadius:"12px",fontSize:"13px",fontWeight:"800"},children:[e.jsx(Z,{size:20})," ",t("driverSeva")]})]}),e.jsx("button",{onClick:Pe,disabled:z,className:"btn-primary",style:{width:"100%",padding:"16px",fontWeight:"900",fontSize:"15px",borderRadius:"12px",marginTop:"10px",boxShadow:"0 8px 20px rgba(14, 165, 233, 0.3)"},children:z?t("processing").toUpperCase():t("submit").toUpperCase()})]})})]})}),b&&e.jsx(Je,{side:b==="expense_slip"?o[f]?.type==="fuel"?"fuel":o[f]?.type==="parking"?"parking":"other":b,onCapture:(a,i)=>{if(b==="selfie")c(a),Y(i);else if(b==="km")I(a),ae(i);else if(b==="car")se(a),ie(i);else if(b==="fuel"){const s=[...ne];s[f].slip=a,s[f].preview=i,he(s)}else if(b==="parking"){const s=[...oe];s[f].slip=a,s[f].preview=i,me(s)}else if(b==="expense_slip"){const s=[...o];s[f].slip=a,s[f].preview=i,l(s)}},onClose:()=>A(null)})]}),T==="ledger"&&e.jsx("div",{className:"ledger-section",children:Re?e.jsx("div",{className:"glass-card",style:{padding:"60px",textAlign:"center"},children:e.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}):e.jsxs("div",{className:"ledger-content",children:[e.jsxs("div",{className:"ledger-summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",marginBottom:"24px"},children:[e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(16, 185, 129, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:t("totalEarned")}),e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:["₹",g?.summary?.totalEarned||0]})]}),e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%)",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(245, 158, 11, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:t("workingDays")}),e.jsx("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:g?.summary?.workingDays||0})]}),e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%)",border:"1px solid rgba(99, 102, 241, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(99, 102, 241, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:t("pendingAdvance")}),e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:["₹",g?.summary?.pendingAdvance||0]})]}),e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)",border:"1px solid rgba(14, 165, 233, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(14, 165, 233, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:t("netPayable")}),e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:["₹",g?.summary?.netPayable||0]})]})]}),e.jsxs("button",{onClick:Ie,className:"btn-primary",style:{width:"100%",marginBottom:"24px",padding:"16px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(He,{size:20})," ",t("downloadExcel")]}),e.jsx("h4",{style:{color:"white",marginBottom:"16px",fontSize:"16px",fontWeight:"800"},children:t("dutyHistory")}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:g?.history?.map(a=>e.jsxs("div",{className:"glass-card",style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",fontWeight:"800",fontSize:"14px",marginBottom:"2px"},children:a.date}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"12px"},children:[a.vehicle," • ",a.totalKM," KM"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("p",{style:{color:"#10b981",fontWeight:"900",fontSize:"15px"},children:["₹",a.dailyWage+a.bonuses]}),e.jsxs("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"10px"},children:["Wage: ",a.dailyWage," + Bonus: ",a.bonuses]})]})]},a._id))}),e.jsx("h4",{style:{color:"white",marginTop:"32px",marginBottom:"16px",fontSize:"16px",fontWeight:"800"},children:t("advanceHistory")}),e.jsx("div",{style:{display:"grid",gap:"12px",marginBottom:"40px"},children:g?.advances?.map(a=>e.jsxs("div",{className:"glass-card",style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderLeft:"4px solid #f43f5e"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",fontWeight:"800",fontSize:"14px",marginBottom:"2px"},children:new Date(a.date).toLocaleDateString()}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"12px"},children:a.remark})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs("p",{style:{color:"#f43f5e",fontWeight:"900",fontSize:"15px"},children:["₹",a.amount]})})]},a._id))})]})})]})})]})};export{pt as default};
