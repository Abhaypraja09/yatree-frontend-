import{b as n,a6 as dt,j as e,U as pt,O as ct,Y as we,Q as xt,V as pe,C as ce,I as ke,p as Te,K as Ce,P as De,J as gt,X as Ie,E as ut,k as ht}from"./vendor-CCQY6jT8.js";import{b as ft,i as b}from"./index-aG9LDhtf.js";import{u as xe,w as mt}from"./excel-CY_lV9AF.js";import{S as bt}from"./SEO-DDwZsfBo.js";const _=({title:o,onClose:h,children:f})=>e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(5, 8, 15, 0.9)",zIndex:1e4,display:"flex",justifyContent:"center",alignItems:"center",padding:"20px",backdropFilter:"blur(12px)"},children:e.jsxs("div",{className:"premium-glass",style:{width:"100%",maxWidth:"580px",padding:"35px",maxHeight:"90vh",overflowY:"auto",borderRadius:"32px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[e.jsx("h2",{style:{color:"white",fontSize:"24px",margin:0,fontWeight:"900",letterSpacing:"-0.5px"},children:o}),e.jsx("button",{onClick:h,style:{background:"rgba(255,255,255,0.05)",color:"white",height:"40px",width:"40px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s"},children:e.jsx(Ie,{size:22})})]}),f]})}),s=({label:o,value:h,onChange:f,type:E="text",required:X=!1,autoComplete:G="off",placeholder:K="",inputMode:R="text"})=>e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.5)",fontSize:"12px",fontWeight:"700",letterSpacing:"0.5px",marginBottom:"10px",display:"block"},children:o}),e.jsx("input",{type:E,className:"input-field",required:X,value:h||"",onChange:Q=>f(Q.target.value),autoComplete:G,placeholder:K,inputMode:R,style:{height:"52px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"14px",fontSize:"15px"}})]}),$=({disabled:o,text:h,message:f})=>e.jsxs("div",{style:{marginTop:"25px"},children:[f?.text&&e.jsxs("div",{style:{padding:"15px",borderRadius:"16px",fontSize:"14px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"12px",background:f.type==="success"?"rgba(16, 185, 129, 0.1)":"rgba(244, 63, 94, 0.1)",color:f.type==="success"?"#10b981":"#f43f5e",border:`1px solid ${f.type==="success"?"rgba(16, 185, 129, 0.1)":"rgba(244, 63, 94, 0.1)"}`},children:[f.type==="success"?e.jsx(ut,{size:20}):e.jsx(ht,{size:20}),e.jsx("span",{style:{fontWeight:"600"},children:f.text})]}),e.jsx("button",{type:"submit",disabled:o,className:"btn-primary",style:{width:"100%",height:"58px",borderRadius:"16px",fontSize:"16px",fontWeight:"800",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:o?e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px",borderTopColor:"white"}}):h})]}),wt=()=>{const{selectedCompany:o}=ft(),[h,f]=n.useState([]),[E,X]=n.useState([]),[G,K]=n.useState(!0),[R,Q]=n.useState(""),[We,Z]=n.useState(!1),[ze,ee]=n.useState(!1),[Ae,te]=n.useState(!1),[Ne,re]=n.useState(!1),[w,ie]=n.useState(null),[ge,ue]=n.useState(null),[y,Oe]=n.useState("All"),[L,Re]=n.useState([]),[he,Le]=n.useState([]),[Y,Fe]=n.useState("All"),[Be,ne]=n.useState(!1),[Me,ae]=n.useState(!1),[_e,$e]=n.useState(!1),[O,se]=n.useState({documentType:"Driving License",expiryDate:""}),[fe,me]=n.useState(null),Ee=dt(),[k,Pe]=n.useState(Ee.state?.tab||"personnel"),[T,P]=n.useState({name:"",mobile:"",licenseNumber:"",dailyWage:""}),[C,U]=n.useState({name:"",mobile:"",licenseNumber:"",dailyWage:""}),[j,W]=n.useState({vehicleId:"",km:"",date:new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,10),time:new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,16),pickUpLocation:""}),[c,v]=n.useState({km:"",time:"",fuelAmount:"0",parkingAmount:"0",review:"",dailyWage:"",dropLocation:""}),[x,z]=n.useState({amount:"",remark:"",date:"",advanceType:"Office",givenBy:"Office"}),[a,d]=n.useState({driverId:"",vehicleId:"",date:"",punchInKM:"",punchOutKM:"",punchInTime:"",punchOutTime:"",pickUpLocation:"",dropLocation:"",fuelAmount:"0",parkingAmount:"0",allowanceTA:!1,nightStayAmount:!1,otherBonus:"0",dailyWage:"",review:""}),le=(t=new Date)=>{const r=new Date(t),i=r.getFullYear(),l=String(r.getMonth()+1).padStart(2,"0"),N=String(r.getDate()).padStart(2,"0");return`${i}-${l}-${N}`},Ue=(t=new Date)=>{const r=new Date(t),i=r.getFullYear(),l=String(r.getMonth()+1).padStart(2,"0"),N=String(r.getDate()).padStart(2,"0"),S=String(r.getHours()).padStart(2,"0"),de=String(r.getMinutes()).padStart(2,"0");return`${i}-${l}-${N}T${S}:${de}`};n.useEffect(()=>{const t=le(),r=Ue();W(i=>({...i,date:t,time:r})),v(i=>({...i,time:r})),z(i=>({...i,date:t})),d(i=>({...i,date:t,punchInTime:t+"T08:00",punchOutTime:t+"T20:00"}))},[]);const qe=()=>{const t=new Date;return t.setDate(t.getDate()-180),le(t)},Ke=()=>le(),[F,Ye]=n.useState(qe()),[B,Ve]=n.useState(Ke()),[D,g]=n.useState(!1),[Je,He]=n.useState(""),[M,Xe]=n.useState(""),[V,u]=n.useState({type:"",text:""}),q=n.useCallback(async()=>{if(o?._id)try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:r}=await b.get(`/api/admin/reports/${o._id}?from=${F}&to=${B}`,{headers:{Authorization:`Bearer ${t.token}`}}),i=(r.attendance||[]).filter(l=>l.isFreelancer||l.driver?.isFreelancer||l.driver?.name?.includes("(F)"));Re(i)}catch(t){console.error("Logistic error:",t)}},[o,F,B]),oe=n.useCallback(async()=>{if(o?._id)try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:r}=await b.get(`/api/admin/advances/${o._id}?isFreelancer=true&from=${F}&to=${B}`,{headers:{Authorization:`Bearer ${t.token}`}});Le(r||[])}catch(t){console.error("Logistic error:",t)}},[o,F,B]),I=n.useCallback(async()=>{if(o?._id){K(!0);try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:r}=await b.get(`/api/admin/drivers/${o._id}?isFreelancer=true&usePagination=false`,{headers:{Authorization:`Bearer ${t.token}`}});f(r.drivers||[])}catch(t){console.error("Logistic error:",t)}finally{K(!1)}}},[o]),J=n.useCallback(async()=>{if(o?._id)try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:r}=await b.get(`/api/admin/vehicles/${o._id}?usePagination=false`,{headers:{Authorization:`Bearer ${t.token}`}});X(r.vehicles||[])}catch(t){console.error("Logistic error:",t)}},[o]);n.useEffect(()=>{o&&(I(),J())},[o,I,J]),n.useEffect(()=>{o&&(q(),oe())},[o,F,B,q,oe]);const Ge=async t=>{t.preventDefault(),g(!0);try{const r=JSON.parse(localStorage.getItem("userInfo"));await b.post("/api/admin/drivers",{...T,companyId:o._id,isFreelancer:!0},{headers:{Authorization:`Bearer ${r.token}`}}),u({type:"success",text:"Freelancer added successfully!"}),setTimeout(()=>{Z(!1),P({name:"",mobile:"",licenseNumber:"",dailyWage:""}),u({type:"",text:""}),I()},1e3)}catch(r){u({type:"error",text:r.response?.data?.message||"Failed"})}finally{g(!1)}},Qe=async t=>{t.preventDefault(),g(!0);try{const r=JSON.parse(localStorage.getItem("userInfo"));await b.post("/api/admin/freelancers/punch-in",{...j,driverId:w._id},{headers:{Authorization:`Bearer ${r.token}`}}),te(!1);const i=new Date(new Date().getTime()-new Date().getTimezoneOffset()*6e4).toISOString();W({vehicleId:"",km:"",date:i.slice(0,10),time:i.slice(0,16),pickUpLocation:""}),I(),J(),q()}catch(r){alert(r.response?.data?.message||"Error")}finally{g(!1)}},Ze=async t=>{t.preventDefault(),g(!0);try{const r=JSON.parse(localStorage.getItem("userInfo"));await b.post("/api/admin/freelancers/punch-out",{...c,driverId:w._id},{headers:{Authorization:`Bearer ${r.token}`}}),re(!1);const i=new Date().toISOString().slice(0,16);v({km:"",time:i,fuelAmount:"0",parkingAmount:"0",review:"",dailyWage:"",dropLocation:""}),I(),J(),q()}catch(r){alert(r.response?.data?.message||"Error")}finally{g(!1)}},et=async t=>{if(t.preventDefault(),!fe)return alert("Please select a file");g(!0);try{const r=JSON.parse(localStorage.getItem("userInfo")),i=new FormData;i.append("document",fe),i.append("documentType",O.documentType),O.expiryDate&&i.append("expiryDate",O.expiryDate),await b.post(`/api/admin/drivers/${w._id}/documents`,i,{headers:{Authorization:`Bearer ${r.token}`,"Content-Type":"multipart/form-data"}}),u({type:"success",text:"Document uploaded!"}),I(),se({documentType:"Driving License",expiryDate:""}),me(null),setTimeout(()=>u({type:"",text:""}),2e3)}catch(r){u({type:"error",text:r.response?.data?.message||"Upload failed"})}finally{g(!1)}},tt=async t=>{t.preventDefault(),g(!0);try{const r=JSON.parse(localStorage.getItem("userInfo"));await b.post("/api/admin/advances",{...x,driverId:w._id,companyId:o._id},{headers:{Authorization:`Bearer ${r.token}`}}),ne(!1),z({amount:"",remark:"",date:new Date().toISOString().slice(0,10),advanceType:"Office",givenBy:"Office"}),oe(),u({type:"success",text:"Advance payment recorded!"}),setTimeout(()=>u({type:"",text:""}),3e3)}catch(r){alert(r.response?.data?.message||"Failed to add advance")}finally{g(!1)}},rt=async t=>{t.preventDefault(),g(!0);try{const r=JSON.parse(localStorage.getItem("userInfo"));await b.post("/api/admin/manual-duty",{...a,companyId:o._id},{headers:{Authorization:`Bearer ${r.token}`}}),ae(!1),d({driverId:"",vehicleId:"",date:new Date().toISOString().split("T")[0],punchInKM:"",punchOutKM:"",punchInTime:"",punchOutTime:"",pickUpLocation:"",dropLocation:"",fuelAmount:"0",parkingAmount:"0",allowanceTA:!1,nightStayAmount:!1,otherBonus:"0",dailyWage:"",review:""}),q(),I(),u({type:"success",text:"Duty recorded successfully!"}),setTimeout(()=>u({type:"",text:""}),3e3)}catch(r){alert(r.response?.data?.message||"Failed to record manual duty")}finally{g(!1)}},it=async t=>{t.preventDefault(),g(!0);try{const r=JSON.parse(localStorage.getItem("userInfo"));await b.put(`/api/admin/drivers/${ge._id}`,C,{headers:{Authorization:`Bearer ${r.token}`}}),u({type:"success",text:"Freelancer updated successfully!"}),setTimeout(()=>{ee(!1),ue(null),u({type:"",text:""}),I()},1e3)}catch(r){u({type:"error",text:r.response?.data?.message||"Update failed"})}finally{g(!1)}},nt=t=>{ue(t),U({name:t.name,mobile:t.mobile,licenseNumber:t.licenseNumber||"",dailyWage:t.dailyWage||""}),ee(!0)},at=async t=>{if(window.confirm("Delete this freelancer?"))try{const r=JSON.parse(localStorage.getItem("userInfo"));await b.delete(`/api/admin/drivers/${t}`,{headers:{Authorization:`Bearer ${r.token}`}}),I()}catch(r){console.error(r),alert("Error deleting")}},be=h.filter(t=>y==="All"||t._id===y),ye=t=>t.name?.toLowerCase().includes(R.toLowerCase())||t.mobile?.includes(R)||t.licenseNumber?.toLowerCase().includes(R.toLowerCase()),je=be.filter(t=>t.tripStatus==="active"&&ye(t)),ve=be.filter(t=>t.tripStatus!=="active"&&ye(t)),A=L.filter(t=>{const r=y==="All"||t.driver?._id===y||t.driver===y,i=Y==="All"||t.vehicle?._id===Y||t.vehicle?.carNumber?.split("#")[0]===Y,l=!M||t.driver?.name?.toLowerCase().includes(M.toLowerCase())||t.vehicle?.carNumber?.toLowerCase().includes(M.toLowerCase())||t.pickUpLocation?.toLowerCase().includes(M.toLowerCase())||t.dropLocation?.toLowerCase().includes(M.toLowerCase());return r&&i&&l});A.reduce((t,r)=>t+(Number(r.dailyWage)||0),0),he.filter(t=>y==="All"?!0:t.driver?._id===y||t.driver===y).reduce((t,r)=>t+r.amount,0),y==="All"||h.find(t=>t._id===y)?.name,[...new Set(L.map(t=>t.pickUpLocation).filter(Boolean))].sort(),[...new Set(L.map(t=>t.dropLocation).filter(Boolean))].sort();const st=[...new Set(L.map(t=>t.vehicle?.carNumber?.split("#")[0]).filter(Boolean))].sort(),lt=()=>{if(A.length===0)return alert("No data to download");const t=A.map(l=>({Date:l.date,"Driver Name":l.driver?.name||"N/A",Car:l.vehicle?.carNumber?l.vehicle.carNumber.slice(-4):"N/A","In Time":l.punchIn?.time?new Date(l.punchIn.time).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-","Out Time":l.punchOut?.time?new Date(l.punchOut.time).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-","Total KM":l.punchOut?.km-l.punchIn?.km||0,"Pick-up":l.pickUpLocation||"-",Drop:l.dropLocation||"-",Salary:l.dailyWage||0,Fuel:l.fuel?.amount||0,"Parking/Toll":l.punchOut?.tollParkingAmount||0,Remarks:l.punchOut?.remarks||""})),r=xe.json_to_sheet(t),i=xe.book_new();xe.book_append_sheet(i,r,"Freelancer Duties"),mt(i,`Freelancer_Report_${new Date().toLocaleDateString()}.xlsx`)};return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(bt,{title:"Freelancer Fleet Network",description:"Onboard and manage freelance drivers for temporary duties and peak demand management."}),e.jsxs("header",{className:"flex-resp",style:{justifyContent:"space-between",padding:"40px 0",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"clamp(40px,10vw,50px)",height:"clamp(40px,10vw,50px)",background:"linear-gradient(135deg, white, #f8fafc)",borderRadius:"16px",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:e.jsx(pt,{size:28,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 8px #fbbf24"}}),e.jsx("span",{style:{fontSize:"clamp(9px,2.5vw,10px)",fontWeight:"800",color:"rgba(255,255,255,0.5)",letterSpacing:"1px",textTransform:"uppercase"},children:"External Workforce"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"900",margin:0,letterSpacing:"-1px",cursor:"pointer"},children:["Freelancers ",e.jsx("span",{className:"text-gradient-yellow",children:"Hub"})]})]})]}),e.jsxs("div",{className:"flex-resp",style:{gap:"15px",flex:"1",justifyContent:"flex-end",flexWrap:"wrap",width:"100%"},children:[e.jsxs("div",{className:"glass-card",style:{padding:"0",display:"flex",alignItems:"center",flex:"1 1 250px",maxWidth:"100%",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx(ct,{size:18,style:{margin:"0 15px",color:"rgba(255,255,255,0.4)",flexShrink:0}}),e.jsx("input",{type:"text",placeholder:k==="logistics"?"Search in duties...":"Find personnel...",value:k==="logistics"?M:R,onChange:t=>k==="logistics"?Xe(t.target.value):Q(t.target.value),style:{background:"transparent",border:"none",color:"white",height:"50px",width:"100%",outline:"none",fontSize:"14px",minWidth:0,paddingRight:"15px"}})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",flex:"1 1 300px",maxWidth:"100%",justifyContent:"space-between"},children:[e.jsxs("button",{className:"glass-card-hover-effect",onClick:()=>ae(!0),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",height:"52px",padding:"0",borderRadius:"14px",fontWeight:"800",background:"rgba(255,255,255,0.05)",color:"white",border:"1px solid rgba(255,255,255,0.1)",whiteSpace:"nowrap",cursor:"pointer",flex:"1 1 50%",minWidth:"100px"},children:[e.jsx(we,{size:16})," ",e.jsx("span",{children:"Entry"})]}),e.jsxs("button",{onClick:()=>Z(!0),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",height:"52px",padding:"0",borderRadius:"14px",fontWeight:"800",background:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)",border:"none",whiteSpace:"nowrap",flexShrink:0,color:"black",boxShadow:"0 8px 15px rgba(251, 191, 36, 0.2)",flex:"1 1 50%",minWidth:"100px"},children:[e.jsx(xt,{size:18})," ",e.jsx("span",{className:"hide-mobile",children:"Add Freelancer"}),e.jsx("span",{className:"show-mobile",children:"Add"})]})]})]})]}),e.jsx("div",{className:"glass-card",style:{padding:"24px",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.05)",marginBottom:"40px",background:"rgba(15, 23, 42, 0.4)"},children:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("div",{style:{display:"flex",background:"rgba(0,0,0,0.2)",padding:"4px",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.03)",overflowX:"auto",whiteSpace:"nowrap",gap:"4px",flex:"0 0 auto",maxWidth:"100%"},children:[{id:"personnel",label:"Drivers",icon:e.jsx(pe,{size:14})},{id:"logistics",label:"Duties",icon:e.jsx(ce,{size:14})},{id:"accounts",label:"Settlement",icon:e.jsx(ke,{size:14})}].map(t=>e.jsxs("button",{onClick:()=>Pe(t.id),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",borderRadius:"12px",border:"none",background:k===t.id?"rgba(99, 102, 241, 0.15)":"transparent",color:k===t.id?"#818cf8":"rgba(255,255,255,0.4)",cursor:"pointer",fontSize:"12px",fontWeight:"800",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:k===t.id?"0 4px 12px rgba(99, 102, 241, 0.1)":"none",flex:"0 0 auto",justifyContent:"center"},children:[t.icon," ",e.jsx("span",{style:{letterSpacing:"0.5px"},children:t.label})]},t.id))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap",flex:"2 1 auto",justifyContent:"flex-end",width:"100%"},children:[e.jsxs("select",{value:y,onChange:t=>Oe(t.target.value),className:"input-field",style:{flex:"1 1 140px",maxWidth:"200px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",color:"white",height:"44px",borderRadius:"12px",fontSize:"13px",fontWeight:"700",margin:0},children:[e.jsx("option",{value:"All",style:{background:"#0f172a"},children:"All Drivers"}),h.map(t=>e.jsx("option",{value:t._id,style:{background:"#0f172a"},children:t.name.split(" (F)")[0]},t._id))]}),e.jsxs("select",{value:Y,onChange:t=>Fe(t.target.value),className:"input-field",style:{flex:"1 1 140px",maxWidth:"200px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",color:"white",height:"44px",borderRadius:"12px",fontSize:"13px",fontWeight:"700",margin:0},children:[e.jsx("option",{value:"All",style:{background:"#0f172a"},children:"All Vehicles"}),st.map(t=>e.jsx("option",{value:t,style:{background:"#0f172a"},children:t},t))]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:"1 1 auto",maxWidth:"450px"},children:[e.jsxs("div",{onClick:t=>{const r=t.currentTarget.querySelector("input");if(r)try{r.showPicker()}catch{r.focus()}},style:{display:"flex",alignItems:"center",background:"rgba(255,255,255,0.03)",padding:"0 15px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",height:"44px",flex:1,cursor:"pointer",transition:"all 0.3s ease"},className:"glass-card-hover-effect",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",marginRight:"10px"},children:[e.jsx("span",{style:{fontSize:"9px",color:"var(--primary)",fontWeight:"bold",textTransform:"uppercase",opacity:.7},children:"From"}),e.jsx(Te,{size:12,style:{color:"white",opacity:.5}})]}),e.jsx("input",{type:"date",value:F,onChange:t=>Ye(t.target.value),onClick:t=>t.stopPropagation(),style:{background:"transparent",color:"white",border:"none",fontSize:"13px",outline:"none",width:"100%",cursor:"pointer"}})]}),e.jsx("span",{style:{color:"rgba(255,255,255,0.1)",fontWeight:"bold"},children:"-"}),e.jsxs("div",{onClick:t=>{const r=t.currentTarget.querySelector("input");if(r)try{r.showPicker()}catch{r.focus()}},style:{display:"flex",alignItems:"center",background:"rgba(255,255,255,0.03)",padding:"0 15px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",height:"44px",flex:1,cursor:"pointer",transition:"all 0.3s ease"},className:"glass-card-hover-effect",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",marginRight:"10px"},children:[e.jsx("span",{style:{fontSize:"9px",color:"var(--primary)",fontWeight:"bold",textTransform:"uppercase",opacity:.7},children:"To"}),e.jsx(Te,{size:12,style:{color:"white",opacity:.5}})]}),e.jsx("input",{type:"date",value:B,onChange:t=>Ve(t.target.value),onClick:t=>t.stopPropagation(),style:{background:"transparent",color:"white",border:"none",fontSize:"13px",outline:"none",width:"100%",cursor:"pointer"}})]})]}),e.jsx("button",{onClick:lt,className:"glass-card-hover-effect",style:{flex:"0 0 auto",height:"44px",width:"44px",borderRadius:"12px",background:"rgba(16,185,129,0.1)",color:"#10b981",border:"1px solid rgba(16,185,129,0.2)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},title:"Export Reports",children:e.jsx(Ce,{size:18})})]})]})}),e.jsxs("div",{style:{position:"relative",minHeight:"600px"},children:[k==="personnel"&&e.jsx("div",{style:{animation:"fadeIn 0.5s ease"},children:e.jsx("div",{style:{borderRadius:"24px",overflow:"hidden",background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"1000px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(255,255,255,0.03)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Freelancer"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Current Status"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Daily Wage"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"center",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Duties"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"right",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Actions"})]})}),e.jsx("tbody",{children:G?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{padding:"60px",textAlign:"center",color:"rgba(255,255,255,0.3)"},children:"Loading drivers..."})}):ve.length===0&&je.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",style:{padding:"80px 40px",textAlign:"center"},children:[e.jsx(pe,{size:40,style:{color:"rgba(255,255,255,0.1)",marginBottom:"20px"}}),e.jsx("h3",{style:{color:"white",fontWeight:"800"},children:"No Freelancers Found"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.3)",marginBottom:"30px"},children:"Add drivers to your network to see them here."})]})}):[...je.sort((t,r)=>t.name.localeCompare(r.name)),...ve.sort((t,r)=>t.name.localeCompare(r.name))].map(t=>{const r=t.tripStatus==="active",i=L.filter(l=>l.driver?._id===t._id||l.driver===t._id).length;return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)",transition:"background 0.3s"},className:"ledger-row",children:[e.jsx("td",{style:{padding:"15px 25px"},children:e.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"12px",background:r?"rgba(244, 63, 94, 0.1)":"rgba(99, 102, 241, 0.1)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(pe,{size:18,style:{color:r?"#f43f5e":"#818cf8"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:t.name.split(" (F)")[0]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"3px"},children:[e.jsxs("a",{href:`tel:${t.mobile}`,style:{color:"rgba(255,255,255,0.4)",fontSize:"12px",textDecoration:"none",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(De,{size:10})," ",t.mobile]}),t.licenseNumber&&e.jsxs("span",{style:{color:"rgba(255,255,255,0.2)",fontSize:"10px"},children:["• ",t.licenseNumber]})]})]})]})}),e.jsxs("td",{style:{padding:"15px 25px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:r?"#f43f5e":"#10b981"}}),e.jsx("span",{style:{fontSize:"11px",color:r?"#f43f5e":"#10b981",fontWeight:"900",textTransform:"uppercase"},children:r?"ON DUTY":"AVAILABLE"})]}),r&&t.assignedVehicle&&e.jsxs("div",{style:{color:"rgba(14,165,233,0.7)",fontSize:"10px",fontWeight:"800",marginTop:"4px",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(ce,{size:10})," ",t.assignedVehicle?.carNumber?.split("#")[0]]})]}),e.jsxs("td",{style:{padding:"15px 25px"},children:[e.jsxs("div",{style:{color:"white",fontWeight:"900",fontSize:"15px"},children:["₹",t.dailyWage||0]}),e.jsx("div",{style:{color:"rgba(255,255,255,0.2)",fontSize:"9px",fontWeight:"900",marginTop:"2px"},children:"BASE RATE"})]}),e.jsx("td",{style:{padding:"15px 25px",textAlign:"center"},children:e.jsx("div",{style:{display:"inline-block",background:"rgba(99, 102, 241, 0.1)",padding:"4px 12px",borderRadius:"100px",border:"1px solid rgba(99,102,241,0.1)"},children:e.jsx("span",{style:{color:"#818cf8",fontWeight:"900",fontSize:"13px"},children:i})})}),e.jsx("td",{style:{padding:"15px 25px",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[r?e.jsx("button",{onClick:()=>{ie(t),v({...c,km:"",time:new Date().toISOString().slice(0,16),dailyWage:t.dailyWage||""}),re(!0)},style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",border:"1px solid rgba(244, 63, 94, 0.2)",padding:"8px 15px",borderRadius:"10px",fontSize:"11px",fontWeight:"900",cursor:"pointer"},children:"FINISH"}):e.jsx("button",{onClick:()=>{ie(t),W({...j,time:new Date().toISOString().slice(0,16),date:new Date().toISOString().split("T")[0]}),te(!0)},style:{background:"rgba(99, 102, 241, 0.1)",color:"#818cf8",border:"1px solid rgba(99, 102, 241, 0.2)",padding:"8px 15px",borderRadius:"10px",fontSize:"11px",fontWeight:"900",cursor:"pointer"},children:"START"}),e.jsx("button",{onClick:()=>{ie(t),ne(!0)},title:"Add Advance",style:{width:"34px",height:"34px",borderRadius:"10px",background:"rgba(16,185,129,0.1)",color:"#10b981",border:"1px solid rgba(16,185,129,0.2)",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:e.jsx(ke,{size:13})}),e.jsx("button",{onClick:()=>nt(t),title:"Edit",style:{width:"34px",height:"34px",borderRadius:"10px",background:"rgba(255,255,255,0.03)",color:"rgba(255,255,255,0.6)",border:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:e.jsx(we,{size:13})}),e.jsx("button",{onClick:()=>at(t._id),title:"Delete",style:{width:"34px",height:"34px",borderRadius:"10px",background:"rgba(244,63,94,0.05)",color:"#f43f5e",border:"1px solid rgba(244,63,94,0.1)",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:e.jsx(gt,{size:13})})]})})]},t._id)})})]})})})}),k==="accounts"&&e.jsx("div",{style:{animation:"fadeIn 0.5s ease"},children:e.jsxs("div",{style:{marginBottom:"32px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[e.jsx("div",{style:{width:"3px",height:"16px",background:"#6366f1",borderRadius:"4px"}}),e.jsx("h4",{style:{margin:0,color:"white",fontSize:"15px",fontWeight:"800"},children:"Driver Wise Settlement"})]}),e.jsx("div",{style:{borderRadius:"20px",overflow:"hidden",background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(255,255,255,0.02)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("th",{style:{padding:"15px 20px",textAlign:"left",color:"rgba(255,255,255,0.3)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase"},children:"Driver Details"}),e.jsx("th",{style:{padding:"15px 20px",textAlign:"center",color:"rgba(255,255,255,0.3)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase"},children:"Stats (Duties/KM)"}),e.jsx("th",{style:{padding:"15px 20px",textAlign:"right",color:"rgba(255,255,255,0.3)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase"},children:"Total Earned"}),e.jsx("th",{style:{padding:"15px 20px",textAlign:"right",color:"rgba(255,255,255,0.3)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase"},children:"Total Advances"}),e.jsx("th",{style:{padding:"15px 20px",textAlign:"right",color:"rgba(255,255,255,0.3)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase"},children:"Net Balance"})]})}),e.jsx("tbody",{children:h.map(t=>{const r=L.filter(p=>p.driver?._id===t._id||p.driver===t._id),i=r.reduce((p,m)=>p+(Number(m.dailyWage)||0),0),l=r.reduce((p,m)=>p+(m.totalKM||m.punchOut?.km-m.punchIn?.km||0),0),N=he.filter(p=>p.driver?._id===t._id||p.driver===t._id),S=N.reduce((p,m)=>p+m.amount,0),de=N.reduce((p,m)=>{const Se=m.givenBy||"Office";return p[Se]=(p[Se]||0)+m.amount,p},{}),ot=Object.entries(de).map(([p,m])=>`${p} (₹${m})`).join(", "),H=i-S;return i===0&&S===0?null:e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.02)",transition:"background 0.2s"},className:"ledger-row",children:[e.jsxs("td",{style:{padding:"15px 20px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"16px",marginBottom:"4px"},children:t.name}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(De,{size:10})," ",t.mobile]}),t.licenseNumber&&e.jsxs("div",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:"900",background:"rgba(255,255,255,0.05)",padding:"1px 4px",borderRadius:"4px"},children:"DL"})," ",t.licenseNumber]})]})]}),e.jsxs("td",{style:{padding:"15px 20px",textAlign:"center"},children:[e.jsxs("div",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:[r.length," Trips"]}),e.jsxs("div",{style:{color:"#818cf8",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",marginTop:"2px"},children:[l.toLocaleString()," KM Record"]})]}),e.jsxs("td",{style:{padding:"15px 20px",textAlign:"right"},children:[e.jsxs("div",{style:{color:"#10b981",fontWeight:"900",fontSize:"16px"},children:["₹",i.toLocaleString()]}),e.jsx("div",{style:{color:"rgba(16, 185, 129, 0.4)",fontSize:"9px",fontWeight:"800"},children:"TOTAL WAGES"})]}),e.jsxs("td",{style:{padding:"15px 20px",textAlign:"right"},children:[e.jsxs("div",{style:{color:"#f43f5e",fontWeight:"900",fontSize:"16px"},children:["₹",S.toLocaleString()]}),e.jsx("div",{style:{color:"rgba(244, 63, 94, 0.4)",fontSize:"9px",fontWeight:"900",textTransform:"uppercase",marginTop:"2px"},children:ot||"No Advances"})]}),e.jsx("td",{style:{padding:"15px 20px",textAlign:"right"},children:e.jsxs("div",{style:{padding:"8px 16px",borderRadius:"12px",background:H>=0?"rgba(16, 185, 129, 0.08)":"rgba(244, 63, 94, 0.08)",color:H>=0?"#10b981":"#f43f5e",fontSize:"17px",fontWeight:"900",display:"inline-block",border:`1px solid ${H>=0?"rgba(16, 185, 129, 0.15)":"rgba(244, 63, 94, 0.15)"}`},children:["₹",H.toLocaleString()]})})]},t._id)}).filter(Boolean)})]})})})]})}),k==="logistics"&&e.jsxs("div",{style:{animation:"fadeIn 0.5s ease"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"28px"},children:[e.jsxs("div",{style:{background:"rgba(16,185,129,0.07)",border:"1px solid rgba(16,185,129,0.18)",borderRadius:"16px",padding:"18px 20px"},children:[e.jsx("p",{style:{color:"rgba(16,185,129,0.7)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",margin:"0 0 4px 0"},children:"Total Duties"}),e.jsx("h3",{style:{color:"white",fontSize:"26px",fontWeight:"900",margin:0},children:A.length})]}),e.jsxs("div",{style:{background:"rgba(14,165,233,0.07)",border:"1px solid rgba(14,165,233,0.18)",borderRadius:"16px",padding:"18px 20px"},children:[e.jsx("p",{style:{color:"rgba(14,165,233,0.7)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",margin:"0 0 4px 0"},children:"Total KM"}),e.jsx("h3",{style:{color:"white",fontSize:"26px",fontWeight:"900",margin:0},children:A.reduce((t,r)=>t+(r.totalKM||r.punchOut?.km-r.punchIn?.km||0),0).toLocaleString()})]}),e.jsxs("div",{style:{background:"rgba(245,158,11,0.07)",border:"1px solid rgba(245,158,11,0.18)",borderRadius:"16px",padding:"18px 20px"},children:[e.jsx("p",{style:{color:"rgba(245,158,11,0.7)",fontSize:"10px",fontWeight:"800",textTransform:"uppercase",margin:"0 0 4px 0"},children:"Total Earned"}),e.jsxs("h3",{style:{color:"white",fontSize:"26px",fontWeight:"900",margin:0},children:["₹",A.reduce((t,r)=>t+(Number(r.dailyWage)||0),0).toLocaleString()]})]})]}),A.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",background:"rgba(255,255,255,0.02)",border:"1px dashed rgba(255,255,255,0.08)",borderRadius:"20px"},children:[e.jsx(ce,{size:40,style:{color:"rgba(255,255,255,0.15)",marginBottom:"16px"}}),e.jsx("p",{style:{color:"rgba(255,255,255,0.35)",fontSize:"14px",fontWeight:"700"},children:"No duty records found for selected period"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.2)",fontSize:"12px",marginTop:"6px"},children:"Try changing the date range, driver filter, or search term"})]}):e.jsx("div",{style:{borderRadius:"24px",overflow:"hidden",background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"1100px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(255,255,255,0.03)",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Date"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Driver"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Vehicle"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Route Details"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"left",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Timing & KM"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"right",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Financials"}),e.jsx("th",{style:{padding:"18px 25px",textAlign:"right",color:"rgba(255,255,255,0.4)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Remarks"})]})}),e.jsx("tbody",{children:A.map(t=>{const r=t.date||(t.punchIn?.time?new Date(t.punchIn.time).toISOString().split("T")[0]:null),i=t.punchIn?.time?new Date(t.punchIn.time).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):"--:--",l=t.punchOut?.time?new Date(t.punchOut.time).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):null,N=t.totalKM||(t.punchOut?.km&&t.punchIn?.km?t.punchOut.km-t.punchIn.km:0),S=t.status==="completed"||!!t.punchOut?.time;return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.03)",transition:"background 0.3s"},className:"ledger-row",children:[e.jsxs("td",{style:{padding:"15px 25px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"13px"},children:r?new Date(r).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):"---"}),e.jsx("div",{style:{color:"rgba(255,255,255,0.3)",fontSize:"10px",fontWeight:"700",marginTop:"2px"},children:r?new Date(r).getFullYear():""})]}),e.jsxs("td",{style:{padding:"15px 25px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:t.driver?.name||"---"}),e.jsx("span",{style:{fontSize:"8px",padding:"2px 8px",borderRadius:"100px",fontWeight:"900",marginTop:"4px",display:"inline-block",background:S?"rgba(16,185,129,0.1)":"rgba(245,158,11,0.1)",color:S?"#10b981":"#f59e0b",border:`1px solid ${S?"rgba(16,185,129,0.1)":"rgba(245,158,11,0.1)"}`},children:S?"COMPLETED":"ON DUTY"})]}),e.jsxs("td",{style:{padding:"15px 25px"},children:[e.jsx("div",{style:{background:"rgba(14,165,233,0.1)",padding:"5px 12px",borderRadius:"8px",display:"inline-block"},children:e.jsx("span",{style:{color:"#0ea5e9",fontSize:"12px",fontWeight:"900"},children:t.vehicle?.carNumber?.split("#")[0]||"N/A"})}),e.jsx("div",{style:{color:"rgba(255,255,255,0.3)",fontSize:"10px",fontWeight:"700",marginTop:"4px"},children:t.vehicle?.model?.split(" ").slice(0,2).join(" ")||""})]}),e.jsx("td",{style:{padding:"15px 25px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"3px"},children:[e.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",background:"#10b981"}}),e.jsx("div",{style:{width:"1px",height:"10px",background:"rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{width:"5px",height:"5px",borderRadius:"50%",background:"#f43f5e"}})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:"12px",fontWeight:"600"},children:t.pickUpLocation||"Start"}),e.jsx("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:"12px",fontWeight:"600",marginTop:"4px"},children:t.dropLocation||"Pending"})]})]})}),e.jsxs("td",{style:{padding:"15px 25px"},children:[e.jsxs("div",{style:{color:"white",fontSize:"12px",fontWeight:"700"},children:[i," - ",l||"Active"]}),e.jsxs("div",{style:{color:"#818cf8",fontSize:"11px",fontWeight:"900",marginTop:"4px"},children:[N," KM Run"]})]}),e.jsxs("td",{style:{padding:"15px 25px",textAlign:"right"},children:[e.jsxs("div",{style:{color:"#10b981",fontSize:"16px",fontWeight:"900"},children:["₹",t.dailyWage||0]}),e.jsxs("div",{style:{display:"flex",gap:"6px",justifyContent:"flex-end",marginTop:"4px"},children:[t.fuel?.amount>0&&e.jsxs("span",{style:{color:"#f59e0b",fontSize:"9px",fontWeight:"900"},children:["F: ₹",t.fuel.amount]}),t.punchOut?.tollParkingAmount>0&&e.jsxs("span",{style:{color:"#8b5cf6",fontSize:"9px",fontWeight:"900"},children:["P: ₹",t.punchOut.tollParkingAmount]})]})]}),e.jsx("td",{style:{padding:"15px 25px",textAlign:"right"},children:e.jsx("div",{style:{color:"rgba(255,255,255,0.3)",fontSize:"11px",fontWeight:"600",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.punchOut?.otherRemarks||t.punchOut?.remarks||"-"})})]},t._id)})})]})})})]})]}),e.jsxs("div",{children:[We&&e.jsx(_,{title:"Add New Freelancer",onClose:()=>Z(!1),children:e.jsxs("form",{onSubmit:Ge,style:{display:"grid",gap:"20px"},children:[e.jsx(s,{label:"Full Name *",value:T.name,onChange:t=>P({...T,name:t}),required:!0}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Mobile Number *",value:T.mobile,onChange:t=>P({...T,mobile:t}),required:!0}),e.jsx(s,{label:"License Number",value:T.licenseNumber,onChange:t=>P({...T,licenseNumber:t})})]}),e.jsx(s,{label:"Daily Wage (₹)",type:"number",value:T.dailyWage,onChange:t=>P({...T,dailyWage:t})}),e.jsx($,{disabled:D,text:"Register Freelancer",message:V})]})}),ze&&e.jsx(_,{title:`Edit Freelancer: ${ge?.name}`,onClose:()=>ee(!1),children:e.jsxs("form",{onSubmit:it,style:{display:"grid",gap:"20px"},children:[e.jsx(s,{label:"Full Name *",value:C.name,onChange:t=>U({...C,name:t}),required:!0}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Mobile Number *",value:C.mobile,onChange:t=>U({...C,mobile:t}),required:!0}),e.jsx(s,{label:"License Number",value:C.licenseNumber,onChange:t=>U({...C,licenseNumber:t})})]}),e.jsx(s,{label:"Daily Wage (₹)",type:"number",value:C.dailyWage,onChange:t=>U({...C,dailyWage:t})}),e.jsx($,{disabled:D,text:"Update Freelancer",message:V})]})}),Ae&&e.jsx(_,{title:`Assign Duty: ${w?.name}`,onClose:()=>te(!1),children:e.jsxs("form",{onSubmit:Qe,style:{display:"grid",gap:"25px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Select Vehicle *"}),e.jsx("input",{type:"text",list:"vehicle-list",className:"input-field",placeholder:"Type car number...",required:!0,value:Je,onChange:t=>{He(t.target.value);const r=E.find(i=>i.carNumber?.split("#")[0]?.toUpperCase()===t.target.value.toUpperCase());r&&W({...j,vehicleId:r._id})}}),e.jsx("datalist",{id:"vehicle-list",children:E.filter(t=>!t.currentDriver).map(t=>e.jsx("option",{value:t.carNumber?.split("#")[0],children:t.model},t._id))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Duty Date *",type:"date",value:j.date,onChange:t=>W({...j,date:t}),required:!0}),e.jsx(s,{label:"Punch-In Time *",type:"datetime-local",value:j.time,onChange:t=>W({...j,time:t}),required:!0})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Starting KM *",type:"number",value:j.km,onChange:t=>W({...j,km:t}),required:!0}),e.jsx(s,{label:"Pick-up Location",value:j.pickUpLocation,onChange:t=>W({...j,pickUpLocation:t})})]}),e.jsx($,{disabled:D,text:"Start Duty"})]})}),Me&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(16px)",zIndex:1100,display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"15px",overflowY:"auto"},children:e.jsxs(motion.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"premium-glass",style:{width:"100%",maxWidth:"600px",padding:"0",border:"1px solid rgba(255,255,255,0.1)",background:"#0f172a",overflow:"visible",margin:"auto",borderRadius:"24px"},children:[e.jsxs("div",{style:{padding:"24px 30px",background:"linear-gradient(to right, #1e293b, #0f172a)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:10,borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",margin:0,fontWeight:"800"},children:"Manual Duty Entry"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",margin:"4px 0 0"},children:"Record Past Trip"})]}),e.jsx("button",{onClick:()=>ae(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",borderRadius:"50%",padding:"10px",border:"none",cursor:"pointer"},children:e.jsx(Ie,{size:18})})]}),e.jsxs("form",{onSubmit:rt,style:{padding:"25px",display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Freelancer *"}),e.jsxs("select",{className:"input-field",required:!0,value:a.driverId,onChange:t=>{const r=h.find(i=>i._id===t.target.value);d({...a,driverId:t.target.value,dailyWage:r?.dailyWage||""})},style:{width:"100%",height:"52px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"14px",color:"white",padding:"0 15px"},children:[e.jsx("option",{value:"",style:{background:"#0f172a"},children:"Select Driver"}),h.map(t=>e.jsx("option",{value:t._id,style:{background:"#0f172a"},children:t.name.split(" (F)")[0]},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Vehicle *"}),e.jsxs("select",{className:"input-field",required:!0,value:a.vehicleId,onChange:t=>d({...a,vehicleId:t.target.value}),style:{width:"100%",height:"52px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"14px",color:"white",padding:"0 15px"},children:[e.jsx("option",{value:"",style:{background:"#0f172a"},children:"Select Car"}),E.map(t=>e.jsxs("option",{value:t._id,style:{background:"#0f172a"},children:[t.carNumber?.split("#")[0]," - ",t.model]},t._id))]})]})]}),e.jsx(s,{label:"Duty Date *",type:"date",value:a.date,onChange:t=>d({...a,date:t}),required:!0}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px"},children:[e.jsx(s,{label:"Punch-In Time *",type:"datetime-local",value:a.punchInTime,onChange:t=>d({...a,punchInTime:t}),required:!0}),e.jsx(s,{label:"Punch-Out Time *",type:"datetime-local",value:a.punchOutTime,onChange:t=>d({...a,punchOutTime:t}),required:!0})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px"},children:[e.jsx(s,{label:"Starting KM *",type:"number",value:a.punchInKM,onChange:t=>d({...a,punchInKM:t}),required:!0}),e.jsx(s,{label:"Closing KM *",type:"number",value:a.punchOutKM,onChange:t=>d({...a,punchOutKM:t}),required:!0})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px"},children:[e.jsx(s,{label:"Pick-up Location",value:a.pickUpLocation,onChange:t=>d({...a,pickUpLocation:t})}),e.jsx(s,{label:"Drop Location",value:a.dropLocation,onChange:t=>d({...a,dropLocation:t})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px"},children:[e.jsx(s,{label:"Fuel Spent (₹)",type:"number",value:a.fuelAmount,onChange:t=>d({...a,fuelAmount:t})}),e.jsx(s,{label:"Parking/Toll (₹)",type:"number",value:a.parkingAmount,onChange:t=>d({...a,parkingAmount:t})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px",alignItems:"end"},children:[e.jsx(s,{label:"Duty Salary (Wage) *",type:"number",value:a.dailyWage,onChange:t=>d({...a,dailyWage:t}),required:!0}),e.jsx(s,{label:"Extra Bonus (₹)",type:"number",value:a.otherBonus,onChange:t=>d({...a,otherBonus:t})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px"},children:[e.jsxs("div",{style:{padding:"12px",background:"rgba(255,255,255,0.02)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",border:a.allowanceTA?"1px solid #fbbf24":"1px solid rgba(255,255,255,0.05)"},onClick:()=>d({...a,allowanceTA:!a.allowanceTA}),children:[e.jsx("input",{type:"checkbox",checked:a.allowanceTA,readOnly:!0}),e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"700"},children:"Day Bonus"}),e.jsx("div",{style:{color:"#fbbf24",fontWeight:"800"},children:"+ ₹100"})]})]}),e.jsxs("div",{style:{padding:"12px",background:"rgba(255,255,255,0.02)",borderRadius:"12px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",border:a.nightStayAmount?"1px solid #fbbf24":"1px solid rgba(255,255,255,0.05)"},onClick:()=>d({...a,nightStayAmount:!a.nightStayAmount}),children:[e.jsx("input",{type:"checkbox",checked:a.nightStayAmount,readOnly:!0}),e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"700"},children:"Night Bonus"}),e.jsx("div",{style:{color:"#fbbf24",fontWeight:"800"},children:"+ ₹200"})]})]})]}),e.jsx("button",{type:"submit",disabled:D,style:{height:"56px",background:"linear-gradient(135deg, #fbbf24, #d97706)",borderRadius:"16px",fontWeight:"900",fontSize:"16px",color:"black",border:"none",boxShadow:"0 12px 24px -8px rgba(251, 191, 36, 0.5)",cursor:D?"not-allowed":"pointer",transition:"all 0.3s ease",textTransform:"uppercase",letterSpacing:"1px",marginTop:"10px"},children:D?"Saving...":"Record Duty"})]})]})}),Ne&&e.jsx(_,{title:`Duty Completion: ${w?.name}`,onClose:()=>re(!1),children:e.jsxs("form",{onSubmit:Ze,style:{display:"grid",gap:"20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Closing KM *",type:"number",value:c.km,onChange:t=>v({...c,km:t}),required:!0}),e.jsx(s,{label:"Drop Location",value:c.dropLocation,onChange:t=>v({...c,dropLocation:t})})]}),e.jsx(s,{label:"Punch-Out Time *",type:"datetime-local",value:c.time,onChange:t=>v({...c,time:t}),required:!0}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Fuel Spent (₹)",type:"number",value:c.fuelAmount,onChange:t=>v({...c,fuelAmount:t})}),e.jsx(s,{label:"Parking/Toll (₹)",type:"number",value:c.parkingAmount,onChange:t=>v({...c,parkingAmount:t})})]}),e.jsx(s,{label:"Duty Salary (Wage) *",type:"number",value:c.dailyWage,onChange:t=>v({...c,dailyWage:t}),required:!0}),e.jsx(s,{label:"Remarks",value:c.review,onChange:t=>v({...c,review:t})}),e.jsx($,{disabled:D,text:"Finish Duty"})]})}),Be&&e.jsxs(_,{title:"Financial Disbursement",onClose:()=>ne(!1),children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx("div",{style:{width:"70px",height:"70px",borderRadius:"24px",background:"rgba(16, 185, 129, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto 15px",border:"1px solid rgba(16, 185, 129, 0.2)"},children:e.jsx(Ce,{size:32,style:{color:"#10b981",transform:"rotate(180deg)"}})}),e.jsx("h3",{style:{color:"white",fontSize:"20px",fontWeight:"900",margin:"0 0 5px 0"},children:"Disburse Advance"}),e.jsxs("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"13px",margin:0},children:["Processing payment for ",e.jsx("span",{style:{color:"#6366f1",fontWeight:"800"},children:w?.name?.split(" (F)")[0]})]})]}),e.jsxs("form",{onSubmit:tt,style:{display:"grid",gap:"25px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"rgba(255,255,255,0.5)",fontSize:"12px",fontWeight:"800",textTransform:"uppercase",marginBottom:"12px",display:"block"},children:"Payment Amount (₹) *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("span",{style:{position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)",color:"#10b981",fontSize:"20px",fontWeight:"900"},children:"₹"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:x.amount,onChange:t=>z({...x,amount:t.target.value}),placeholder:"0.00",style:{paddingLeft:"45px",fontSize:"24px",fontWeight:"900",height:"70px",background:"rgba(5, 8, 15, 0.4)",border:"1px solid rgba(255,255,255,0.1)",color:"white",borderRadius:"20px"}})]}),e.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"15px"},children:[500,1e3,2e3,5e3].map(t=>e.jsxs("button",{type:"button",onClick:()=>z({...x,amount:t.toString()}),style:{flex:1,padding:"10px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)",background:"rgba(255,255,255,0.03)",color:"rgba(255,255,255,0.6)",fontSize:"11px",fontWeight:"900",cursor:"pointer",transition:"all 0.3s"},onMouseEnter:r=>r.currentTarget.style.border="1px solid rgba(16, 185, 129, 0.3)",onMouseLeave:r=>r.currentTarget.style.border="1px solid rgba(255,255,255,0.05)",children:["+₹",t]},t))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Value Date *",type:"date",value:x.date,onChange:t=>z({...x,date:t}),required:!0}),e.jsx(s,{label:"Authorized By *",value:x.givenBy,onChange:t=>z({...x,givenBy:t}),required:!0})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"20px",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"15px"},children:"Classification"}),e.jsx("div",{style:{display:"flex",gap:"10px"},children:["Office","Staff","Other"].map(t=>e.jsx("button",{type:"button",onClick:()=>z({...x,advanceType:t}),style:{flex:1,padding:"12px",borderRadius:"14px",background:x.advanceType===t?"rgba(99, 102, 241, 0.15)":"rgba(5, 8, 15, 0.3)",color:x.advanceType===t?"#818cf8":"rgba(255,255,255,0.3)",fontWeight:"900",fontSize:"12px",cursor:"pointer",border:x.advanceType===t?"1px solid rgba(99, 102, 241, 0.3)":"1px solid rgba(255,255,255,0.02)"},children:t.toUpperCase()},t))})]}),e.jsx(s,{label:"Transaction Reference / Remark",placeholder:"e.g. Fuel Advance, Emergency...",value:x.remark,onChange:t=>z({...x,remark:t})}),e.jsx($,{disabled:D,text:"DISBURSE FUNDS",message:V})]})]}),_e&&e.jsx(_,{title:`Documents: ${w?.name}`,onClose:()=>$e(!1),children:e.jsxs("div",{style:{display:"grid",gap:"25px"},children:[w?.documents?.map((t,r)=>e.jsxs("div",{style:{background:"rgba(255,255,255,0.03)",padding:"15px",borderRadius:"12px",display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",fontWeight:"700",margin:0},children:t.documentType}),e.jsx("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",margin:0},children:t.expiryDate?`Expires: ${new Date(t.expiryDate).toLocaleDateString()}`:"Lifetime"})]}),e.jsx("a",{href:t.imageUrl,target:"_blank",rel:"noreferrer",style:{color:"#6366f1",fontSize:"11px",fontWeight:"800"},children:"VIEW"})]},r)),e.jsxs("form",{onSubmit:et,style:{display:"grid",gap:"15px",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"20px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[e.jsx(s,{label:"Type",value:O.documentType,onChange:t=>se({...O,documentType:t})}),e.jsx(s,{label:"Expiry",type:"date",value:O.expiryDate,onChange:t=>se({...O,expiryDate:t})})]}),e.jsx("input",{type:"file",onChange:t=>me(t.target.files[0]),className:"input-field",style:{height:"48px",paddingTop:"10px"}}),e.jsx($,{disabled:D,text:"Upload",message:V})]})]})})]})]})};export{wt as default};
