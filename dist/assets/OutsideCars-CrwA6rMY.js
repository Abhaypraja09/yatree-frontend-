const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/xlsx.min-CEIpZxOS.js","assets/vendor-BXfTzn-0.js","assets/excel-CRHyTskB.js"])))=>i.map(i=>d[i]);
import{b as ae,i as C,_ as ie}from"./index-CnOv843h.js";import{b as c,j as e,m as j,a8 as se,O as oe,C as _,K as E,H as F,A as ne,X as le}from"./vendor-BXfTzn-0.js";import{S as de}from"./SEO-BCGI2Kay.js";const ge=()=>{const{selectedCompany:y}=ae(),[u,P]=c.useState([]),[k,W]=c.useState(!0),[N,pe]=c.useState(""),[m,$]=c.useState("All"),[f,I]=c.useState("All"),A=()=>new Date().toISOString().split("T")[0],M=()=>{const t=new Date;return t.setDate(t.getDate()-180),t.toISOString().split("T")[0]},[S,V]=c.useState(M()),[v,J]=c.useState(A()),[q,w]=c.useState(!1),[b,D]=c.useState(!1),[T,z]=c.useState(null),[s,d]=c.useState({carNumber:"",model:"",property:"",dutyType:"",ownerName:"",dutyAmount:"",dropLocation:"",date:A()});c.useEffect(()=>{y&&L()},[y]);const L=async()=>{if(y?._id){W(!0);try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:r}=await C.get(`/api/admin/vehicles/${y._id}?usePagination=false&type=outside`,{headers:{Authorization:`Bearer ${t.token}`}});P(r.vehicles?.filter(i=>i.isOutsideCar)||[])}catch(t){console.error(t)}finally{W(!1)}}},H=t=>{$(t),I("All")},X=()=>{D(!1),z(null),d({carNumber:"",model:"",property:f!=="All"?f:"",dutyType:"",ownerName:m!=="All"?m:"",dutyAmount:"",dropLocation:"",date:A(),isDuplicateToday:!1}),w(!0)},G=t=>{const r=t.toUpperCase(),i=u.find(a=>a.carNumber?.split("#")[0]===r);d(i?a=>({...a,carNumber:r,model:i.model||a.model,ownerName:i.ownerName||a.ownerName,isDuplicateToday:!1}):a=>({...a,carNumber:r,isDuplicateToday:!1}))},O=async t=>{if(window.confirm("Delete this outside car?"))try{await C.delete(`/api/admin/vehicles/${t}`,{headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),L()}catch{alert("Error deleting")}},U=async t=>{t.preventDefault();try{const r=JSON.parse(localStorage.getItem("userInfo"));if(!y?._id)return alert("Select a company first!");let i=`${s.carNumber}#${s.date}`;if(!b)i+=`#${Math.random().toString(36).substring(2,7)}`;else if(T){const l=u.find(o=>o._id===T)?.carNumber?.split("#")||[];s.carNumber===l[0]&&s.date===l[1]&&l[2]?i+=`#${l[2]}`:i+=`#${Math.random().toString(36).substring(2,7)}`}let a={carNumber:i,model:s.model?.trim(),property:s.property?.trim(),dutyType:s.dutyType?.trim()||"",ownerName:s.ownerName?.trim(),dutyAmount:Number(s.dutyAmount)||0,dropLocation:s.dropLocation?.trim()||"",companyId:y._id,isOutsideCar:!0,status:"active",createdAt:s.date};if(b&&T)await C.put(`/api/admin/vehicles/${T}`,a,{headers:{Authorization:`Bearer ${r.token}`}});else{const n=new FormData;Object.keys(a).forEach(l=>n.append(l,a[l])),n.append("permitType","Contract"),n.append("carType","Other"),await C.post("/api/admin/vehicles",n,{headers:{Authorization:`Bearer ${r.token}`}})}w(!1),D(!1),z(null),d({...s,carNumber:"",dutyAmount:"",dropLocation:"",dutyType:""}),L()}catch(r){alert(r.response?.data?.message||"Error processing duty")}},B=t=>{d({carNumber:t.carNumber?.split("#")[0]||"",model:t.model,property:t.property||"",dutyType:t.dutyType,ownerName:t.ownerName,dutyAmount:t.dutyAmount,dropLocation:t.dropLocation,date:t.carNumber?.split("#")[1]||new Date(t.createdAt).toISOString().split("T")[0]}),z(t._id),D(!0),w(!0)},h=u.filter(t=>{const i=(t.carNumber?.split("#")[0]||"").toLowerCase().includes(N.toLowerCase())||t.model?.toLowerCase().includes(N.toLowerCase())||t.ownerName?.toLowerCase().includes(N.toLowerCase())||t.property?.toLowerCase().includes(N.toLowerCase()),a=m==="All"||t.ownerName?.trim()===m?.trim(),n=t.property?.trim().toLowerCase().replace(/\s+/g," "),l=f==="All"?"All":f.trim().toLowerCase().replace(/\s+/g," "),o=f==="All"||n===l,p=t.carNumber?.split("#")[1];if(!p)return!1;const g=p>=S&&p<=v;return i&&a&&o&&g}).sort((t,r)=>{const i=t.carNumber?.split("#")[1]||"",a=r.carNumber?.split("#")[1]||"";return i!==a?a.localeCompare(i):new Date(r.createdAt)-new Date(t.createdAt)}),Y=h.reduce((t,r)=>t+(r&&Number(r.dutyAmount)||0),0),K=h.reduce((t,r)=>t+(r?.dutyType?r.dutyType.split(" + ").filter(Boolean).length:0),0),Q=[...new Set(u.map(t=>t.ownerName?.trim()).filter(Boolean))].sort(),Z=Object.values(u.filter(t=>m==="All"||t.ownerName?.trim()===m?.trim()).reduce((t,r)=>{const i=r.property?.trim();if(i){const a=i.toLowerCase().replace(/\s+/g," ");t[a]||(t[a]=i)}return t},{})).sort(),ee=[...new Set(u.map(t=>t.carNumber?.split("#")[0]).filter(Boolean))],te=[...new Set(u.map(t=>t.dutyType).filter(Boolean))],re=[...new Set(u.map(t=>t.dropLocation).filter(Boolean))],R=t=>new Date(t).toLocaleDateString("en-IN",{day:"numeric",month:"short"});return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"60px"},children:[e.jsx(de,{title:"Outside Fleet Command",description:"Manage external vehicles and freelancer drivers for specific duties."}),e.jsxs("header",{style:{paddingBottom:"30px",borderBottom:"1px solid rgba(255,255,255,0.05)",marginBottom:"30px"},children:[e.jsxs("div",{className:"flex-resp",style:{justifyContent:"space-between",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"var(--secondary)",boxShadow:"0 0 10px var(--secondary)"}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"900",color:"rgba(255,255,255,0.4)",letterSpacing:"2px",textTransform:"uppercase"},children:"Logistics Monitor"})]}),e.jsxs("h1",{className:"resp-title",style:{margin:0,fontWeight:"900",letterSpacing:"-1.5px"},children:["Outside ",e.jsx("span",{style:{color:"var(--secondary)"},children:"Fleet"})]}),e.jsxs("p",{className:"resp-subtitle",style:{marginTop:"4px",fontSize:"13px"},children:["External assets from ",e.jsx("b",{children:R(S)})," to ",e.jsx("b",{children:R(v)})]})]}),e.jsxs("div",{className:"flex-resp",style:{gap:"12px"},children:[e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"12px 20px",background:"rgba(99, 102, 241, 0.05)",border:"1px solid rgba(99, 102, 241, 0.1)",display:"flex",flexDirection:"column",minWidth:"130px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:"800",color:"#818cf8",letterSpacing:"1px",textTransform:"uppercase",marginBottom:"4px"},children:"Total Payable"}),e.jsxs("span",{style:{color:"white",fontSize:"18px",fontWeight:"900"},children:["₹",Y.toLocaleString()]})]}),e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card",style:{padding:"12px 20px",background:"rgba(16, 185, 129, 0.05)",border:"1px solid rgba(16, 185, 129, 0.1)",display:"flex",flexDirection:"column",minWidth:"130px"},children:[e.jsx("span",{style:{fontSize:"9px",fontWeight:"800",color:"#34d399",letterSpacing:"1px",textTransform:"uppercase",marginBottom:"4px"},children:"Duties Logged"}),e.jsxs("span",{style:{color:"white",fontSize:"18px",fontWeight:"900"},children:[K," Records"]})]})]})]}),e.jsxs("div",{className:"grid-1-2-2-4",style:{marginTop:"30px",gap:"15px"},children:[e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",children:"From Date"}),e.jsx("input",{type:"date",className:"input-field",value:S,onChange:t=>V(t.target.value),style:{height:"48px",marginBottom:0}})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",children:"To Date"}),e.jsx("input",{type:"date",className:"input-field",value:v,onChange:t=>J(t.target.value),style:{height:"48px",marginBottom:0}})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",children:"Owner Hub"}),e.jsxs("select",{value:m,onChange:t=>H(t.target.value),className:"input-field",style:{height:"48px",marginBottom:0,appearance:"auto"},children:[e.jsx("option",{value:"All",children:"All Owners"}),Q.map(t=>e.jsx("option",{value:t,style:{background:"#0f172a"},children:t},t))]})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",children:"Property Hub"}),e.jsxs("select",{value:f,onChange:t=>I(t.target.value),className:"input-field",style:{height:"48px",marginBottom:0,appearance:"auto"},children:[e.jsx("option",{value:"All",children:"All Properties"}),Z.map(t=>e.jsx("option",{value:t,style:{background:"#0f172a"},children:t},t))]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"15px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:async()=>{const t=await ie(()=>import("./xlsx.min-CEIpZxOS.js").then(o=>o.x),__vite__mapDeps([0,1,2])),r=h.map(o=>({Property:o.property||"",Owner:o.ownerName||"",Date:(()=>{const p=o.carNumber?.split("#")[1]||o.createdAt;return p?new Date(p).toLocaleDateString("en-GB"):""})(),"Vehicle Details":`${o.model||""} - ${o.carNumber?.split("#")[0]||""}`,"Drop Location":o.dropLocation?.replace(/ \| /g," ➜ ")||"","Service Type":o.dutyType||"",Amount:Number(o.dutyAmount)||0})),i=r.reduce((o,p)=>o+p.Amount,0);r.push({Property:"",Owner:"",Date:"","Vehicle Details":"","Drop Location":"","Service Type":"TOTAL PAYABLE",Amount:i});const a=t.utils.json_to_sheet(r),n=t.utils.decode_range(a["!ref"]);for(let o=n.s.c;o<=n.e.c;++o){let p=10;for(let g=n.s.r;g<=n.e.r;++g){const x=a[t.utils.encode_cell({r:g,c:o})];x&&(x.s={alignment:{horizontal:"center",vertical:"center"},font:{name:"Arial",sz:10}},g===0&&(x.s.font.bold=!0,x.s.fill={fgColor:{rgb:"4F46E5"}},x.s.font.color={rgb:"FFFFFF"}),o===6&&(x.s.alignment.horizontal="right"),g===n.e.r&&(x.s.font.bold=!0,x.s.fill={fgColor:{rgb:"E0E7FF"}}),x.v&&(p=Math.max(p,x.v.toString().length+5)))}a["!cols"]||(a["!cols"]=[]),a["!cols"][o]={wch:p}}const l=t.utils.book_new();t.utils.book_append_sheet(l,a,"Outside Fleet Log"),t.writeFile(l,`Outside_Fleet_Report_${S}_to_${v}.xlsx`)},className:"glass-card-hover-effect",style:{height:"52px",padding:"0 20px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",color:"#10b981",fontWeight:"800",display:"flex",alignItems:"center",gap:"8px",borderRadius:"12px"},children:[e.jsx(se,{size:20})," Excel"]}),e.jsxs("button",{onClick:X,className:"glass-card-hover-effect",style:{height:"52px",padding:"0 25px",background:"linear-gradient(135deg, var(--secondary), var(--primary))",color:"white",border:"none",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 14px rgba(99, 102, 241, 0.4)",fontWeight:"800",fontSize:"14px",letterSpacing:"0.5px"},children:[e.jsx(oe,{size:20})," Add Entry"]})]})]}),e.jsx("div",{className:"glass-card hide-mobile",style:{padding:"0",overflowX:"auto",border:"1px solid rgba(255,255,255,0.05)",background:"transparent"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 12px",padding:"0 10px",minWidth:"900px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"left"},children:[e.jsx("th",{style:{padding:"10px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Timeline"}),e.jsx("th",{style:{padding:"10px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Vehicle Identification"}),e.jsx("th",{style:{padding:"10px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Service Detail"}),e.jsx("th",{style:{padding:"10px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Entities"}),e.jsx("th",{style:{padding:"10px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Settlement"}),e.jsx("th",{style:{padding:"10px 25px",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:k?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",style:{textAlign:"center",padding:"100px 0"},children:[e.jsx("div",{className:"spinner",style:{margin:"0 auto 20px"}}),e.jsx("p",{style:{color:"var(--text-muted)",fontWeight:"700"},children:"FETCHING LOGS..."})]})}):h.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",style:{textAlign:"center",padding:"120px 0"},children:[e.jsx(_,{size:60,style:{opacity:.1,color:"var(--secondary)",marginBottom:"20px"}}),e.jsx("h3",{style:{color:"white",fontWeight:"800"},children:"No Duties Logged"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"The fleet is currently idle for the selected filters."})]})}):h.map((t,r)=>e.jsxs(j.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:r*.03},className:"glass-card-hover-effect",style:{background:"rgba(30, 41, 59, 0.4)",borderRadius:"16px"},children:[e.jsx("td",{style:{padding:"20px 25px",borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px"},children:e.jsx("div",{style:{color:"white",fontWeight:"900",fontSize:"16px",letterSpacing:"-0.5px"},children:(()=>{const i=t.carNumber?.split("#");if(i&&i[1]){const[a,n,l]=i[1].split("-"),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${parseInt(l)} ${o[parseInt(n)-1]}`}return new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short"})})()})}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{fontWeight:"900",fontSize:"18px",color:"white",letterSpacing:"0.5px"},children:t.carNumber?.split("#")[0]}),t.dutyType?.includes(" + ")&&e.jsx("span",{style:{fontSize:"9px",background:"rgba(99, 102, 241, 0.2)",color:"#a5b4fc",padding:"3px 8px",borderRadius:"6px",fontWeight:"900",border:"1px solid rgba(165, 180, 252, 0.2)"},children:"COMBINED"})]}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",fontWeight:"600"},children:t.model})]}),e.jsx("td",{style:{padding:"20px 25px"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.dutyType?.split(" + ").map((i,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"var(--secondary)"}}),e.jsx("span",{style:{fontSize:"12px",color:"white",fontWeight:"700"},children:i}),t.dropLocation?.split(" | ")[a]&&e.jsxs("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.3)"},children:["➜ ",t.dropLocation.split(" | ")[a]]})]},a))})}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"800",color:"white"},children:t.property||"N/A"}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.3)",fontWeight:"700"},children:["Owner: ",t.ownerName]})]}),e.jsx("td",{style:{padding:"20px 25px"},children:e.jsx("div",{style:{display:"inline-flex",padding:"10px 18px",background:"rgba(16, 185, 129, 0.05)",borderRadius:"12px",border:"1px solid rgba(16, 185, 129, 0.1)"},children:e.jsxs("span",{style:{color:"#10b981",fontWeight:"900",fontSize:"18px"},children:["₹",t.dutyAmount?.toLocaleString()]})})}),e.jsx("td",{style:{padding:"20px 25px",textAlign:"right",borderTopRightRadius:"16px",borderBottomRightRadius:"16px"},children:e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>B(t),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"10px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:()=>O(t._id),style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",padding:"10px",borderRadius:"12px",border:"1px solid rgba(244, 63, 94, 0.1)"},children:e.jsx(F,{size:16})})]})})]},t._id))})]})}),e.jsx("div",{className:"show-mobile",children:k?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"100px 0"},children:e.jsx("div",{className:"spinner"})}):h.length===0?e.jsxs("div",{className:"glass-card",style:{textAlign:"center",padding:"120px 20px",border:"2px dashed rgba(255,255,255,0.05)",background:"transparent"},children:[e.jsx(_,{size:60,style:{opacity:.1,color:"var(--secondary)",marginBottom:"20px",margin:"0 auto"}}),e.jsx("h3",{style:{color:"white",fontWeight:"800"},children:"No Duties Logged"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"The fleet is currently idle for the selected filters."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:h.map((t,r)=>e.jsxs(j.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:r*.05},className:"glass-card",style:{padding:"20px",background:"rgba(30, 41, 59, 0.4)",borderRadius:"18px",border:"1px solid rgba(255,255,255,0.05)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"80px",height:"80px",background:"var(--secondary)",filter:"blur(60px)",opacity:.05}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"18px",fontWeight:"900",color:"white",letterSpacing:"0.5px"},children:t.carNumber?.split("#")[0]}),t.dutyType?.includes(" + ")&&e.jsx("span",{style:{fontSize:"8px",background:"rgba(99, 102, 241, 0.2)",color:"#a5b4fc",padding:"2px 6px",borderRadius:"4px",fontWeight:"900",textTransform:"uppercase"},children:"Combined"})]}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-muted)",fontWeight:"600"},children:t.model})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#10b981",fontWeight:"900",fontSize:"20px"},children:["₹",t.dutyAmount?.toLocaleString()]}),e.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase"},children:"Payout"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px",padding:"12px",background:"rgba(0,0,0,0.2)",borderRadius:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"9px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800",marginBottom:"2px"},children:"Client Property"}),e.jsx("div",{style:{color:"white",fontSize:"13px",fontWeight:"700"},children:t.property||"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"9px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800",marginBottom:"2px"},children:"Owner"}),e.jsx("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:"13px",fontWeight:"600"},children:t.ownerName})]})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800",marginBottom:"6px"},children:"Duty Timeline"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:t.dutyType?.split(" + ").map((i,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"10px"},children:[e.jsx("div",{style:{marginTop:"4px",width:"6px",height:"6px",borderRadius:"50%",background:"var(--secondary)"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:"white",fontWeight:"700"},children:i}),t.dropLocation?.split(" | ")[a]&&e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:["➜ ",t.dropLocation.split(" | ")[a]]})]})]},a))})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"15px",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{padding:"4px 8px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",fontSize:"11px",color:"white",fontWeight:"700"},children:(()=>{const i=t.carNumber?.split("#");if(i&&i[1]){const[a,n,l]=i[1].split("-"),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${parseInt(l)} ${o[parseInt(n)-1]}`}return new Date(t.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short"})})()}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.3)"},children:["Entry Time: ",new Date(t.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>B(t),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"10px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:()=>O(t._id),style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",padding:"10px",borderRadius:"10px",border:"1px solid rgba(244, 63, 94, 0.1)"},children:e.jsx(F,{size:16})})]})]})]},t._id))})}),e.jsx(ne,{children:q&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(16px)",zIndex:1050,display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},children:e.jsxs(j.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"glass-card",style:{width:"100%",maxWidth:"600px",padding:"0",border:"1px solid rgba(255,255,255,0.1)",background:"#0f172a",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"30px",background:"linear-gradient(to right, #1e293b, #0f172a)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",margin:0,fontWeight:"800"},children:b?"Update Voucher":"New Duty Entry"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"12px",marginTop:"4px",margin:0},children:"Log details for outside vehicle & driver"})]}),e.jsx("button",{onClick:()=>w(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",borderRadius:"50%",padding:"10px",border:"none",cursor:"pointer"},children:e.jsx(le,{size:18})})]}),e.jsxs("form",{onSubmit:U,style:{padding:"30px",display:"grid",gap:"20px"},children:[e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#94a3b8"},children:"Vehicle Number"}),e.jsx("input",{type:"text",list:"carCodes",className:"input-field",required:!0,disabled:b,value:s.carNumber,onChange:t=>G(t.target.value),placeholder:"DL-01...",style:{background:"rgba(255,255,255,0.02)"}}),e.jsx("datalist",{id:"carCodes",children:ee.map((t,r)=>e.jsx("option",{value:t},r))})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#94a3b8"},children:"Model"}),e.jsx("input",{type:"text",className:"input-field",required:!0,value:s.model,onChange:t=>d({...s,model:t.target.value}),placeholder:"e.g. Innova",style:{background:"rgba(255,255,255,0.02)"}})]})]}),e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#94a3b8"},children:"Proprietor (Owner)"}),e.jsx("input",{type:"text",className:"input-field",required:!0,value:s.ownerName,onChange:t=>d({...s,ownerName:t.target.value}),placeholder:"Company Name",style:{background:"rgba(255,255,255,0.02)"}})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#94a3b8"},children:"Property (Client)"}),e.jsx("input",{type:"text",className:"input-field",required:!0,value:s.property,onChange:t=>d({...s,property:t.target.value}),placeholder:"e.g. Hotel Taj",style:{background:"rgba(255,255,255,0.02)"}})]})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#94a3b8"},children:"Duty Date"}),e.jsx("input",{type:"date",className:"input-field",required:!0,value:s.date,onChange:t=>d({...s,date:t.target.value}),style:{background:"rgba(255,255,255,0.02)"}})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.02)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.03)",display:"grid",gap:"20px"},children:[e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#94a3b8"},children:"Service Type"}),e.jsx("input",{type:"text",list:"serviceTypes",className:"input-field",value:s.dutyType,onChange:t=>d({...s,dutyType:t.target.value}),placeholder:"e.g. Airport Drop"}),e.jsx("datalist",{id:"serviceTypes",children:te.map((t,r)=>e.jsx("option",{value:t},r))})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#10b981",fontWeight:"700"},children:"Settlement Amount (₹)"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.dutyAmount,onChange:t=>d({...s,dutyAmount:t.target.value}),style:{fontWeight:"800",color:"var(--secondary)",fontSize:"18px"},placeholder:"0.00"})]})]}),e.jsxs("div",{className:"input-field-group",children:[e.jsx("label",{className:"input-label",style:{color:"#94a3b8"},children:"Drop Location / Terminal"}),e.jsx("input",{type:"text",list:"points",className:"input-field",value:s.dropLocation,onChange:t=>d({...s,dropLocation:t.target.value}),placeholder:"Specific location detail..."}),e.jsx("datalist",{id:"points",children:re.map((t,r)=>e.jsx("option",{value:t},r))})]})]}),e.jsx("button",{type:"submit",className:"glass-card-hover-effect",style:{marginTop:"10px",height:"60px",borderRadius:"16px",fontSize:"16px",fontWeight:"800",letterSpacing:"1px",background:"linear-gradient(135deg, var(--primary), #4f46e5)",color:"white",border:"none",cursor:"pointer",boxShadow:"0 10px 30px rgba(79, 70, 229, 0.3)"},children:b?"UPDATE RECORD":"CONFIRM ENTRY"})]})]})})})]})};export{ge as default};
