import{b as s,j as e,k as ge,m as h,C as u,O as he,Q as D,W as ue,J as fe,x as Z,Z as K,_ as T,M as ee,y as te,n as me,$ as ie,p as ye,a0 as be}from"./vendor-CCQY6jT8.js";import{b as je,i as p}from"./index-DswTxbm0.js";import{S as ve}from"./SEO-CjuU2MAi.js";const Ce=()=>{const{selectedCompany:l}=je(),[W,ae]=s.useState([]),[Se,se]=s.useState([]),[we,B]=s.useState(!0),[re,c]=s.useState(!1),[R,f]=s.useState(""),[A,m]=s.useState(""),[L,E]=s.useState("All India"),[F,ne]=s.useState([]),[M,y]=s.useState("SUV"),[V,b]=s.useState(""),[$,j]=s.useState(""),[U,v]=s.useState(""),[O,S]=s.useState(""),[P,Y]=s.useState(!1),[r,_]=s.useState({rc:null,insurance:null,puc:null,fitness:null,permit:null}),[w,J]=s.useState({rc:"",insurance:"",puc:"",fitness:"",permit:""}),[d,X]=s.useState(null),[n,k]=s.useState({type:"",file:null,expiry:""}),[H,q]=s.useState(!1),[x,g]=s.useState(null);s.useEffect(()=>{l&&(z(),le(),G())},[l]);const z=async()=>{if(l?._id){B(!0);try{const t=JSON.parse(localStorage.getItem("userInfo"));if(!t)return;const{data:i}=await p.get(`/api/admin/vehicles/${l._id}`,{headers:{Authorization:`Bearer ${t.token}`}});ae(i.vehicles||[])}catch(t){console.error(t)}finally{B(!1)}}},le=async()=>{if(l?._id)try{const t=JSON.parse(localStorage.getItem("userInfo"));if(!t)return;const{data:i}=await p.get(`/api/admin/drivers/${l._id}`,{headers:{Authorization:`Bearer ${t.token}`}});se(i.drivers||[])}catch(t){console.error(t)}},G=async()=>{if(l?._id)try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:i}=await p.get(`/api/admin/dashboard/${l._id}`,{headers:{Authorization:`Bearer ${t.token}`}});ne(i.expiringAlerts||[])}catch(t){console.error(t)}},oe=async t=>{t.preventDefault(),Y(!0);try{const i=new FormData;i.append("carNumber",R),i.append("model",A),i.append("permitType",L),i.append("companyId",l._id),i.append("carType",M),i.append("isOutsideCar",!1),i.append("dutyAmount",V||0),i.append("fastagNumber",$),i.append("fastagBalance",U||0),i.append("fastagBank",O),Object.keys(r).forEach(a=>{r[a]&&(i.append(a,r[a]),w[a]&&i.append(`expiry_${a}`,w[a]))}),x?(await p.put(`/api/admin/vehicles/${x}`,i,{headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),alert("Vehicle updated successfully")):(await p.post("/api/admin/vehicles",i,{headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),alert("Vehicle created successfully")),c(!1),f(""),m(""),y("SUV"),b(""),j(""),v(""),S(""),_({rc:null,insurance:null,puc:null,fitness:null,permit:null}),J({rc:"",insurance:"",puc:"",fitness:"",permit:""}),g(null),z(),G()}catch(i){alert(i.response?.data?.message||"Error creating vehicle")}finally{Y(!1)}},de=async t=>{if(!n.type||!n.file)return alert("Please select document type and file");q(!0);try{const i=new FormData;i.append("documentType",n.type.toUpperCase()),i.append("expiryDate",n.expiry),i.append("document",n.file),await p.post(`/api/admin/vehicles/${t}/documents`,i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),k({type:"",file:null,expiry:""}),z(),alert("Document uploaded successfully")}catch(i){alert(i.response?.data?.message||"Error uploading document")}finally{q(!1)}},pe=async t=>{if(window.confirm("Are you sure you want to delete this vehicle? Driver assignments will be cleared."))try{await p.delete(`/api/admin/vehicles/${t}`,{headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),z()}catch(i){alert(i.response?.data?.message||"Error deleting vehicle")}},[C,ce]=s.useState(""),Q=W.filter(t=>!t.isOutsideCar&&(t.carNumber?.toLowerCase().includes(C.toLowerCase())||t.model?.toLowerCase().includes(C.toLowerCase()))),xe=({data:t})=>{if(!t||t.length===0)return null;const i=[...t,...t,...t,...t];return e.jsxs("div",{className:"vehicle-ticker-container",style:{position:"sticky",top:"0px",zIndex:1e3,margin:"0 -20px 30px -20px",padding:"0 20px"},children:[e.jsxs("div",{className:"vehicle-ticker-wrap",style:{background:"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px 0",overflow:"hidden",display:"flex",marginTop:"0px",alignItems:"center",boxShadow:"0 10px 30px -5px rgba(0, 0, 0, 0.5)",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:"140px",background:"linear-gradient(to right, #0f172a 80%, transparent)",zIndex:10,display:"flex",alignItems:"center",paddingLeft:"15px"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #ef4444, #b91c1c)",color:"white",fontSize:"9px",fontWeight:"900",padding:"4px 10px",borderRadius:"6px",textTransform:"uppercase",letterSpacing:"1.5px",boxShadow:"0 0 15px rgba(239, 68, 68, 0.4)",display:"flex",alignItems:"center",gap:"6px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{width:"6px",height:"6px",background:"white",borderRadius:"50%",animation:"tickerPulse 0.8s infinite alternate"}}),"LIVE STATUS"]})}),e.jsx(h.div,{style:{display:"flex",whiteSpace:"nowrap",gap:"60px",paddingLeft:"150px"},animate:{x:["0%","-50%"]},transition:{x:{repeat:1/0,repeatType:"loop",duration:Math.max(40,t.length*10),ease:"linear"}},children:i.map((a,o)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:a.currentDriver?"#10b981":"#f59e0b",boxShadow:`0 0 10px ${a.currentDriver?"rgba(16, 185, 129, 0.5)":"rgba(245, 158, 11, 0.5)"}`}}),e.jsx("span",{style:{color:"white",fontWeight:"800",fontSize:"13px",letterSpacing:"0.5px"},children:a.carNumber})]}),e.jsx("span",{style:{color:"rgba(255,255,255,0.1)",fontSize:"12px"},children:"|"}),e.jsx("span",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"600"},children:a.currentDriver?e.jsxs(e.Fragment,{children:["Duty: ",e.jsx("span",{style:{color:"white",fontWeight:"800"},children:a.currentDriver.name})]}):e.jsx("span",{style:{color:"#f59e0b",fontWeight:"700"},children:"STANDBY"})}),e.jsx("span",{style:{color:"rgba(255,255,255,0.1)",fontSize:"12px"},children:"|"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx(te,{size:12,style:{color:"var(--secondary)"}}),e.jsxs("span",{style:{color:"white",fontSize:"12px",fontWeight:"800"},children:["₹",a.fastagBalance||0]})]})]},o))}),e.jsx("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"80px",background:"linear-gradient(to left, #0f172a 20%, transparent)",zIndex:10}})]}),e.jsx("style",{children:`
                        @keyframes tickerPulse {
                            from { transform: scale(1); opacity: 1; }
                            to { transform: scale(1.3); opacity: 0.6; }
                        }
                    `})]})};return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(ve,{title:"Manage Vehicles",description:"Track and manage all vehicles in your fleet, including document status and assignments."}),e.jsx(xe,{data:W}),F.length>0&&e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f59e0b",marginBottom:"15px"},children:[e.jsx(ge,{size:18}),e.jsx("h2",{style:{fontSize:"14px",fontWeight:"800",margin:0,textTransform:"uppercase",letterSpacing:"1px"},children:"System Critical Alerts"})]}),e.jsx("div",{className:"scroll-x",style:{display:"flex",gap:"15px",paddingBottom:"10px"},children:F.map((t,i)=>e.jsxs(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:i*.1},className:"glass-card",style:{minWidth:"260px",padding:"16px",borderLeft:`4px solid ${t.daysLeft<0?"#f43f5e":t.daysLeft===0?"#0ea5e9":"#f59e0b"}`,background:t.daysLeft<0?"rgba(244, 63, 94, 0.05)":"rgba(245, 158, 11, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"700"},children:t.identifier}),e.jsx("span",{style:{fontSize:"10px",color:"white",padding:"2px 8px",borderRadius:"4px",background:t.daysLeft<0?"#f43f5e":t.daysLeft===0?"#0ea5e9":"#f59e0b",fontWeight:"800",textTransform:"uppercase"},children:t.daysLeft<0?`${Math.abs(t.daysLeft)} Days Ago`:t.daysLeft===0?"Today":`${t.daysLeft} Days Left`})]}),e.jsx("p",{style:{color:"white",fontWeight:"800",margin:"0 0 4px 0",fontSize:"15px"},children:t.documentType}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:["Expires on: ",e.jsx("span",{style:{color:"white"},children:new Date(t.expiryDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]})]},i))})]}),e.jsx("header",{style:{paddingBottom:"30px",borderBottom:"1px solid rgba(255,255,255,0.05)",marginBottom:"30px"},children:e.jsxs("div",{className:"flex-resp",style:{justifyContent:"space-between",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"clamp(40px,10vw,50px)",height:"clamp(40px,10vw,50px)",background:"linear-gradient(135deg, white, #f8fafc)",borderRadius:"16px",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:e.jsx(u,{size:28,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 8px #fbbf24"}}),e.jsx("span",{style:{fontSize:"clamp(9px,2.5vw,10px)",fontWeight:"800",color:"rgba(255,255,255,0.5)",letterSpacing:"1px",textTransform:"uppercase"},children:"Asset Management"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"900",margin:0,letterSpacing:"-1.5px",cursor:"pointer"},children:["Vehicle ",e.jsx("span",{className:"text-gradient-yellow",children:"Fleet"})]})]})]}),e.jsxs("div",{className:"mobile-stack",style:{display:"flex",gap:"12px",alignItems:"center",flex:"1",justifyContent:"flex-end",maxWidth:"600px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"140px"},children:[e.jsx(he,{size:18,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search...",value:C,onChange:t=>ce(t.target.value),className:"input-field",style:{paddingLeft:"48px",marginBottom:0,height:"48px",borderRadius:"12px",background:"rgba(255,255,255,0.03)",width:"100%"}})]}),e.jsxs("button",{className:"btn-primary",onClick:()=>{g(null),f(""),m(""),y("SUV"),b(""),j(""),v(""),S(""),c(!0)},style:{height:"48px",padding:"0 15px",borderRadius:"12px",fontWeight:"800",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx(D,{size:20})," ",e.jsx("span",{className:"hide-mobile",children:"Add Vehicle"}),e.jsx("span",{className:"show-mobile",children:"Add"})]})]})]})}),e.jsx("div",{className:"grid-1-2-2-3",style:{paddingBottom:"40px"},children:Q.length>0?Q.map((t,i)=>e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},whileHover:{y:-8,boxShadow:"0 12px 24px rgba(0,0,0,0.2)"},className:"glass-card",style:{padding:"24px",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",right:"-5%",width:"120px",height:"120px",background:"var(--primary)",filter:"blur(80px)",opacity:.1,zIndex:0}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",alignItems:"flex-start",position:"relative",zIndex:1},children:[e.jsx("div",{style:{background:"rgba(14, 165, 233, 0.1)",border:"1px solid rgba(14, 165, 233, 0.2)",padding:"12px",borderRadius:"14px",color:"var(--primary)",boxShadow:"0 4px 12px rgba(14, 165, 233, 0.1)"},children:e.jsx(u,{size:24})}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",padding:"6px 12px",borderRadius:"30px",border:"1px solid rgba(255,255,255,0.08)"},children:e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.5px"},children:t.carType||"SUV"})}),e.jsx("button",{onClick:()=>{g(t._id),f(t.carNumber),m(t.model),E(t.permitType||"All India"),y(t.carType||"SUV"),b(t.dutyAmount||""),j(t.fastagNumber||""),v(t.fastagBalance||""),S(t.fastagBank||""),c(!0)},style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)",transition:"0.2s"},children:e.jsx(ue,{size:16})}),e.jsx("button",{onClick:()=>pe(t._id),style:{background:"rgba(244, 63, 94, 0.05)",color:"#f43f5e",padding:"8px",borderRadius:"10px",border:"1px solid rgba(244, 63, 94, 0.1)",transition:"0.2s"},onMouseEnter:a=>a.currentTarget.style.background="rgba(244, 63, 94, 0.15)",onMouseLeave:a=>a.currentTarget.style.background="rgba(244, 63, 94, 0.05)",children:e.jsx(fe,{size:16})})]})]}),e.jsxs("div",{style:{flex:1,position:"relative",zIndex:1},children:[e.jsx("h3",{style:{color:"white",fontSize:"22px",fontWeight:"900",margin:"0 0 4px 0",letterSpacing:"-0.5px"},children:t.carNumber}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",marginBottom:"20px",fontWeight:"500"},children:t.model}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"25px",flexWrap:"wrap"},children:[["RC","PUC","INS"].map(a=>{const o=t.documents?.find(N=>N.documentType===a)||t.documents?.find(N=>N.documentType===(a==="INS"?"INSURANCE":a)),I=o?new Date(o.expiryDate)<new Date:!0;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"10px",fontWeight:"800",padding:"4px 8px",borderRadius:"6px",background:o?I?"rgba(244, 63, 94, 0.1)":"rgba(16, 185, 129, 0.1)":"rgba(255,255,255,0.03)",color:o?I?"#f43f5e":"#10b981":"var(--text-muted)",border:`1px solid ${o?I?"rgba(244, 63, 94, 0.1)":"rgba(16, 185, 129, 0.1)":"rgba(255,255,255,0.05)"}`},children:[o?I?e.jsx(K,{size:10}):e.jsx(T,{size:10}):e.jsx(Z,{size:10}),a]},a)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"10px",fontWeight:"800",padding:"4px 8px",borderRadius:"6px",background:"rgba(14, 165, 233, 0.05)",color:"var(--primary)",border:"1px solid rgba(14, 165, 233, 0.1)"},children:[e.jsx(ee,{size:10})," ",t.permitType]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"16px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:"15px"},children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:t.currentDriver?"#10b981":"#f59e0b"}}),e.jsx("p",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800",letterSpacing:"0.4px",margin:0},children:"Driver"})]}),e.jsx("p",{style:{color:"white",fontSize:"14px",fontWeight:"700",margin:0},children:t.currentDriver?.name||"Available / Yard"})]})}),e.jsx("button",{onClick:()=>X(t),style:{background:"linear-gradient(135deg, var(--primary), #0284c7)",color:"white",border:"none",padding:"8px 18px",borderRadius:"10px",fontSize:"12px",fontWeight:"800",boxShadow:"0 4px 12px rgba(14, 165, 233, 0.2)",transition:"0.3s"},onMouseEnter:a=>a.currentTarget.style.transform="translateY(-2px)",onMouseLeave:a=>a.currentTarget.style.transform="translateY(0)",children:"Manage"})]}),e.jsxs("div",{style:{display:"flex",borderTop:"1px solid rgba(255,255,255,0.05)",marginTop:"12px",paddingTop:"12px",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(te,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"12px",color:"white",fontWeight:"800"},children:["₹",t.fastagBalance||0]}),e.jsx("span",{style:{fontSize:"9px",color:"var(--text-muted)",marginLeft:"4px"},children:"Fastag"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(me,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"12px",color:"white",fontWeight:"800"},children:["₹",t.dutyAmount||0]}),e.jsx("span",{style:{fontSize:"9px",color:"var(--text-muted)",marginLeft:"4px"},children:"Base Rate"})]})]})]})]})]},t._id)):e.jsxs("div",{className:"glass-card",style:{gridColumn:"1/-1",padding:"80px 20px",textAlign:"center",border:"2px dashed rgba(255,255,255,0.05)",background:"transparent"},children:[e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",width:"90px",height:"90px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto 25px"},children:e.jsx(u,{size:36,style:{color:"var(--text-muted)",opacity:.3}})}),e.jsx("h3",{style:{color:"white",marginBottom:"10px",fontSize:"22px",fontWeight:"800"},children:"No vehicles matched your search"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"30px",maxWidth:"400px",margin:"0 auto 30px",fontSize:"15px"},children:"Check for typos or add a new vehicle if it's missing from the fleet."}),e.jsx("button",{className:"btn-primary",onClick:()=>c(!0),style:{padding:"12px 30px"},children:"Add New Fleet Vehicle"})]})}),re&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(2, 6, 23, 0.85)",backdropFilter:"blur(12px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:e.jsxs(h.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"premium-glass",style:{padding:"clamp(24px, 5vw, 40px)",width:"100%",maxWidth:"800px",background:"linear-gradient(145deg, #0f172a, #1e293b)",border:"1px solid rgba(255,255,255,0.1)",overflowY:"auto",maxHeight:"90vh",borderRadius:"32px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"35px",position:"relative"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0,letterSpacing:"-1px"},children:[x?"Edit Vehicle":"Add New"," ",e.jsx("span",{style:{background:"linear-gradient(to right, #6366f1, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Fleet Asset"})]}),e.jsx("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",margin:"6px 0 0",letterSpacing:"1.5px"},children:"Vehicle Information Management"})]}),e.jsx("button",{onClick:()=>{c(!1),g(null)},style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",color:"white",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:t=>t.currentTarget.style.background="rgba(244, 63, 94, 0.2)",onMouseOut:t=>t.currentTarget.style.background="rgba(255,255,255,0.05)",children:e.jsx(K,{size:24})})]}),e.jsxs("form",{onSubmit:oe,style:{display:"flex",flexDirection:"column",gap:"30px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#6366f1"}}),e.jsx("h3",{style:{color:"white",fontSize:"14px",fontWeight:"800",textTransform:"uppercase",margin:0,letterSpacing:"1px"},children:"Core Specifications"})]}),e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Car Number *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#6366f1"},children:e.jsx(u,{size:16})}),e.jsx("input",{className:"input-field",style:{paddingLeft:"45px",height:"54px",fontSize:"15px",fontWeight:"700",textTransform:"uppercase"},placeholder:"e.g. RJ-27-TA-XXXX",value:R,onChange:t=>f(t.target.value),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Model Name *"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#6366f1"},children:e.jsx(ie,{size:16})}),e.jsx("input",{className:"input-field",style:{paddingLeft:"45px",height:"54px",fontSize:"15px"},placeholder:"e.g. Maruti Ciaz",value:A,onChange:t=>m(t.target.value),required:!0})]})]})]}),e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Permit Category"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#6366f1"},children:e.jsx(ee,{size:16})}),e.jsxs("select",{className:"input-field",style:{paddingLeft:"45px",height:"54px",appearance:"none",cursor:"pointer"},value:L,onChange:t=>E(t.target.value),children:[e.jsx("option",{value:"All India",style:{background:"#0f172a"},children:"All India (National)"}),e.jsx("option",{value:"State Only",style:{background:"#0f172a"},children:"State Only"}),e.jsx("option",{value:"Local",style:{background:"#0f172a"},children:"Local Trip"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Car Segment"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#6366f1"},children:e.jsx(u,{size:16})}),e.jsxs("select",{className:"input-field",style:{paddingLeft:"45px",height:"54px",appearance:"none",cursor:"pointer"},value:M,onChange:t=>y(t.target.value),children:[e.jsx("option",{value:"SUV",style:{background:"#0f172a"},children:"SUV / MUV"}),e.jsx("option",{value:"Sedan",style:{background:"#0f172a"},children:"Sedan"}),e.jsx("option",{value:"Hatchback",style:{background:"#0f172a"},children:"Hatchback"}),e.jsx("option",{value:"Other",style:{background:"#0f172a"},children:"Luxury / Other"})]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"5px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#10b981"}}),e.jsx("h3",{style:{color:"white",fontSize:"14px",fontWeight:"800",textTransform:"uppercase",margin:0,letterSpacing:"1px"},children:"Financials & Tracking"})]}),e.jsxs("div",{className:"form-grid-3",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fastag ID"}),e.jsx("input",{className:"input-field",style:{height:"50px"},placeholder:"ID Number",value:$,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fastag Bank"}),e.jsx("input",{className:"input-field",style:{height:"50px"},placeholder:"e.g. ICICI",value:O,onChange:t=>S(t.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fastag Balance (₹)"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"#10b981",fontWeight:"900"},children:"₹"}),e.jsx("input",{type:"number",className:"input-field no-spinner",style:{height:"50px",paddingLeft:"32px"},placeholder:"0.00",value:U,onChange:t=>v(t.target.value)})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Daily Rental / Duty Amount"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"#10b981",fontWeight:"900"},children:"₹"}),e.jsx("input",{type:"number",className:"input-field no-spinner",style:{height:"54px",paddingLeft:"35px",fontSize:"16px",fontWeight:"800"},placeholder:"Fixed Daily Amount",value:V,onChange:t=>b(t.target.value)})]})]})]}),e.jsxs("div",{style:{padding:"25px",background:"rgba(255,255,255,0.02)",borderRadius:"24px",border:"1px solid rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f59e0b"}}),e.jsx("h3",{style:{color:"white",fontSize:"14px",fontWeight:"800",textTransform:"uppercase",margin:0,letterSpacing:"1px"},children:"Fleet Documentation"})]}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.3)",fontWeight:"700"},children:"JPG/PNG/PDF • MAX 5MB"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:["rc","insurance","puc","fitness","permit"].map(t=>e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr 180px",gap:"20px",alignItems:"center",padding:"12px 15px",background:"rgba(0,0,0,0.2)",borderRadius:"16px",border:r[t]?"1px solid rgba(16, 185, 129, 0.2)":"1px solid transparent"},children:[e.jsx("label",{style:{color:"white",fontSize:"12px",fontWeight:"900",textTransform:"uppercase"},children:t}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{id:`file-${t}`,type:"file",onChange:i=>_({...r,[t]:i.target.files[0]}),style:{display:"none"}}),e.jsxs("label",{htmlFor:`file-${t}`,style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 15px",background:r[t]?"rgba(16, 185, 129, 0.1)":"rgba(255,255,255,0.05)",borderRadius:"10px",border:"1px dashed rgba(255,255,255,0.1)",cursor:"pointer",fontSize:"13px",color:r[t]?"#10b981":"rgba(255,255,255,0.4)",fontWeight:"700",transition:"all 0.2s ease"},children:[r[t]?e.jsx(T,{size:16}):e.jsx(Z,{size:16}),r[t]?r[t].name.substring(0,20)+(r[t].name.length>20?"...":""):"Upload Scan"]})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(ye,{size:14,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,0.3)"}}),e.jsx("input",{type:"date",className:"input-field",placeholder:"Expiry",style:{marginBottom:0,padding:"8px 12px 8px 35px",fontSize:"13px",height:"42px",colorScheme:"dark"},value:w[t],onChange:i=>J({...w,[t]:i.target.value})})]})]},t))}),e.jsxs("p",{style:{margin:0,fontSize:"11px",color:"rgba(255,255,255,0.3)",fontStyle:"italic",textAlign:"center"},children:[e.jsx(ie,{size:10,style:{marginRight:"5px"}}),"Document upload is optional during creation, but required for duty assignments."]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",padding:"10px 0"},children:[e.jsx("button",{type:"button",className:"glass-card",style:{flex:1,padding:"16px",color:"white",fontWeight:"800",borderRadius:"18px",border:"1px solid rgba(255,255,255,0.05)",cursor:"pointer"},onMouseOver:t=>t.currentTarget.style.background="rgba(255,255,255,0.1)",onMouseOut:t=>t.currentTarget.style.background="transparent",onClick:()=>{c(!1),g(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",style:{flex:2,padding:"16px",borderRadius:"18px",fontSize:"16px",fontWeight:"900",boxShadow:"0 20px 40px -10px rgba(14, 165, 233, 0.4)"},disabled:P,children:P?e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx("div",{className:"spinner",style:{width:"20px",height:"20px"}}),e.jsx("span",{children:"Processing..."})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[x?e.jsx(T,{size:20}):e.jsx(D,{size:20}),e.jsx("span",{children:x?"Save Vehicle Updates":"Add Vehicle to Fleet"})]})})]})]})]})}),d&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"15px"},children:e.jsxs(h.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"glass-card modal-content",style:{padding:"25px",width:"100%",maxWidth:"850px",maxHeight:"95vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"800",margin:0},children:"Documents"}),e.jsx("p",{style:{color:"var(--primary)",fontSize:"13px",margin:0,fontWeight:"600"},children:d.carNumber})]}),e.jsx("button",{onClick:()=>X(null),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%"},children:e.jsx(D,{size:20,style:{transform:"rotate(45deg)"}})})]}),e.jsxs("div",{className:"grid-responsive",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"20px",marginBottom:"35px"},children:[d.documents?.map((t,i)=>e.jsxs("div",{className:"glass-card",style:{padding:"12px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("p",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",margin:0},children:t.documentType}),e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:new Date(t.expiryDate)<new Date?"rgba(244, 63, 94, 0.1)":"rgba(16, 185, 129, 0.1)",color:new Date(t.expiryDate)<new Date?"#f43f5e":"#10b981",fontWeight:"700"},children:new Date(t.expiryDate)<new Date?"Expired":"Valid"})]}),e.jsxs("div",{className:"img-container",style:{position:"relative",height:"140px",borderRadius:"10px",overflow:"hidden",marginBottom:"10px",cursor:"pointer"},onClick:()=>window.open(t.imageUrl),children:[e.jsx("img",{src:t.imageUrl,style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("div",{className:"img-overlay",style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",opacity:0,transition:"0.3s"},children:e.jsx(be,{size:20,color:"white"})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",paddingTop:"10px",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"600"},children:(()=>{const a=new Date(t.expiryDate)<new Date;return e.jsxs(e.Fragment,{children:["Expires: ",e.jsx("span",{style:{color:a?"#f43f5e":"white",fontWeight:"800"},children:new Date(t.expiryDate).toLocaleDateString("en-IN")})]})})()}),e.jsx("a",{href:`https://wa.me/91${JSON.parse(localStorage.getItem("userInfo"))?.mobile||"9660953135"}?text=${encodeURIComponent(`ALERT: Vehicle ${d.carNumber} document (${t.documentType}) is expiring on ${new Date(t.expiryDate).toLocaleDateString()}. Please take action.`)}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#25D366",background:"rgba(37, 211, 102, 0.1)",padding:"6px",borderRadius:"8px",fontSize:"14px",textDecoration:"none"},title:"Send WhatsApp Reminder",children:"WA"})]})]},i)),(!d.documents||d.documents.length===0)&&e.jsx("div",{style:{gridColumn:"1/-1",padding:"40px",border:"1px dashed rgba(255,255,255,0.1)",borderRadius:"16px",textAlign:"center"},children:e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",margin:0},children:"No documents uploaded for this vehicle."})})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:"25px"},children:[e.jsx("h3",{style:{color:"white",fontSize:"16px",fontWeight:"700",marginBottom:"15px"},children:"Quick Upload"}),e.jsxs("div",{className:"quick-upload-grid",children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",marginBottom:"6px"},children:"Type"}),e.jsxs("select",{className:"input-field",value:n.type,onChange:t=>k({...n,type:t.target.value}),style:{marginBottom:0,height:"42px",fontSize:"13px",fontWeight:"600"},children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"RC",children:"RC"}),e.jsx("option",{value:"INSURANCE",children:"Insurance"}),e.jsx("option",{value:"PUC",children:"PUC"}),e.jsx("option",{value:"FITNESS",children:"Fitness"}),e.jsx("option",{value:"PERMIT",children:"Permit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",marginBottom:"6px"},children:"Expiry Date"}),e.jsx("input",{type:"date",className:"input-field",value:n.expiry,onChange:t=>k({...n,expiry:t.target.value}),style:{marginBottom:0,height:"42px",fontSize:"13px"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",marginBottom:"6px"},children:"File"}),e.jsx("input",{type:"file",onChange:t=>k({...n,file:t.target.files[0]}),style:{color:"white",fontSize:"11px",marginBottom:0,width:"100%"}})]}),e.jsx("button",{className:"btn-primary",onClick:()=>de(d._id),disabled:H,style:{height:"42px",padding:"0 25px"},children:H?"Saving...":"Upload"})]})]})]})})]})};export{Ce as default};
