import{b as s,j as e,l as ne,m as C,C as I,K as le,O as T,W as oe,H as de,w as pe,Y as ce,Z as xe,M as ge,y as ue,_ as me,$ as he}from"./vendor-WcQB3nuw.js";import{b as fe,i as o}from"./index-DAXa-npc.js";import{S as ye}from"./SEO-C3Q2QzEw.js";const Ce=()=>{const{selectedCompany:n}=fe(),[B,X]=s.useState([]),[be,Z]=s.useState([]),[je,D]=s.useState(!0),[G,d]=s.useState(!1),[W,c]=s.useState(""),[A,x]=s.useState(""),[R,L]=s.useState("All India"),[E,ee]=s.useState([]),[U,g]=s.useState("SUV"),[V,u]=s.useState(""),[$,m]=s.useState(""),[O,h]=s.useState(""),[M,f]=s.useState(""),[F,_]=s.useState(!1),[y,P]=s.useState({rc:null,insurance:null,puc:null,fitness:null,permit:null}),[b,J]=s.useState({rc:"",insurance:"",puc:"",fitness:"",permit:""}),[l,Y]=s.useState(null),[r,j]=s.useState({type:"",file:null,expiry:""}),[H,q]=s.useState(!1),[v,z]=s.useState(null);s.useEffect(()=>{n&&(S(),te(),K())},[n]);const S=async()=>{if(n?._id){D(!0);try{const t=JSON.parse(localStorage.getItem("userInfo"));if(!t)return;const{data:a}=await o.get(`/api/admin/vehicles/${n._id}`,{headers:{Authorization:`Bearer ${t.token}`}});X(a.vehicles||[])}catch(t){console.error(t)}finally{D(!1)}}},te=async()=>{if(n?._id)try{const t=JSON.parse(localStorage.getItem("userInfo"));if(!t)return;const{data:a}=await o.get(`/api/admin/drivers/${n._id}`,{headers:{Authorization:`Bearer ${t.token}`}});Z(a.drivers||[])}catch(t){console.error(t)}},K=async()=>{if(n?._id)try{const t=JSON.parse(localStorage.getItem("userInfo")),{data:a}=await o.get(`/api/admin/dashboard/${n._id}`,{headers:{Authorization:`Bearer ${t.token}`}});ee(a.expiringAlerts||[])}catch(t){console.error(t)}},ae=async t=>{t.preventDefault(),_(!0);try{const a=new FormData;a.append("carNumber",W),a.append("model",A),a.append("permitType",R),a.append("companyId",n._id),a.append("carType",U),a.append("isOutsideCar",!1),a.append("dutyAmount",V||0),a.append("fastagNumber",$),a.append("fastagBalance",O||0),a.append("fastagBank",M),Object.keys(y).forEach(i=>{y[i]&&(a.append(i,y[i]),b[i]&&a.append(`expiry_${i}`,b[i]))}),v?(await o.put(`/api/admin/vehicles/${v}`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),alert("Vehicle updated successfully")):(await o.post("/api/admin/vehicles",a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),alert("Vehicle created successfully")),d(!1),c(""),x(""),g("SUV"),u(""),m(""),h(""),f(""),P({rc:null,insurance:null,puc:null,fitness:null,permit:null}),J({rc:"",insurance:"",puc:"",fitness:"",permit:""}),z(null),S(),K()}catch(a){alert(a.response?.data?.message||"Error creating vehicle")}finally{_(!1)}},ie=async t=>{if(!r.type||!r.file)return alert("Please select document type and file");q(!0);try{const a=new FormData;a.append("documentType",r.type.toUpperCase()),a.append("expiryDate",r.expiry),a.append("document",r.file),await o.post(`/api/admin/vehicles/${t}/documents`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),j({type:"",file:null,expiry:""}),S(),alert("Document uploaded successfully")}catch(a){alert(a.response?.data?.message||"Error uploading document")}finally{q(!1)}},se=async t=>{if(window.confirm("Are you sure you want to delete this vehicle? Driver assignments will be cleared."))try{await o.delete(`/api/admin/vehicles/${t}`,{headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("userInfo")).token}`}}),S()}catch(a){alert(a.response?.data?.message||"Error deleting vehicle")}},[N,re]=s.useState(""),Q=B.filter(t=>!t.isOutsideCar&&(t.carNumber?.toLowerCase().includes(N.toLowerCase())||t.model?.toLowerCase().includes(N.toLowerCase())));return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(ye,{title:"Manage Vehicles",description:"Track and manage all vehicles in your fleet, including document status and assignments."}),E.length>0&&e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#f59e0b",marginBottom:"15px"},children:[e.jsx(ne,{size:18}),e.jsx("h2",{style:{fontSize:"14px",fontWeight:"800",margin:0,textTransform:"uppercase",letterSpacing:"1px"},children:"System Critical Alerts"})]}),e.jsx("div",{className:"scroll-x",style:{display:"flex",gap:"15px",paddingBottom:"10px"},children:E.map((t,a)=>e.jsxs(C.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:a*.1},className:"glass-card",style:{minWidth:"260px",padding:"16px",borderLeft:`4px solid ${t.daysLeft<0?"#f43f5e":t.daysLeft===0?"#0ea5e9":"#f59e0b"}`,background:t.daysLeft<0?"rgba(244, 63, 94, 0.05)":"rgba(245, 158, 11, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"700"},children:t.identifier}),e.jsx("span",{style:{fontSize:"10px",color:"white",padding:"2px 8px",borderRadius:"4px",background:t.daysLeft<0?"#f43f5e":t.daysLeft===0?"#0ea5e9":"#f59e0b",fontWeight:"800",textTransform:"uppercase"},children:t.daysLeft<0?`${Math.abs(t.daysLeft)} Days Ago`:t.daysLeft===0?"Today":`${t.daysLeft} Days Left`})]}),e.jsx("p",{style:{color:"white",fontWeight:"800",margin:"0 0 4px 0",fontSize:"15px"},children:t.documentType}),e.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:["Expires on: ",e.jsx("span",{style:{color:"white"},children:new Date(t.expiryDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]})]},a))})]}),e.jsx("header",{style:{paddingBottom:"30px",borderBottom:"1px solid rgba(255,255,255,0.05)",marginBottom:"30px"},children:e.jsxs("div",{className:"flex-resp",style:{justifyContent:"space-between",alignItems:"center",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"45px",height:"45px",background:"rgba(14, 165, 233, 0.1)",borderRadius:"12px",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(14, 165, 233, 0.2)",color:"var(--primary)"},children:e.jsx(I,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"resp-title",style:{margin:0,fontWeight:"900",letterSpacing:"-0.5px"},children:"Fleet Assets"}),e.jsxs("p",{className:"resp-subtitle",style:{fontSize:"13px",margin:0},children:[B.length," Active vehicles in operation"]})]})]}),e.jsxs("div",{className:"mobile-stack",style:{display:"flex",gap:"12px",alignItems:"center",flex:"1",justifyContent:"flex-end",maxWidth:"600px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{position:"relative",flex:"1",minWidth:"140px"},children:[e.jsx(le,{size:18,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search...",value:N,onChange:t=>re(t.target.value),className:"input-field",style:{paddingLeft:"48px",marginBottom:0,height:"48px",borderRadius:"12px",background:"rgba(255,255,255,0.03)",width:"100%"}})]}),e.jsxs("button",{className:"btn-primary",onClick:()=>{z(null),c(""),x(""),g("SUV"),u(""),m(""),h(""),f(""),d(!0)},style:{height:"48px",padding:"0 15px",borderRadius:"12px",fontWeight:"800",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[e.jsx(T,{size:20})," ",e.jsx("span",{className:"hide-mobile",children:"Add Vehicle"}),e.jsx("span",{className:"show-mobile",children:"Add"})]})]})]})}),e.jsx("div",{className:"grid-1-2-2-3",style:{paddingBottom:"40px"},children:Q.length>0?Q.map((t,a)=>e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},whileHover:{y:-8,boxShadow:"0 12px 24px rgba(0,0,0,0.2)"},className:"glass-card",style:{padding:"24px",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{position:"absolute",top:"-10%",right:"-5%",width:"120px",height:"120px",background:"var(--primary)",filter:"blur(80px)",opacity:.1,zIndex:0}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px",alignItems:"flex-start",position:"relative",zIndex:1},children:[e.jsx("div",{style:{background:"rgba(14, 165, 233, 0.1)",border:"1px solid rgba(14, 165, 233, 0.2)",padding:"12px",borderRadius:"14px",color:"var(--primary)",boxShadow:"0 4px 12px rgba(14, 165, 233, 0.1)"},children:e.jsx(I,{size:24})}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",padding:"6px 12px",borderRadius:"30px",border:"1px solid rgba(255,255,255,0.08)"},children:e.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",letterSpacing:"0.5px"},children:t.carType||"SUV"})}),e.jsx("button",{onClick:()=>{z(t._id),c(t.carNumber),x(t.model),L(t.permitType||"All India"),g(t.carType||"SUV"),u(t.dutyAmount||""),m(t.fastagNumber||""),h(t.fastagBalance||""),f(t.fastagBank||""),d(!0)},style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)",transition:"0.2s"},children:e.jsx(oe,{size:16})}),e.jsx("button",{onClick:()=>se(t._id),style:{background:"rgba(244, 63, 94, 0.05)",color:"#f43f5e",padding:"8px",borderRadius:"10px",border:"1px solid rgba(244, 63, 94, 0.1)",transition:"0.2s"},onMouseEnter:i=>i.currentTarget.style.background="rgba(244, 63, 94, 0.15)",onMouseLeave:i=>i.currentTarget.style.background="rgba(244, 63, 94, 0.05)",children:e.jsx(de,{size:16})})]})]}),e.jsxs("div",{style:{flex:1,position:"relative",zIndex:1},children:[e.jsx("h3",{style:{color:"white",fontSize:"22px",fontWeight:"900",margin:"0 0 4px 0",letterSpacing:"-0.5px"},children:t.carNumber}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",marginBottom:"20px",fontWeight:"500"},children:t.model}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"25px",flexWrap:"wrap"},children:[["RC","PUC","INS"].map(i=>{const p=t.documents?.find(k=>k.documentType===i)||t.documents?.find(k=>k.documentType===(i==="INS"?"INSURANCE":i)),w=p?new Date(p.expiryDate)<new Date:!0;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"10px",fontWeight:"800",padding:"4px 8px",borderRadius:"6px",background:p?w?"rgba(244, 63, 94, 0.1)":"rgba(16, 185, 129, 0.1)":"rgba(255,255,255,0.03)",color:p?w?"#f43f5e":"#10b981":"var(--text-muted)",border:`1px solid ${p?w?"rgba(244, 63, 94, 0.1)":"rgba(16, 185, 129, 0.1)":"rgba(255,255,255,0.05)"}`},children:[p?w?e.jsx(ce,{size:10}):e.jsx(xe,{size:10}):e.jsx(pe,{size:10}),i]},i)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"10px",fontWeight:"800",padding:"4px 8px",borderRadius:"6px",background:"rgba(14, 165, 233, 0.05)",color:"var(--primary)",border:"1px solid rgba(14, 165, 233, 0.1)"},children:[e.jsx(ge,{size:10})," ",t.permitType]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:"16px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:"15px"},children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:t.currentDriver?"#10b981":"#f59e0b"}}),e.jsx("p",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800",letterSpacing:"0.4px",margin:0},children:"Driver"})]}),e.jsx("p",{style:{color:"white",fontSize:"14px",fontWeight:"700",margin:0},children:t.currentDriver?.name||"Available / Yard"})]})}),e.jsx("button",{onClick:()=>Y(t),style:{background:"linear-gradient(135deg, var(--primary), #0284c7)",color:"white",border:"none",padding:"8px 18px",borderRadius:"10px",fontSize:"12px",fontWeight:"800",boxShadow:"0 4px 12px rgba(14, 165, 233, 0.2)",transition:"0.3s"},onMouseEnter:i=>i.currentTarget.style.transform="translateY(-2px)",onMouseLeave:i=>i.currentTarget.style.transform="translateY(0)",children:"Manage"})]}),e.jsxs("div",{style:{display:"flex",borderTop:"1px solid rgba(255,255,255,0.05)",marginTop:"12px",paddingTop:"12px",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ue,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"12px",color:"white",fontWeight:"800"},children:["₹",t.fastagBalance||0]}),e.jsx("span",{style:{fontSize:"9px",color:"var(--text-muted)",marginLeft:"4px"},children:"Fastag"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(me,{size:14,style:{color:"var(--text-muted)"}}),e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"12px",color:"white",fontWeight:"800"},children:["₹",t.dutyAmount||0]}),e.jsx("span",{style:{fontSize:"9px",color:"var(--text-muted)",marginLeft:"4px"},children:"Base Rate"})]})]})]})]})]},t._id)):e.jsxs("div",{className:"glass-card",style:{gridColumn:"1/-1",padding:"80px 20px",textAlign:"center",border:"2px dashed rgba(255,255,255,0.05)",background:"transparent"},children:[e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",width:"90px",height:"90px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto 25px"},children:e.jsx(I,{size:36,style:{color:"var(--text-muted)",opacity:.3}})}),e.jsx("h3",{style:{color:"white",marginBottom:"10px",fontSize:"22px",fontWeight:"800"},children:"No vehicles matched your search"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"30px",maxWidth:"400px",margin:"0 auto 30px",fontSize:"15px"},children:"Check for typos or add a new vehicle if it's missing from the fleet."}),e.jsx("button",{className:"btn-primary",onClick:()=>d(!0),style:{padding:"12px 30px"},children:"Add New Fleet Vehicle"})]})}),G&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"15px"},children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"glass-card modal-content",style:{padding:"25px",width:"100%",maxWidth:"750px",maxHeight:"95vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"700"},children:v?"Edit Vehicle":"Add New Vehicle"}),e.jsx("button",{onClick:()=>d(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%"},children:e.jsx(T,{size:20,style:{transform:"rotate(45deg)"}})})]}),e.jsxs("form",{onSubmit:ae,children:[e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Car Number *"}),e.jsx("input",{className:"input-field",placeholder:"DL-01-AB-1234",value:W,onChange:t=>c(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Model Name *"}),e.jsx("input",{className:"input-field",placeholder:"Toyota Innova",value:A,onChange:t=>x(t.target.value),required:!0})]})]}),e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Permit Category"}),e.jsxs("select",{className:"input-field",value:R,onChange:t=>L(t.target.value),children:[e.jsx("option",{value:"All India",children:"All India (National)"}),e.jsx("option",{value:"State Only",children:"State Only"}),e.jsx("option",{value:"Local",children:"Local Trip"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Car Segment"}),e.jsxs("select",{className:"input-field",value:U,onChange:t=>g(t.target.value),children:[e.jsx("option",{value:"SUV",children:"SUV / MUV"}),e.jsx("option",{value:"Sedan",children:"Sedan"}),e.jsx("option",{value:"Hatchback",children:"Hatchback"}),e.jsx("option",{value:"Other",children:"Luxury / Other"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"20px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Fastag ID"}),e.jsx("input",{className:"input-field",placeholder:"ID Number",value:$,onChange:t=>m(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Fastag Bank"}),e.jsx("input",{className:"input-field",placeholder:"Bank Name",value:M,onChange:t=>f(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Current Bal"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"0.00",value:O,onChange:t=>h(t.target.value)})]})]}),e.jsxs("div",{style:{marginBottom:"25px"},children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Duty / Rental Amount"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"Daily or Fixed Amount",value:V,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.01)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",marginBottom:"30px"},children:[e.jsx("h3",{style:{color:"white",fontSize:"15px",fontWeight:"700",marginBottom:"15px"},children:"Initial Documents (Optional)"}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:["rc","insurance","puc","fitness","permit"].map(t=>e.jsxs("div",{className:"doc-upload-grid",children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:t}),e.jsx("input",{type:"file",onChange:a=>P({...y,[t]:a.target.files[0]}),style:{fontSize:"11px",color:"var(--text-muted)"}}),e.jsx("input",{type:"date",className:"input-field",style:{marginBottom:0,padding:"8px 12px",fontSize:"12px"},value:b[t],onChange:a=>J({...b,[t]:a.target.value})})]},t))})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{type:"button",className:"glass-card",style:{flex:1,padding:"14px",color:"white",fontWeight:"700"},onClick:()=>d(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary",style:{flex:1,padding:"14px"},disabled:F,children:F?"Processing...":v?"Update Vehicle":"Create Vehicle"})]})]})]})}),l&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"15px"},children:e.jsxs(C.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"glass-card modal-content",style:{padding:"25px",width:"100%",maxWidth:"850px",maxHeight:"95vh",overflowY:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"800",margin:0},children:"Documents"}),e.jsx("p",{style:{color:"var(--primary)",fontSize:"13px",margin:0,fontWeight:"600"},children:l.carNumber})]}),e.jsx("button",{onClick:()=>Y(null),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%"},children:e.jsx(T,{size:20,style:{transform:"rotate(45deg)"}})})]}),e.jsxs("div",{className:"grid-responsive",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"20px",marginBottom:"35px"},children:[l.documents?.map((t,a)=>e.jsxs("div",{className:"glass-card",style:{padding:"12px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("p",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",margin:0},children:t.documentType}),e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:new Date(t.expiryDate)<new Date?"rgba(244, 63, 94, 0.1)":"rgba(16, 185, 129, 0.1)",color:new Date(t.expiryDate)<new Date?"#f43f5e":"#10b981",fontWeight:"700"},children:new Date(t.expiryDate)<new Date?"Expired":"Valid"})]}),e.jsxs("div",{className:"img-container",style:{position:"relative",height:"140px",borderRadius:"10px",overflow:"hidden",marginBottom:"10px",cursor:"pointer"},onClick:()=>window.open(t.imageUrl),children:[e.jsx("img",{src:t.imageUrl,style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("div",{className:"img-overlay",style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",opacity:0,transition:"0.3s"},children:e.jsx(he,{size:20,color:"white"})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",paddingTop:"10px",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"600"},children:(()=>{const i=new Date(t.expiryDate)<new Date;return e.jsxs(e.Fragment,{children:["Expires: ",e.jsx("span",{style:{color:i?"#f43f5e":"white",fontWeight:"800"},children:new Date(t.expiryDate).toLocaleDateString("en-IN")})]})})()}),e.jsx("a",{href:`https://wa.me/91${JSON.parse(localStorage.getItem("userInfo"))?.mobile||"9660953135"}?text=${encodeURIComponent(`ALERT: Vehicle ${l.carNumber} document (${t.documentType}) is expiring on ${new Date(t.expiryDate).toLocaleDateString()}. Please take action.`)}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#25D366",background:"rgba(37, 211, 102, 0.1)",padding:"6px",borderRadius:"8px",fontSize:"14px",textDecoration:"none"},title:"Send WhatsApp Reminder",children:"WA"})]})]},a)),(!l.documents||l.documents.length===0)&&e.jsx("div",{style:{gridColumn:"1/-1",padding:"40px",border:"1px dashed rgba(255,255,255,0.1)",borderRadius:"16px",textAlign:"center"},children:e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",margin:0},children:"No documents uploaded for this vehicle."})})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:"25px"},children:[e.jsx("h3",{style:{color:"white",fontSize:"16px",fontWeight:"700",marginBottom:"15px"},children:"Quick Upload"}),e.jsxs("div",{className:"quick-upload-grid",children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",marginBottom:"6px"},children:"Type"}),e.jsxs("select",{className:"input-field",value:r.type,onChange:t=>j({...r,type:t.target.value}),style:{marginBottom:0,height:"42px",fontSize:"13px",fontWeight:"600"},children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"RC",children:"RC"}),e.jsx("option",{value:"INSURANCE",children:"Insurance"}),e.jsx("option",{value:"PUC",children:"PUC"}),e.jsx("option",{value:"FITNESS",children:"Fitness"}),e.jsx("option",{value:"PERMIT",children:"Permit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",marginBottom:"6px"},children:"Expiry Date"}),e.jsx("input",{type:"date",className:"input-field",value:r.expiry,onChange:t=>j({...r,expiry:t.target.value}),style:{marginBottom:0,height:"42px",fontSize:"13px"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("label",{style:{display:"block",fontSize:"10px",color:"var(--text-muted)",fontWeight:"800",textTransform:"uppercase",marginBottom:"6px"},children:"File"}),e.jsx("input",{type:"file",onChange:t=>j({...r,file:t.target.files[0]}),style:{color:"white",fontSize:"11px",marginBottom:0,width:"100%"}})]}),e.jsx("button",{className:"btn-primary",onClick:()=>ie(l._id),disabled:H,style:{height:"42px",padding:"0 25px"},children:H?"Saving...":"Upload"})]})]})]})})]})};export{Ce as default};
