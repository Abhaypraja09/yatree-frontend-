import{b as n,j as e,E as te,a2 as ie,G as B,m as c,F as y,D as re,T as ae,a4 as se,c as ne,Z as le,H as F,O as oe,a6 as _,y as E,A as de}from"./vendor-BGTqS4rJ.js";import{b as ce,i as x}from"./index-Er7Oys5t.js";import{u as v,w as pe}from"./excel-D720nv8R.js";import{S as xe}from"./SEO-BFqQ8ztt.js";const je=()=>{const{selectedCompany:d}=ce(),[M,P]=n.useState([]),[S,q]=n.useState([]),[w,O]=n.useState([]),[k,z]=n.useState(!0),[$,g]=n.useState(!1),[ge,K]=n.useState(!1),[he,ue]=n.useState(null),[h,V]=n.useState(""),[b,J]=n.useState("All"),[p,N]=n.useState({from:new Date(Date.now()-4320*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]}),[r,l]=n.useState({vehicleId:"",fuelType:"Diesel",date:new Date().toISOString().split("T")[0],amount:"",quantity:"",rate:"",odometer:"",stationName:"",paymentMode:"Cash",driver:""}),[I,C]=n.useState(!1),[u,T]=n.useState(null);n.useEffect(()=>{d&&(f(),W(),U())},[d,p]);const W=async()=>{if(d?._id)try{const t=localStorage.getItem("userInfo"),i=t?JSON.parse(t):null;if(!i?.token)return;const{data:a}=await x.get(`/api/admin/fuel/pending/${d._id}`,{headers:{Authorization:`Bearer ${i.token}`}});O(a||[])}catch(t){console.error(t)}},f=async()=>{if(d?._id){z(!0);try{const t=localStorage.getItem("userInfo"),i=t?JSON.parse(t):null;if(!i?.token)return;const{data:a}=await x.get(`/api/admin/fuel/${d._id}?from=${p.from}&to=${p.to}`,{headers:{Authorization:`Bearer ${i.token}`}});P(a||[])}catch(t){console.error(t)}finally{z(!1)}}},U=async()=>{if(d?._id)try{const t=localStorage.getItem("userInfo"),i=t?JSON.parse(t):null;if(!i?.token)return;const{data:a}=await x.get(`/api/admin/vehicles/${d._id}?usePagination=false&type=fleet`,{headers:{Authorization:`Bearer ${i.token}`}});q(a.vehicles||[])}catch(t){console.error(t)}},G=async t=>{t.preventDefault(),C(!0);try{const i=localStorage.getItem("userInfo"),a=i?JSON.parse(i):null;if(!a?.token)return;u?(await x.put(`/api/admin/fuel/${u}`,{...r,companyId:d._id},{headers:{Authorization:`Bearer ${a.token}`}}),alert("Fuel entry updated successfully")):(await x.post("/api/admin/fuel",{...r,companyId:d._id},{headers:{Authorization:`Bearer ${a.token}`}}),alert("Fuel entry added successfully")),g(!1),j(),f()}catch(i){console.error(i),alert(i.response?.data?.message||"Error saving entry")}finally{C(!1)}},A=t=>{T(t._id),l({vehicleId:t.vehicle?._id||"",fuelType:t.fuelType,date:new Date(t.date).toISOString().split("T")[0],amount:t.amount,quantity:t.quantity,rate:t.rate,odometer:t.odometer,stationName:t.stationName||"",paymentMode:t.paymentMode||"Cash",driver:t.driver||""}),g(!0)},D=async t=>{if(window.confirm("Are you sure you want to delete this entry?"))try{const i=localStorage.getItem("userInfo"),a=i?JSON.parse(i):null;if(!a?.token)return;await x.delete(`/api/admin/fuel/${t}`,{headers:{Authorization:`Bearer ${a.token}`}}),f()}catch(i){console.error(i)}},L=async(t,i,a,s={})=>{try{const m=localStorage.getItem("userInfo"),R=m?JSON.parse(m):null;if(!R?.token)return;await x.patch(`/api/admin/attendance/${t}/expense/${i}`,{status:a,...s},{headers:{Authorization:`Bearer ${R.token}`}}),W(),f(),K(!1),j()}catch(m){console.error(m),alert("Error processing request")}},j=()=>{T(null),l({vehicleId:"",fuelType:"Diesel",date:new Date().toISOString().split("T")[0],amount:"",quantity:"",rate:"",odometer:"",stationName:"",paymentMode:"Cash",driver:""})},H=()=>{const t=o.map(s=>({Date:new Date(s.date).toLocaleDateString("en-IN"),Vehicle:s.vehicle?.carNumber||"N/A","Fuel Type":s.fuelType,"Quantity (L)":s.quantity,"Rate (₹/L)":s.rate,"Amount (₹)":s.amount,"Odometer (KM)":s.odometer,"Distance (KM)":s.distance||0,"Mileage (KM/L)":s.mileage||0,"Payment Mode":s.paymentMode,Station:s.stationName||"N/A",Driver:s.driver||"N/A",Source:s.source||"Admin"})),i=v.json_to_sheet(t),a=v.book_new();v.book_append_sheet(a,i,"Fuel Logs"),pe(a,`Fuel_Report_${d?.name}_${new Date().toISOString().split("T")[0]}.xlsx`)};n.useEffect(()=>{if(r.amount&&r.quantity){const t=(Number(r.amount)/Number(r.quantity)).toFixed(2);r.rate!==t&&l(i=>({...i,rate:t}))}},[r.amount,r.quantity]);const o=M.filter(t=>{const i=t.vehicle?.carNumber?.toLowerCase()?.includes(h.toLowerCase())||t.stationName?.toLowerCase()?.includes(h.toLowerCase())||t.driver?.toLowerCase()?.includes(h.toLowerCase()),a=b==="All"||t.vehicle?._id===b;return i&&a}),Q=o.reduce((t,i)=>t+(Number(i.amount)||0),0),X=o.reduce((t,i)=>t+(Number(i.quantity)||0),0),Y=o.filter(t=>t.mileage>0).length>0?(o.filter(t=>t.mileage>0).reduce((t,i)=>t+i.mileage,0)/o.filter(t=>t.mileage>0).length).toFixed(2):0,Z=o.filter(t=>t.fuelType==="Petrol").reduce((t,i)=>t+(Number(i.amount)||0),0),ee=o.filter(t=>t.fuelType==="Diesel").reduce((t,i)=>t+(Number(i.amount)||0),0);return e.jsxs("div",{className:"container-fluid",style:{paddingBottom:"40px"},children:[e.jsx(xe,{title:"Fuel Management",description:"Track fuel entries, mileage, and costs for your entire fleet."}),e.jsxs("header",{className:"flex-resp",style:{justifyContent:"space-between",padding:"40px 0",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f59e0b",boxShadow:"0 0 10px #f59e0b"}}),e.jsx("span",{style:{fontSize:"11px",fontWeight:"900",color:"rgba(255,255,255,0.4)",letterSpacing:"2px",textTransform:"uppercase"},children:"Expense Tracking"})]}),e.jsxs("h1",{className:"resp-title",style:{color:"white",margin:0,letterSpacing:"-1px"},children:["Fuel ",e.jsx("span",{className:"text-gradient-orange",children:"Management"})]})]}),e.jsxs("div",{className:"flex-resp",style:{gap:"15px",flex:"1",justifyContent:"flex-end",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap",flex:"1 1 auto",justifyContent:"flex-end"},children:[e.jsx("input",{type:"date",className:"input-field",style:{height:"52px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",width:"auto",minWidth:"130px",flex:"1 1 130px"},value:p.from,onChange:t=>N({...p,from:t.target.value})}),e.jsx("input",{type:"date",className:"input-field",style:{height:"52px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",width:"auto",minWidth:"130px",flex:"1 1 130px"},value:p.to,onChange:t=>N({...p,to:t.target.value})})]}),e.jsxs("div",{className:"glass-card",style:{padding:"0",display:"flex",alignItems:"center",maxWidth:"300px",width:"100%",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.08)",flex:"1 1 200px"},children:[e.jsx(te,{size:18,style:{margin:"0 15px",color:"rgba(255,255,255,0.4)",flexShrink:0}}),e.jsx("input",{type:"text",placeholder:"Search fuel...",value:h,onChange:t=>V(t.target.value),style:{background:"transparent",border:"none",color:"white",height:"50px",width:"100%",outline:"none",fontSize:"14px",minWidth:0}})]}),e.jsxs("button",{className:"btn-primary",onClick:H,style:{display:"flex",alignItems:"center",gap:"8px",height:"52px",padding:"0 20px",borderRadius:"14px",fontWeight:"800",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",border:"1px solid rgba(16, 185, 129, 0.2)",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx(ie,{size:18})," ",e.jsx("span",{className:"hide-mobile",children:"Export Excel"}),e.jsx("span",{className:"show-mobile",children:"Excel"})]}),e.jsxs("button",{className:"btn-primary",onClick:()=>{j(),g(!0)},style:{display:"flex",alignItems:"center",gap:"10px",height:"52px",padding:"0 25px",borderRadius:"14px",fontWeight:"800",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx(B,{size:20})," ",e.jsx("span",{className:"hide-mobile",children:"Add Entry"}),e.jsx("span",{className:"show-mobile",children:"Add"})]})]})]}),w.length>0&&e.jsxs("div",{style:{marginBottom:"40px"},children:[e.jsxs("h3",{style:{color:"white",fontSize:"18px",fontWeight:"800",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f43f5e",boxShadow:"0 0 10px #f43f5e"}}),"Driver Approvals (Awaiting)"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:w.map(t=>e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"20px",borderLeft:"4px solid #f43f5e",background:"rgba(244, 63, 94, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.slipPhoto?e.jsx("img",{src:t.slipPhoto,onClick:()=>window.open(t.slipPhoto,"_blank"),style:{width:"50px",height:"50px",borderRadius:"10px",objectFit:"cover",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"}}):e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(y,{size:20,color:"var(--text-muted)"})}),e.jsxs("div",{children:[e.jsxs("p",{style:{color:"white",fontWeight:"800",fontSize:"16px",margin:0},children:["₹",t.amount]}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"12px",margin:"4px 0 0"},children:[t.driver," • ",t.carNumber]})]})]}),e.jsx("span",{style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",fontSize:"10px",padding:"4px 8px",borderRadius:"6px",fontWeight:"800",textTransform:"uppercase"},children:"Pending"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",color:"rgba(255,255,255,0.6)",marginBottom:"15px",background:"rgba(0,0,0,0.2)",padding:"10px",borderRadius:"8px"},children:[e.jsxs("span",{children:[t.km," KM Reading"]}),e.jsx("span",{children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[e.jsx("button",{onClick:()=>L(t.attendanceId,t._id,"approved"),style:{background:"#10b981",color:"white",border:"none",padding:"10px",borderRadius:"8px",fontWeight:"800",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",gap:"6px"},children:"Approve"}),e.jsx("button",{onClick:()=>L(t.attendanceId,t._id,"rejected"),style:{background:"rgba(255,255,255,0.05)",color:"#f43f5e",border:"1px solid rgba(244, 63, 94, 0.3)",padding:"10px",borderRadius:"8px",fontWeight:"800",cursor:"pointer"},children:"Reject"})]})]},t._id))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",borderLeft:"4px solid #f59e0b"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(245, 158, 11, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#f59e0b"},children:e.jsx(y,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Total Fuel Cost"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:["₹",Q.toLocaleString()]}),e.jsxs("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:["P: ₹",Z.toLocaleString()," | D: ₹",ee.toLocaleString()]})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",borderLeft:"4px solid #0ea5e9"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(14, 165, 233, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#0ea5e9"},children:e.jsx(re,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Total Liters"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:[X.toFixed(2)," L"]}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:"Combined usage"})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px",borderLeft:"4px solid #10b981"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(16, 185, 129, 0.1)",display:"flex",justifyContent:"center",alignItems:"center",color:"#10b981"},children:e.jsx(ae,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"4px"},children:"Avg. Mileage"}),e.jsxs("h2",{style:{color:"white",fontSize:"28px",fontWeight:"900",margin:0},children:[Y," KM/L"]}),e.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)"},children:"Overall efficiency"})]})]}),e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card",style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px"},children:[e.jsx("div",{style:{width:"54px",height:"54px",borderRadius:"16px",background:"rgba(255, 255, 255, 0.05)",display:"flex",justifyContent:"center",alignItems:"center",color:"rgba(255,255,255,0.6)"},children:e.jsx(se,{size:24})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px"},children:"Vehicle Filter"}),e.jsxs("select",{className:"input-field",style:{background:"transparent",border:"none",color:"white",padding:0,height:"auto",fontWeight:"700"},value:b,onChange:t=>J(t.target.value),children:[e.jsx("option",{value:"All",style:{background:"#1e293b"},children:"All Vehicles"}),S.map(t=>e.jsx("option",{value:t._id,style:{background:"#1e293b"},children:t.carNumber},t._id))]})]})]})]}),e.jsx("div",{className:"glass-card",style:{padding:"0",overflow:"hidden",border:"1px solid rgba(255,255,255,0.05)"},children:k?e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx("div",{className:"spinner",style:{margin:"0 auto"}}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"20px"},children:"Loading fuel logs..."})]}):o.length===0?e.jsxs("div",{style:{padding:"100px",textAlign:"center"},children:[e.jsx(y,{size:48,style:{color:"rgba(255,255,255,0.1)",marginBottom:"20px"}}),e.jsx("h3",{style:{color:"white"},children:"No fuel records found"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Create your first fuel entry to start tracking."})]}):e.jsx("div",{className:"hide-mobile",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"left",background:"rgba(255,255,255,0.02)"},children:[e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Date & Vehicle"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Fuel Details"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Odometer & Trip"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Efficiency"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase"},children:"Total Amount"}),e.jsx("th",{style:{padding:"20px 25px",color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:o.map((t,i)=>e.jsxs(c.tr,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.05},style:{borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsx("div",{style:{color:"white",fontWeight:"800",fontSize:"14px"},children:new Date(t.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:[e.jsx(ne,{size:12,style:{color:"#f59e0b"}}),e.jsx("span",{style:{fontSize:"13px",color:"rgba(255,255,255,0.6)",fontWeight:"700"},children:t.vehicle?.carNumber})]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:t.fuelType==="Diesel"?"rgba(245, 158, 11, 0.1)":"rgba(14, 165, 233, 0.1)",color:t.fuelType==="Diesel"?"#f59e0b":"#0ea5e9",fontWeight:"800",textTransform:"uppercase"},children:t.fuelType}),e.jsxs("span",{style:{fontSize:"13px",color:"white",fontWeight:"600"},children:[t.quantity," L"]})]}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",marginTop:"4px"},children:["@ ₹",t.rate,"/L • ",t.stationName||"Local Station"]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{color:"white",fontWeight:"700",fontSize:"14px"},children:[t.odometer.toLocaleString()," KM"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"11px",color:"#10b981",marginTop:"4px",fontWeight:"600"},children:[e.jsx(le,{size:12}),t.distance||0," KM Driven"]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{color:t.mileage>12?"#10b981":"#f59e0b",fontWeight:"800",fontSize:"16px"},children:[t.mileage||0," ",e.jsx("span",{style:{fontSize:"10px"},children:"KM/L"})]}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:["₹",t.costPerKm||0,"/KM cost"]})]}),e.jsxs("td",{style:{padding:"20px 25px"},children:[e.jsxs("div",{style:{color:"white",fontWeight:"800",fontSize:"16px"},children:["₹",t.amount.toLocaleString()]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",color:"rgba(255,255,255,0.4)",marginTop:"2px"},children:[t.source==="Driver"?e.jsx(F,{size:10,color:"#0ea5e9"}):e.jsx(oe,{size:10,color:"#f59e0b"}),t.source==="Driver"?"Driver App":"Administrator"]}),e.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.3)",marginTop:"2px"},children:["By: ",t.driver]})]}),e.jsx("td",{style:{padding:"20px 25px",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>A(t),className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(_,{size:16})}),e.jsx("button",{onClick:()=>D(t._id),className:"glass-card-hover-effect",style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",border:"none",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(E,{size:16})})]})})]},t._id))})]})})}),e.jsx("div",{className:"show-mobile",children:k?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px"},children:e.jsx("div",{className:"spinner"})}):o.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)",background:"rgba(255,255,255,0.02)",borderRadius:"16px"},children:[e.jsx(y,{size:40,style:{opacity:.2,marginBottom:"10px"}}),e.jsx("p",{children:"No fuel records found."})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:o.map(t=>e.jsxs(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-card",style:{padding:"16px",background:"rgba(30, 41, 59, 0.4)",borderRadius:"14px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"900",fontSize:"18px",letterSpacing:"0.5px"},children:t.vehicle?.carNumber}),e.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"600"},children:new Date(t.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#f59e0b",fontWeight:"900",fontSize:"18px"},children:["₹",t.amount.toLocaleString()]}),e.jsxs("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:[t.quantity," L @ ₹",t.rate,"/L"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"12px",padding:"10px",background:"rgba(0,0,0,0.2)",borderRadius:"10px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800"},children:"Odometer"}),e.jsxs("div",{style:{color:"white",fontSize:"13px",fontWeight:"700"},children:[t.odometer.toLocaleString()," KM"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",textTransform:"uppercase",fontWeight:"800"},children:"Efficiency"}),e.jsxs("div",{style:{color:t.mileage>12?"#10b981":"#f59e0b",fontSize:"13px",fontWeight:"700"},children:[t.mileage||0," KM/L"]})]})]}),e.jsx("div",{style:{marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",borderRadius:"4px",background:t.fuelType==="Diesel"?"rgba(245, 158, 11, 0.1)":"rgba(14, 165, 233, 0.1)",color:t.fuelType==="Diesel"?"#f59e0b":"#0ea5e9",fontWeight:"800",textTransform:"uppercase"},children:t.fuelType}),e.jsxs("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)"},children:["• ",t.stationName||"Local Station"]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingTop:"10px",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(F,{size:12,color:"white"})}),e.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.8)",fontWeight:"600"},children:t.driver})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>A(t),style:{background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",padding:"8px",borderRadius:"8px",border:"1px solid rgba(14, 165, 233, 0.2)"},children:e.jsx(_,{size:14})}),e.jsx("button",{onClick:()=>D(t._id),style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",padding:"8px",borderRadius:"8px",border:"1px solid rgba(244, 63, 94, 0.2)"},children:e.jsx(E,{size:14})})]})]})]},t._id))})}),e.jsx(de,{children:$&&e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(10px)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},children:e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass-card",style:{padding:"0",width:"100%",maxWidth:"700px",maxHeight:"90vh",overflowY:"auto",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{padding:"25px",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"white",fontSize:"20px",fontWeight:"800",margin:0},children:u?"Edit Fuel Entry":"Add Fuel Entry"}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"13px",margin:"4px 0 0"},children:"Log petrol/diesel refill and calculate mileage."})]}),e.jsx("button",{onClick:()=>g(!1),style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"8px",borderRadius:"50%",cursor:"pointer",border:"none"},children:e.jsx(B,{size:20,style:{transform:"rotate(45deg)"}})})]}),e.jsxs("form",{onSubmit:G,style:{padding:"30px"},children:[e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Vehicle Number *"}),e.jsxs("select",{className:"input-field",value:r.vehicleId,required:!0,onChange:t=>l({...r,vehicleId:t.target.value}),children:[e.jsx("option",{value:"",style:{background:"#1e293b"},children:"-- Select Car --"}),S.map(t=>e.jsxs("option",{value:t._id,style:{background:"#1e293b"},children:[t.carNumber," (",t.model,")"]},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"var(--text-muted)",fontSize:"11px",fontWeight:"800",textTransform:"uppercase",marginBottom:"8px",display:"block"},children:"Fuel Type"}),e.jsx("div",{style:{display:"flex",gap:"10px"},children:["Diesel","Petrol","CNG"].map(t=>e.jsx("button",{type:"button",onClick:()=>l({...r,fuelType:t}),style:{flex:1,height:"45px",borderRadius:"10px",border:"1px solid rgba(255,255,255,0.1)",background:r.fuelType===t?t==="Diesel"?"#f59e0b":"#0ea5e9":"rgba(255,255,255,0.05)",color:r.fuelType===t?"black":"white",fontWeight:"800",cursor:"pointer",transition:"all 0.2s"},children:t},t))})]})]}),e.jsxs("div",{className:"form-grid-3",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Date"}),e.jsx("input",{type:"date",className:"input-field",value:r.date,onChange:t=>l({...r,date:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Amount (₹) *"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"e.g. 5000",value:r.amount,onChange:t=>l({...r,amount:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Quantity (L) *"}),e.jsx("input",{type:"number",step:"0.01",className:"input-field",placeholder:"e.g. 50",value:r.quantity,onChange:t=>l({...r,quantity:t.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-grid-3",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Rate (₹/L)"}),e.jsx("input",{type:"number",step:"0.01",className:"input-field",value:r.rate,onChange:t=>l({...r,rate:t.target.value}),placeholder:"Auto-calculated"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Odometer (KM) *"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"Current Reading",value:r.odometer,onChange:t=>l({...r,odometer:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Payment Mode"}),e.jsxs("select",{className:"input-field",value:r.paymentMode,onChange:t=>l({...r,paymentMode:t.target.value}),children:[e.jsx("option",{value:"Cash",style:{background:"#1e293b"},children:"Cash"}),e.jsx("option",{value:"UPI",style:{background:"#1e293b"},children:"UPI / GPay"}),e.jsx("option",{value:"FASTag",style:{background:"#1e293b"},children:"FASTag"}),e.jsx("option",{value:"Card",style:{background:"#1e293b"},children:"Card"})]})]})]}),e.jsxs("div",{className:"form-grid-2",children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Fuel Station Name"}),e.jsx("input",{className:"input-field",placeholder:"e.g. HP Petrol Pump",value:r.stationName,onChange:t=>l({...r,stationName:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",fontSize:"12px",marginBottom:"8px",display:"block"},children:"Driver Name / ID *"}),e.jsx("input",{className:"input-field",placeholder:"Who fueled the car?",value:r.driver,onChange:t=>l({...r,driver:t.target.value}),required:!0})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px"},children:[e.jsx("button",{type:"submit",disabled:I,className:"btn-primary",style:{flex:2,height:"60px",borderRadius:"16px",fontSize:"16px",fontWeight:"900",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",border:"none"},children:I?"Saving...":u?"Update Entry":"Save Fuel Entry"}),e.jsx("button",{type:"button",onClick:()=>g(!1),style:{flex:1,background:"rgba(255,255,255,0.05)",color:"white",border:"none",borderRadius:"16px",fontWeight:"700",cursor:"pointer"},children:"Cancel"})]})]})]})})})]})};export{je as default};
