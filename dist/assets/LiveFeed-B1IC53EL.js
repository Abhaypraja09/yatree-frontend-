import{b as g,j as e,A as P,o as $,p as M,q as K,U as T,ai as U,F as v,s as _,m as I,X as C,x as q}from"./vendor-CCQY6jT8.js";import{u as V,b as J,i as y}from"./index-DswTxbm0.js";import{S as H}from"./SEO-CjuU2MAi.js";const Y=({item:r,onClose:l,onUpdate:p,vehicles:s,drivers:u})=>{const[i,o]=g.useState({vehicleId:r.vehicle?._id||"",driverId:r.driver?._id||"",startKm:r.punchIn?.km||"",status:r.status||"active",remarks:r.punchOut?.remarks||""}),[f,d]=g.useState(!1),b=async n=>{n.preventDefault(),d(!0);try{await p(r._id,i),l()}catch(j){console.error(j),alert("Failed to update attendance")}finally{d(!1)}};return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.8)",backdropFilter:"blur(5px)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"15px"},children:e.jsxs(I.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"glass-card",style:{width:"100%",maxWidth:"500px",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",padding:"0"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{color:"white",margin:0,fontSize:"18px",fontWeight:"700"},children:"Edit Active Log"}),e.jsx("button",{onClick:l,style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.5)",cursor:"pointer"},children:e.jsx(C,{size:20})})]}),e.jsxs("form",{onSubmit:b,style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px"},children:"Vehicle"}),e.jsx("select",{className:"input-field",value:i.vehicleId,onChange:n=>o({...i,vehicleId:n.target.value}),style:{background:"#1e293b"},children:s?.map(n=>e.jsxs("option",{value:n._id,children:[n.carNumber," (",n.model,")"]},n._id))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px"},children:"Start KM"}),e.jsx("input",{type:"number",className:"input-field",value:i.startKm,onChange:n=>o({...i,startKm:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px"},children:"Status"}),e.jsxs("select",{className:"input-field",value:i.status,onChange:n=>o({...i,status:n.target.value}),style:{background:"#1e293b"},children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"11px",fontWeight:"700",textTransform:"uppercase",marginBottom:"8px"},children:"Remarks / Destination"}),e.jsx("textarea",{className:"input-field",value:i.remarks,onChange:n=>o({...i,remarks:n.target.value}),rows:3})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{type:"button",onClick:l,style:{flex:1,padding:"12px",borderRadius:"10px",background:"rgba(255,255,255,0.05)",color:"white",border:"none",fontWeight:"700",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"btn-primary",style:{flex:1,padding:"12px",borderRadius:"10px",fontWeight:"700",cursor:"pointer"},children:f?"Updating...":"Save Changes"})]})]})]})})},G=({item:r,onClose:l,onSuccess:p})=>{const[s,u]=g.useState({amount:"",odometer:r.vehicle?.lastOdometer||"",quantity:"",fuelType:"Diesel",paymentSource:"Yatree Office"}),[i,o]=g.useState(!1),f=async d=>{d.preventDefault(),o(!0);try{const b=localStorage.getItem("userInfo"),n=JSON.parse(b);await y.post("/api/admin/fuel",{...s,vehicleId:r.vehicle?._id,companyId:r.company,driver:r.driver?.name,date:new Date},{headers:{Authorization:`Bearer ${n.token}`}}),await y.put(`/api/admin/attendance/${r._id}`,{fuel:{filled:!0,amount:(r.fuel?.amount||0)+Number(s.amount),entries:[...r.fuel?.entries||[],{amount:Number(s.amount),km:Number(s.odometer),fuelType:s.fuelType,paymentSource:s.paymentSource}]}},{headers:{Authorization:`Bearer ${n.token}`}}),p()}catch(b){console.error(b),alert("Failed to record fuel")}finally{o(!1)}};return e.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(10px)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"15px"},children:e.jsxs(I.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"glass-card",style:{width:"100%",maxWidth:"450px",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",padding:"25px",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{color:"white",margin:0,fontSize:"18px",fontWeight:"900"},children:"RECORD FUEL"}),e.jsxs("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",margin:"4px 0 0 0",fontWeight:"700"},children:["V: ",r.vehicle?.carNumber," | D: ",r.driver?.name]})]}),e.jsx("button",{onClick:l,style:{background:"rgba(255,255,255,0.05)",border:"none",color:"white",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{size:18})})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",marginBottom:"8px",letterSpacing:"1px"},children:"Amount (₹)"}),e.jsx("input",{type:"number",required:!0,className:"input-field",value:s.amount,onChange:d=>u({...s,amount:d.target.value}),placeholder:"e.g. 2000",style:{background:"#1e293b"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",marginBottom:"8px",letterSpacing:"1px"},children:"Odometer (KM)"}),e.jsx("input",{type:"number",required:!0,className:"input-field",value:s.odometer,onChange:d=>u({...s,odometer:d.target.value}),placeholder:"Current KM",style:{background:"#1e293b"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",marginBottom:"8px",letterSpacing:"1px"},children:"Quantity (Ltrs)"}),e.jsx("input",{type:"number",step:"0.01",required:!0,className:"input-field",value:s.quantity,onChange:d=>u({...s,quantity:d.target.value}),placeholder:"Liters filled",style:{background:"#1e293b"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",color:"var(--text-muted)",fontSize:"10px",fontWeight:"900",textTransform:"uppercase",marginBottom:"8px",letterSpacing:"1px"},children:"Fuel Type"}),e.jsxs("select",{className:"input-field",value:s.fuelType,onChange:d=>u({...s,fuelType:d.target.value}),style:{background:"#1e293b"},children:[e.jsx("option",{value:"Diesel",children:"Diesel"}),e.jsx("option",{value:"Petrol",children:"Petrol"}),e.jsx("option",{value:"CNG",children:"CNG"})]})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"btn-primary",style:{width:"100%",padding:"14px",borderRadius:"12px",fontWeight:"900",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:i?"Processing...":e.jsxs(e.Fragment,{children:[e.jsx(v,{size:18})," SAVE FUEL ENTRY"]})})]})]})})},Q=({item:r,onClose:l,onApproveReject:p})=>e.jsx("div",{className:"modal-overlay",onClick:l,style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",backdropFilter:"blur(10px)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"15px"},children:e.jsxs(I.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"glass-card",style:{width:"100%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",background:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"24px",padding:"25px"},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsx("h2",{style:{color:"white",margin:0,fontSize:"20px",fontWeight:"900"},children:"Duty Session Details"}),e.jsx("button",{onClick:l,style:{background:"rgba(255,255,255,0.05)",border:"none",color:"white",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{size:18})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px"},children:[e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"20px",borderRadius:"16px",border:"1px solid rgba(16, 185, 129, 0.1)"},children:[e.jsx("h3",{style:{color:"#10b981",margin:"0 0 15px 0",fontSize:"14px",fontWeight:"900",textTransform:"uppercase"},children:"Duty Started"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"9px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"SELFIE"}),e.jsx("img",{src:r.punchIn?.selfie,alt:"Start Selfie",style:{width:"100%",aspectRatio:"1",borderRadius:"12px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(r.punchIn?.selfie)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"9px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"KM METER"}),e.jsx("img",{src:r.punchIn?.kmPhoto,alt:"KM Photo",style:{width:"100%",aspectRatio:"1",borderRadius:"12px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(r.punchIn?.kmPhoto)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"9px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"CAR PHOTO"}),e.jsx("img",{src:r.punchIn?.carSelfie,alt:"Car Selfie",style:{width:"100%",aspectRatio:"1",borderRadius:"12px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(r.punchIn?.carSelfie)})]})]})]}),e.jsxs("div",{style:{background:r.punchOut?.time?"rgba(244, 63, 94, 0.05)":"rgba(255,255,255,0.03)",padding:"20px",borderRadius:"16px",border:`1px solid ${r.punchOut?.time?"rgba(244, 63, 94, 0.1)":"rgba(255,255,255,0.05)"}`},children:[e.jsx("h3",{style:{color:r.punchOut?.time?"#f43f5e":"rgba(255,255,255,0.4)",margin:"0 0 15px 0",fontSize:"14px",fontWeight:"900",textTransform:"uppercase"},children:"Duty Ended"}),r.punchOut?.time?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"9px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"SELFIE"}),e.jsx("img",{src:r.punchOut?.selfie,alt:"End Selfie",style:{width:"100%",aspectRatio:"1",borderRadius:"12px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(r.punchOut?.selfie)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"9px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"KM METER"}),e.jsx("img",{src:r.punchOut?.kmPhoto,alt:"KM Photo",style:{width:"100%",aspectRatio:"1",borderRadius:"12px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(r.punchOut?.kmPhoto)})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{fontSize:"9px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"CAR PHOTO"}),e.jsx("img",{src:r.punchOut?.carSelfie,alt:"Car Selfie",style:{width:"100%",aspectRatio:"1",borderRadius:"12px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(r.punchOut?.carSelfie)})]})]}):e.jsxs("div",{style:{height:"100px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"rgba(255,255,255,0.2)"},children:[e.jsx(q,{size:24}),e.jsx("p",{style:{fontSize:"11px",marginTop:"10px",fontWeight:"600"},children:"Active on trip..."})]})]})]}),e.jsxs("div",{style:{marginTop:"25px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[e.jsxs("div",{className:"glass-card",style:{padding:"15px",background:"rgba(255,255,255,0.02)"},children:[e.jsx("p",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"FUEL RECORDED"}),e.jsxs("h4",{style:{color:"white",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(v,{size:18,fill:"#f43f5e",color:"#f43f5e"}),"₹",(()=>{const s=r.fuel?.amount||0,u=r.pendingExpenses?.filter(i=>i.type==="fuel"&&i.status==="pending").reduce((i,o)=>i+(o.amount||0),0)||0;return s+u})()]})]}),e.jsxs("div",{className:"glass-card",style:{padding:"15px",background:"rgba(255,255,255,0.02)"},children:[e.jsx("p",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"TOTAL DISTANCE"}),e.jsxs("h4",{style:{color:"white",margin:0},children:[r.totalKM||0," KM"]})]}),e.jsxs("div",{className:"glass-card",style:{padding:"15px",background:"rgba(255,255,255,0.02)"},children:[e.jsx("p",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"900",marginBottom:"8px"},children:"TOLLS & PARKING"}),e.jsxs("h4",{style:{color:"#10b981",margin:0},children:["₹",r.punchOut?.tollParkingAmount||0]})]})]}),r.punchOut?.remarks&&e.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(16, 185, 129, 0.03)",border:"1px solid rgba(16, 185, 129, 0.1)",borderRadius:"12px"},children:[e.jsx("p",{style:{fontSize:"10px",color:"#10b981",fontWeight:"900",marginBottom:"8px"},children:"REMARKS / DESTINATION"}),e.jsx("p",{style:{color:"white",fontSize:"14px",margin:0,fontWeight:"600"},children:r.punchOut.remarks})]})]})}),te=()=>{const{user:r}=V(),{selectedCompany:l,selectedDate:p,setSelectedDate:s}=J(),[u,i]=g.useState(null),o=g.useRef(null),f=()=>{const t=new Date,c=t.getTimezoneOffset();return new Date(t.getTime()-c*60*1e3).toISOString().split("T")[0]},d=t=>new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),[b,n]=g.useState(!0),[j,S]=g.useState(null),[z,k]=g.useState(null),[R,D]=g.useState(null),[W,N]=g.useState([]),[F,A]=g.useState([]),m=async()=>{if(l){n(!0);try{const t=localStorage.getItem("userInfo"),c=JSON.parse(t),{data:h}=await y.get(`/api/admin/dashboard/${l._id}?date=${p}`,{headers:{Authorization:`Bearer ${c.token}`}});i(h)}catch(t){console.error("Error fetching feed",t)}finally{n(!1)}}},E=async()=>{if(l?._id)try{const t=localStorage.getItem("userInfo"),c=JSON.parse(t),[h,x]=await Promise.all([y.get(`/api/admin/vehicles/${l._id}`,{headers:{Authorization:`Bearer ${c.token}`}}),y.get(`/api/admin/drivers/${l._id}`,{headers:{Authorization:`Bearer ${c.token}`}})]);N(h.data.vehicles||[]),A(x.data.drivers||[])}catch(t){console.error(t)}};g.useEffect(()=>{m(),E();const t=setInterval(m,6e4);return()=>clearInterval(t)},[l,p]);const O=async(t,c)=>{const h=localStorage.getItem("userInfo"),x=JSON.parse(h);await y.put(`/api/admin/attendance/${t}`,c,{headers:{Authorization:`Bearer ${x.token}`}}),m(),alert("Record updated successfully")},B=async(t,c,h)=>{try{const x=localStorage.getItem("userInfo"),a=JSON.parse(x);await y.patch(`/api/admin/attendance/${t}/expense/${c}`,{status:h},{headers:{Authorization:`Bearer ${a.token}`}}),m()}catch(x){console.error("Error processing expense",x),alert("Failed to process expense")}},L=()=>{D(null),m(),alert("Fuel recorded successfully")};return b&&!u?e.jsx("div",{style:{color:"white",padding:"40px"},children:"Loading Live Feed..."}):e.jsxs("div",{style:{padding:"clamp(15px, 4vw, 40px)",minHeight:"100vh",background:"radial-gradient(circle at top right, #1e293b, #0f172a)"},children:[e.jsx(H,{title:"Live Feed",description:"Real-time driver activity and mission control."}),e.jsx("header",{style:{paddingBottom:"30px",marginBottom:"30px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{width:"clamp(40px,10vw,50px)",height:"clamp(40px,10vw,50px)",background:"linear-gradient(135deg, white, #f8fafc)",borderRadius:"16px",padding:"8px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:e.jsx(P,{size:28,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#fbbf24",boxShadow:"0 0 8px #fbbf24"}}),e.jsx("span",{style:{fontSize:"clamp(9px,2.5vw,10px)",fontWeight:"800",color:"rgba(255,255,255,0.5)",letterSpacing:"1px",textTransform:"uppercase"},children:"System Mission Control"})]}),e.jsxs("h1",{style:{color:"white",fontSize:"clamp(24px, 5vw, 32px)",fontWeight:"900",margin:0,letterSpacing:"-1.5px",cursor:"pointer"},children:["Live ",e.jsx("span",{className:"text-gradient-yellow",children:"Feed"})]})]})]}),e.jsxs("div",{style:{textAlign:"right",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"10px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"2px",background:"rgba(0,0,0,0.2)",padding:"4px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("button",{onClick:()=>{const t=new Date(p);t.setDate(t.getDate()-1),s(t.toISOString().split("T")[0])},style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",background:"#334155",color:"#ffffff",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx($,{size:16,strokeWidth:3})}),e.jsxs("div",{style:{position:"relative",cursor:"pointer"},onClick:()=>{o.current&&(typeof o.current.showPicker=="function"?o.current.showPicker():o.current.click())},children:[e.jsxs("div",{style:{height:"30px",padding:"0 12px",background:"#334155",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px",border:"1px solid rgba(255,255,255,0.1)",whiteSpace:"nowrap"},children:[e.jsx(M,{size:14,color:"#ffffff"}),e.jsx("span",{style:{color:"#ffffff",fontSize:"12px",fontWeight:"700"},children:d(p)})]}),e.jsx("input",{type:"date",ref:o,value:p,onChange:t=>t.target.value&&s(t.target.value),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,pointerEvents:"none"}})]}),e.jsx("button",{onClick:()=>{const t=new Date(p);t.setDate(t.getDate()+1),s(t.toISOString().split("T")[0])},style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",background:"#334155",color:"#ffffff",cursor:"pointer",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(K,{size:16,strokeWidth:3})})]}),e.jsx("button",{onClick:()=>s(f()),style:{padding:"0 10px",height:"28px",borderRadius:"8px",background:p===f()?"#fbbf24":"rgba(255,255,255,0.05)",color:p===f()?"#000":"white",fontWeight:"800",border:"none",fontSize:"10px",textTransform:"uppercase",cursor:"pointer"},children:"Today"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"11px",fontWeight:"700",margin:0},children:"ACTIVE SESSIONS"}),e.jsx("h2",{style:{color:"white",margin:0,fontWeight:"900"},children:u?.attendanceDetails?.length||0})]})]})]})}),e.jsxs("div",{className:"glass-card",style:{border:"1px solid rgba(255,255,255,0.05)",padding:"0"},children:[e.jsx("div",{className:"activity-table-wrapper hide-mobile",children:e.jsxs("table",{className:"activity-table",style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("th",{style:{padding:"20px"},children:"Driver Details"}),e.jsx("th",{style:{padding:"20px"},children:"Vehicle & Fuel"}),e.jsx("th",{style:{padding:"20px"},children:"Status"}),e.jsx("th",{style:{padding:"20px",textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:u?.attendanceDetails?.map(t=>e.jsxs("tr",{className:"hover-row",style:{borderBottom:"1px solid rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"20px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"42px",height:"42px",borderRadius:"12px",background:t.driver?.isFreelancer?"rgba(129, 140, 248, 0.1)":"rgba(255,255,255,0.03)",display:"flex",justifyContent:"center",alignItems:"center",border:`1px solid ${t.driver?.isFreelancer?"rgba(129, 140, 248, 0.3)":"rgba(255,255,255,0.08)"}`},children:e.jsx(T,{size:18,color:t.driver?.isFreelancer?"#818cf8":"rgba(255,255,255,0.6)"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"900",color:"white",fontSize:"14px"},children:t.driver?.name}),t.driver?.isFreelancer&&e.jsx("div",{style:{fontSize:"9px",fontWeight:"900",color:"#818cf8",textTransform:"uppercase",marginTop:"-2px"},children:"Freelancer Driver"}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",marginTop:"2px"},children:[e.jsx("span",{style:{fontSize:"11px",color:"rgba(255,255,255,0.4)",fontWeight:"600"},children:t.driver?.mobile}),t.punchIn?.time&&e.jsxs("span",{style:{fontSize:"10px",color:"#10b981",fontWeight:"800",display:"flex",alignItems:"center",gap:"3px"},children:[e.jsx(U,{size:10})," ",new Date(t.punchIn.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]})}),e.jsx("td",{style:{padding:"20px"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("span",{className:"vehicle-badge",style:{background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",border:"1px solid rgba(14, 165, 233, 0.2)",padding:"4px 10px",borderRadius:"8px",fontSize:"12px",fontWeight:"900"},children:t.vehicle?.carNumber}),(()=>{const c=t.fuel?.amount||0,h=t.pendingExpenses?.filter(a=>a.type==="fuel"&&a.status==="pending").reduce((a,w)=>a+(w.amount||0),0)||0,x=c+h;return x>0||t.pendingExpenses?.some(a=>a.type==="fuel"&&a.status==="pending")?e.jsxs("div",{style:{background:"rgba(244, 63, 94, 0.1)",color:"#f43f5e",padding:"4px 8px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"4px",border:"1px solid rgba(244, 63, 94, 0.2)"},children:[e.jsx(v,{size:12,fill:"#f43f5e"}),e.jsxs("span",{style:{fontSize:"10px",fontWeight:"900"},children:["₹",x," FUEL"]})]}):null})()]}),t.punchOut?.remarks&&e.jsxs("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontStyle:"italic"},children:["Dest: ",t.punchOut.remarks]})]})}),e.jsx("td",{style:{padding:"20px"},children:e.jsx("span",{className:"status-pill staff-badge",style:{background:t.status==="completed"?"rgba(16, 185, 129, 0.1)":"rgba(56, 189, 248, 0.1)",color:t.status==="completed"?"#10b981":"#38bdf8",padding:"4px 10px",borderRadius:"8px",fontWeight:"900",fontSize:"10px"},children:t.status==="completed"?"CONCLUDED":"ON DUTY"})}),e.jsx("td",{style:{padding:"20px",textAlign:"right"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>S(t),className:"action-button",style:{background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",padding:"6px 12px",borderRadius:"8px",border:"1px solid rgba(14, 165, 233, 0.2)",fontWeight:"800",fontSize:"11px",cursor:"pointer"},children:"Details"}),e.jsx("button",{onClick:()=>k(t),className:"action-button",style:{background:"rgba(255,255,255,0.05)",color:"white",padding:"6px 12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",fontWeight:"800",fontSize:"11px",cursor:"pointer"},children:"Edit"})]})})]},t._id))})]})}),e.jsx("div",{className:"show-mobile",style:{padding:"15px",display:"grid",gap:"15px"},children:u?.attendanceDetails?.map(t=>e.jsxs("div",{className:"glass-card",style:{padding:"15px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(56, 189, 248, 0.1)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(T,{size:20,color:"#38bdf8"})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"white",fontWeight:"900",fontSize:"16px"},children:t.driver?.name}),t.driver?.isFreelancer&&e.jsx("div",{style:{fontSize:"10px",fontWeight:"900",color:"#818cf8",textTransform:"uppercase",marginTop:"2px"},children:"Freelancer Driver"}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.4)",fontSize:"12px",fontWeight:"600"},children:[t.vehicle?.carNumber,(()=>{const c=t.fuel?.amount||0,h=t.pendingExpenses?.filter(a=>a.type==="fuel"&&a.status==="pending").reduce((a,w)=>a+(w.amount||0),0)||0,x=c+h;return x>0||t.pendingExpenses?.some(a=>a.type==="fuel"&&a.status==="pending")?e.jsxs("span",{style:{color:"#f43f5e",marginLeft:"8px",fontSize:"10px",display:"inline-flex",alignItems:"center",gap:"4px"},children:[e.jsx(v,{size:10,fill:"#f43f5e"})," ₹",x]}):null})()]})]})]}),e.jsx("span",{style:{background:t.status==="completed"?"rgba(16, 185, 129, 0.1)":"rgba(56, 189, 248, 0.1)",color:t.status==="completed"?"#10b981":"#38bdf8",padding:"4px 8px",borderRadius:"6px",fontSize:"9px",fontWeight:"900"},children:t.status==="completed"?"CONCLUDED":"ACTIVE"})]}),e.jsxs("div",{style:{marginTop:"15px",display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>S(t),style:{flex:1,padding:"10px",background:"rgba(14, 165, 233, 0.1)",color:"#0ea5e9",border:"1px solid rgba(14, 165, 233, 0.2)",borderRadius:"10px",fontSize:"11px",fontWeight:"800"},children:"DETAILS"}),e.jsx("button",{onClick:()=>k(t),style:{flex:1,padding:"10px",background:"rgba(255,255,255,0.05)",color:"white",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",fontSize:"11px",fontWeight:"800"},children:"EDIT"})]})]},t._id))})]}),e.jsxs(_,{children:[j&&e.jsx(Q,{item:j,onClose:()=>S(null),onApproveReject:B}),z&&e.jsx(Y,{item:z,onClose:()=>k(null),onUpdate:O,vehicles:W,drivers:F}),R&&e.jsx(G,{item:R,onClose:()=>D(null),onSuccess:L})]}),e.jsx("style",{children:`
                @keyframes pulse {
                    0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
                    70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
                    100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
                }
                .hover-row:hover { background: rgba(255,255,255,0.03); }
                .glass-card { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); }
            `})]})};export{te as default};
