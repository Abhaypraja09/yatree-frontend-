import{b as n,j as e,t as Ke,D as se,c as V,W as ie,f as Ve,L as Ye,w as $e,T as Ue,x as He,y as Ge,o as Qe,v as $,X as P,z as Te,E as Xe,G as Je}from"./vendor-CNt--W90.js";import{u as Ze,a as Re,i as Y}from"./index-DvAaQ92-.js";import{u as k,w as et}from"./excel-BlgKG4ZM.js";import{S as tt}from"./SEO-Bv0d6yxm.js";const at=({side:p,onCapture:re,onClose:j})=>{const{t:u}=Re(),a=n.useRef(null),m=n.useRef(null),N=n.useRef(null),[A,ne]=n.useState(null);n.useEffect(()=>(O(),()=>z()),[]);const O=async()=>{try{const c={video:{facingMode:p==="selfie"?"user":"environment",width:{ideal:1280},height:{ideal:720}}},x=await navigator.mediaDevices.getUserMedia(c);N.current=x,a.current&&(a.current.srcObject=x)}catch(c){console.error("Camera error:",c),ne(u("cameraError"))}},z=()=>{N.current&&(N.current.getTracks().forEach(c=>{c.stop(),console.log("Track stopped:",c.label)}),N.current=null)},U=()=>{const c=a.current,x=m.current;c&&x&&(x.width=c.videoWidth,x.height=c.videoHeight,x.getContext("2d").drawImage(c,0,0,x.width,x.height),x.toBlob(G=>{const _=new File([G],`${p}.jpg`,{type:"image/jpeg"});re(_,x.toDataURL("image/jpeg")),z(),j()},"image/jpeg",.8))};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content glass-card",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:u(p==="selfie"?"modalTakeSelfie":p==="km"?"modalCaptureKm":p==="car"?"modalTakeCarSelfie":p==="fuel"?"modalFuelSlip":p==="parking"?"modalParkingSlip":p==="other"?"modalOtherSlip":"modalCapturePhoto")}),e.jsx("button",{onClick:()=>{z(),j()},className:"modal-close-btn",children:e.jsx(P,{size:20})})]}),A?e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#f43f5e"},children:A}):e.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,style:{width:"100%",borderRadius:"12px",background:"#000"}}),e.jsx("canvas",{ref:m,style:{display:"none"}}),!A&&e.jsxs("button",{onClick:U,className:"btn-primary",style:{width:"100%",marginTop:"20px",padding:"16px"},children:[e.jsx($,{size:20,style:{display:"inline",marginRight:"8px"}}),u("capture")]})]})})},ut=()=>{const{user:p,logout:re}=Ze(),{language:j,setLanguage:u,t:a}=Re(),[m,N]=n.useState(null),[A,ne]=n.useState(!0),[O,z]=n.useState(""),[U,c]=n.useState(null),[x,H]=n.useState(null),[G,_]=n.useState(null),[fe,le]=n.useState(null),[ye,oe]=n.useState(null),[ve,pe]=n.useState(null),[de,We]=n.useState(!1),[ce,je]=n.useState([{amount:"",km:"",fuelType:"Diesel",slip:null,preview:null}]),[o,l]=n.useState([{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),[xe,Be]=n.useState(!1),[ge,we]=n.useState([{amount:"",slip:null,preview:null}]),[f,Q]=n.useState(0),[F,ue]=n.useState(!1),[w,X]=n.useState([]),[st,it]=n.useState(""),[rt,nt]=n.useState(!1),[lt,ot]=n.useState(!1),[Se,he]=n.useState(""),[pt,De]=n.useState(""),[C,J]=n.useState([""]),[T,Z]=n.useState(1),[b,L]=n.useState(null),[R,W]=n.useState(!1),[ke,me]=n.useState(!1),[ee,h]=n.useState({type:"",text:""}),[be,Ne]=n.useState(""),[Ee,q]=n.useState(!1),[y,te]=n.useState(null),[B,ze]=n.useState("home"),[g,Ie]=n.useState(null),[Pe,Ce]=n.useState(!1);n.useEffect(()=>{ae(),B==="ledger"&&Ae()},[B]);const Ae=async()=>{Ce(!0);try{const{data:t}=await Y.get("/api/driver/ledger",{headers:{Authorization:`Bearer ${p.token}`}});Ie(t)}catch(t){console.error("Error fetching ledger",t)}finally{Ce(!1)}},ae=async()=>{try{const{data:t}=await Y.get("/api/driver/dashboard",{headers:{Authorization:`Bearer ${p.token}`}});N(t),t.vehicle?._id&&Ne(t.vehicle._id)}catch(t){console.error("Error fetching dashboard",t)}finally{ne(!1)}},Oe=async t=>{if(!O||!U||!G||!ye){h({type:"error",text:a("mandatoryFields")});return}if(t==="punch-out"){if(de&&ce.some(r=>!r.amount||!r.slip||!r.km)){h({type:"error",text:a("fuelValidation")});return}if(xe&&ge.some(r=>!r.amount||!r.slip)){h({type:"error",text:a("parkingValidation")});return}}W(!0),h({type:"",text:""});const i=new FormData;if(i.append("km",O),i.append("selfie",U),i.append("kmPhoto",G),i.append("carSelfie",ye),i.append("latitude",0),i.append("longitude",0),i.append("address","Location Disabled"),t==="punch-in"&&i.append("vehicleId",be),t==="punch-out"){const s=C.filter(r=>r.trim()).map((r,S)=>`${S+1}. ${r}`).join(`
`);i.append("remarks",s),i.append("otherRemarks",Se),i.append("fuelFilled",de),de&&ce.forEach(r=>{i.append("fuelAmounts",r.amount),i.append("fuelKMs",r.km),i.append("fuelTypes",r.fuelType),i.append("fuelSlips",r.slip)}),i.append("parkingPaid",xe),xe&&ge.forEach(r=>{i.append("parkingAmounts",r.amount),i.append("parkingSlips",r.slip)}),i.append("outsideTripOccurred",F),F&&i.append("outsideTripType",w.join(",")),i.append("dutyCount",T)}try{await Y.post(`/api/driver/${t}`,i,{headers:{Authorization:`Bearer ${p.token}`,"Content-Type":"multipart/form-data"}}),h({type:"success",text:a(t==="punch-in"?"punchInSuccess":"punchOutSuccess")}),z(""),c(null),H(null),_(null),le(null),oe(null),pe(null),We(!1),je([{amount:"",km:"",slip:null,preview:null}]),Be(!1),we([{amount:"",slip:null,preview:null}]),Q(0),ue(!1),De(""),he(""),he(""),J([""]),Z(1),me(!1),ae()}catch(s){h({type:"error",text:s.response?.data?.message||"Submission failed"})}finally{W(!1)}},_e=async()=>{W(!0);try{await Y.post("/api/driver/request-trip",{},{headers:{Authorization:`Bearer ${p.token}`}}),h({type:"success",text:a("requestSent")}),ae()}catch{h({type:"error",text:a("requestFailed")})}finally{W(!1)}},Fe=async()=>{const t=o.filter(s=>s.amount&&s.amount>0);if(t.length===0){h({type:"error",text:a("mandatoryFields")});return}W(!0);const i=new FormData;t.forEach((s,r)=>{i.append("types",s.type),i.append("amounts",s.amount),i.append("kms",s.km||0),i.append("fuelTypes",s.fuelType||""),i.append("fuelQuantities",s.quantity||0),i.append("fuelRates",s.rate||0),i.append("paymentSources",s.paymentSource||"Yatree Office"),s.slip&&i.append(`slip_${r}`,s.slip)});try{await Y.post("/api/driver/add-expense",i,{headers:{Authorization:`Bearer ${p.token}`,"Content-Type":"multipart/form-data"}}),h({type:"success",text:a("expenseSubmitted")}),q(!1),l([]),Q(0),ae()}catch(s){h({type:"error",text:s.response?.data?.message||"Submission failed"})}finally{W(!1)}},Le=()=>{if(!g)return;const t=g.history.map(d=>({Date:d.date,Vehicle:d.vehicle,"Daily Wage":d.dailyWage,Bonuses:d.bonuses,"Total KM":d.totalKM,Status:d.status,"Day Total":d.dailyWage+d.bonuses})),i=g.advances.map(d=>({Date:new Date(d.date).toLocaleDateString(),Remark:d.remark,"Amount Taken":d.amount,Recovered:d.recovered,Balance:d.amount-d.recovered,Status:d.status})),s=[{Item:"Total Duties",Value:g.summary.workingDays},{Item:"Total Earned",Value:g.summary.totalEarned},{Item:"Total Advances Taken",Value:g.summary.totalAdvances},{Item:"Remaining Balance",Value:g.summary.pendingAdvance},{Item:"Net Payable",Value:g.summary.netPayable}],r=k.book_new(),S=k.json_to_sheet(s);k.book_append_sheet(r,S,"Overview");const qe=k.json_to_sheet(t);k.book_append_sheet(r,qe,"Duties");const Me=k.json_to_sheet(i);k.book_append_sheet(r,Me,"Advances"),et(r,`Driver_Report_${p.name}_${new Date().toLocaleDateString().replace(/\//g,"-")}.xlsx`)};if(A)return e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsx("div",{className:"spinner"})});const D=m?.todayAttendance,M=!!D?.punchIn?.time,K=!!D?.punchOut?.time,E=m?.driver?.tripStatus,I=E==="approved",v=E==="active";return e.jsxs("div",{className:"admin-layout-wrapper",children:[e.jsx(tt,{title:"Driver Portal"}),e.jsx("div",{className:"main-content",children:e.jsxs("div",{className:"container-fluid",children:[e.jsxs("header",{className:"dashboard-header",style:{marginBottom:"32px",paddingBottom:"24px",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{className:"header-logo-section",children:[e.jsx("img",{src:"/logos/logo.png",alt:"Yatree Destination",style:{width:"100px",height:"auto",marginRight:"15px"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"header-title",style:{fontSize:"clamp(20px, 5vw, 26px)",fontWeight:"900",letterSpacing:"-0.5px",background:"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",marginBottom:"4px"},children:"Yatree Destination"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 8px #10b981"}}),e.jsx("p",{className:"header-subtitle",style:{fontSize:"clamp(13px, 3.2vw, 15px)",fontWeight:"700",color:"rgba(255,255,255,0.8)",margin:0},children:p.name})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[v&&e.jsxs(e.Fragment,{children:[D?.pendingExpenses?.length>0&&e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.15)",padding:"6px 10px",borderRadius:"10px",display:"flex",alignItems:"center",gap:"6px",color:"#f59e0b",fontSize:"12px",fontWeight:"800",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx(Ke,{size:14})," ",D.pendingExpenses.length]}),e.jsxs("button",{onClick:()=>{l([{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),te("fuel"),q(!0)},style:{background:"linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%)",color:"white",height:"42px",padding:"0 14px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",border:"none",boxShadow:"0 6px 16px rgba(14, 165, 233, 0.25)",cursor:"pointer",fontWeight:"700",fontSize:"13px"},children:[e.jsx(se,{size:18})," ",a("fuel")]}),e.jsxs("button",{onClick:()=>{l([{type:"parking",amount:"",quantity:"",km:"",fuelType:"",slip:null,preview:null}]),te("parking"),q(!0)},style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",height:"42px",padding:"0 14px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",border:"none",boxShadow:"0 6px 16px rgba(245, 158, 11, 0.25)",cursor:"pointer",fontWeight:"700",fontSize:"13px"},children:[e.jsx(V,{size:18})," ",a("parking")]}),e.jsxs("button",{onClick:()=>{l([{type:"other",amount:"",quantity:"",km:"",fuelType:"Other",slip:null,preview:null}]),te("other"),q(!0)},style:{background:"linear-gradient(135deg, #f43f5e 0%, #dc2626 100%)",color:"white",height:"42px",padding:"0 14px",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",border:"none",boxShadow:"0 6px 16px rgba(244, 63, 94, 0.25)",cursor:"pointer",fontWeight:"700",fontSize:"13px"},children:[e.jsx(ie,{size:18})," ",a("driverSeva")]})]}),e.jsxs("div",{className:"language-switcher",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.03) 100%)",borderRadius:"12px",padding:"5px",display:"flex",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("button",{onClick:()=>u("en"),style:{padding:"8px 14px",borderRadius:"9px",fontSize:"12px",fontWeight:"800",background:j==="en"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",transition:"all 0.3s ease",boxShadow:j==="en"?"0 4px 12px rgba(14, 165, 233, 0.3)":"none"},children:"EN"}),e.jsx("button",{onClick:()=>u("hi"),style:{padding:"8px 14px",borderRadius:"9px",fontSize:"12px",fontWeight:"800",background:j==="hi"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",transition:"all 0.3s ease",boxShadow:j==="hi"?"0 4px 12px rgba(14, 165, 233, 0.3)":"none"},children:"हिन्दी"})]}),e.jsxs("button",{onClick:re,style:{background:"linear-gradient(135deg, rgba(244,63,94,0.15) 0%, rgba(244,63,94,0.08) 100%)",color:"#f43f5e",padding:"10px 18px",borderRadius:"12px",fontWeight:"800",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",border:"1px solid rgba(244,63,94,0.2)",boxShadow:"0 4px 12px rgba(244,63,94,0.15)",transition:"all 0.3s ease"},children:[e.jsx(Ve,{size:16})," ",a("logout")]})]})]}),e.jsxs("div",{className:"tab-navigation",style:{display:"flex",gap:"8px",marginBottom:"24px",background:"rgba(255,255,255,0.03)",padding:"6px",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("button",{onClick:()=>ze("home"),style:{flex:1,padding:"12px",borderRadius:"12px",background:B==="home"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",fontWeight:"800",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",border:"none",transition:"all 0.3s"},children:[e.jsx(Ye,{size:18})," ",a("today")]}),e.jsxs("button",{onClick:()=>ze("ledger"),style:{flex:1,padding:"12px",borderRadius:"12px",background:B==="ledger"?"linear-gradient(135deg, #0ea5e9 0%, #6366f1 100%)":"transparent",color:"white",fontWeight:"800",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",border:"none",transition:"all 0.3s"},children:[e.jsx($e,{size:18})," ",a("ledger")]})]}),B==="home"&&e.jsxs(e.Fragment,{children:[!m?.vehicle&&!I&&E!=="completed"&&E!=="pending_approval"?e.jsxs("div",{className:"glass-card",style:{padding:"40px",textAlign:"center"},children:[e.jsx(Ue,{size:48,color:"#f59e0b",style:{margin:"0 auto 16px"}}),e.jsx("h2",{style:{color:"white",marginBottom:"8px"},children:a("noVehicle")}),e.jsx("p",{style:{color:"var(--text-muted)"},children:a("startDutyMessage")})]}):e.jsxs("div",{className:"form-section-wrapper",children:[m?.vehicle&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(20px, 5vw, 28px)",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.08) 0%, rgba(99, 102, 241, 0.05) 100%)",border:"1px solid rgba(14, 165, 233, 0.15)",boxShadow:"0 8px 24px rgba(14, 165, 233, 0.1)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"100px",height:"100px",background:"radial-gradient(circle, rgba(14, 165, 233, 0.15) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsxs("div",{style:{marginBottom:"12px",position:"relative"},children:[e.jsx("p",{className:"section-subtitle",style:{fontSize:"clamp(10px, 2.5vw, 11px)",fontWeight:"800",letterSpacing:"1px",color:"rgba(14, 165, 233, 0.8)",marginBottom:"8px"},children:a("assignedVehicle")}),e.jsx("h2",{style:{fontSize:"clamp(22px, 5.5vw, 28px)",color:"white",fontWeight:"900",marginBottom:"6px",letterSpacing:"-0.5px"},children:m.vehicle.carNumber}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"clamp(13px, 3.2vw, 15px)",fontWeight:"600"},children:m.vehicle.model})]})]}),e.jsx("div",{className:"glass-card",style:{padding:"clamp(20px, 5vw, 28px)",background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)",border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 8px 24px rgba(0,0,0,0.15)"},children:e.jsxs("div",{className:"modal-grid-2",style:{gap:"clamp(16px, 4vw, 24px)"},children:[e.jsxs("div",{style:{background:M?"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)":"rgba(255,255,255,0.02)",padding:"clamp(16px, 4vw, 20px)",borderRadius:"16px",border:M?"1px solid rgba(16, 185, 129, 0.2)":"1px solid rgba(255,255,255,0.05)",position:"relative",overflow:"hidden"},children:[M&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",borderRadius:"50%",background:"#10b981",boxShadow:"0 0 12px #10b981",animation:"pulse 2s infinite"}}),e.jsx("p",{className:"section-subtitle",style:{fontSize:"clamp(10px, 2.5vw, 11px)",fontWeight:"800",letterSpacing:"0.5px",marginBottom:"8px"},children:a("punchIn")}),e.jsx("p",{style:{fontSize:"clamp(24px, 6vw, 32px)",fontWeight:"900",color:M?"#10b981":"rgba(255,255,255,0.2)",letterSpacing:"-1px"},children:M?new Date(D.punchIn.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})]}),e.jsxs("div",{style:{background:K?"linear-gradient(135deg, rgba(244, 63, 94, 0.1) 0%, rgba(244, 63, 94, 0.05) 100%)":"rgba(255,255,255,0.02)",padding:"clamp(16px, 4vw, 20px)",borderRadius:"16px",border:K?"1px solid rgba(244, 63, 94, 0.2)":"1px solid rgba(255,255,255,0.05)",position:"relative",overflow:"hidden"},children:[K&&e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",borderRadius:"50%",background:"#f43f5e",boxShadow:"0 0 12px #f43f5e"}}),e.jsx("p",{className:"section-subtitle",style:{fontSize:"clamp(10px, 2.5vw, 11px)",fontWeight:"800",letterSpacing:"0.5px",marginBottom:"8px"},children:a("punchOut")}),e.jsx("p",{style:{fontSize:"clamp(24px, 6vw, 32px)",fontWeight:"900",color:K?"#f43f5e":"rgba(255,255,255,0.2)",letterSpacing:"-1px"},children:K?new Date(D.punchOut.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"})]})]})}),E==="completed"&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(32px, 8vw, 48px)",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",boxShadow:"0 8px 32px rgba(16, 185, 129, 0.15)"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 8px 24px rgba(16, 185, 129, 0.2)"},children:e.jsx(He,{size:40,color:"#10b981"})}),e.jsx("h2",{style:{color:"white",fontSize:"clamp(20px, 5vw, 24px)",marginBottom:"12px",fontWeight:"900",letterSpacing:"-0.5px"},children:a("dutyCompleted")}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"28px",fontSize:"clamp(14px, 3.5vw, 15px)",fontWeight:"600"},children:a("offDutyMessage")}),e.jsx("button",{onClick:_e,disabled:R,className:"btn-primary",style:{width:"100%",maxWidth:"320px",margin:"0 auto",display:"block",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",padding:"16px 24px",fontSize:"15px",fontWeight:"800",borderRadius:"14px",boxShadow:"0 8px 24px rgba(16, 185, 129, 0.3)",border:"none"},children:a(R?"processing":"startNewDuty")})]}),E==="pending_approval"&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(32px, 8vw, 48px)",textAlign:"center",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.08) 0%, rgba(14, 165, 233, 0.03) 100%)",border:"1px solid rgba(14, 165, 233, 0.15)",boxShadow:"0 8px 32px rgba(14, 165, 233, 0.15)"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.15) 0%, rgba(14, 165, 233, 0.05) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid rgba(14, 165, 233, 0.2)",boxShadow:"0 8px 24px rgba(14, 165, 233, 0.2)"},children:e.jsx(Ge,{size:40,color:"#0ea5e9",className:"spinner"})}),e.jsx("h2",{style:{color:"white",fontSize:"clamp(20px, 5vw, 24px)",marginBottom:"12px",fontWeight:"900",letterSpacing:"-0.5px"},children:a("waitingAdmin")}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"clamp(14px, 3.5vw, 15px)",fontWeight:"600"},children:a("reviewMessage")})]}),v&&!ke&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(32px, 8vw, 48px)",textAlign:"center",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.03) 100%)",border:"1px solid rgba(16, 185, 129, 0.15)",boxShadow:"0 8px 32px rgba(16, 185, 129, 0.15)",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"150px",height:"150px",background:"radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%)",pointerEvents:"none"}}),e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 20px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid rgba(16, 185, 129, 0.2)",boxShadow:"0 8px 24px rgba(16, 185, 129, 0.2)",position:"relative"},children:e.jsx(V,{size:40,color:"#10b981"})}),e.jsx("h2",{style:{color:"white",fontSize:"clamp(20px, 5vw, 24px)",marginBottom:"12px",fontWeight:"900",letterSpacing:"-0.5px",position:"relative"},children:a("onDuty")}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",marginBottom:"28px",fontSize:"clamp(14px, 3.5vw, 15px)",fontWeight:"600",position:"relative"},children:a("driveSafely")}),e.jsx("button",{onClick:()=>me(!0),className:"btn-primary",style:{width:"100%",background:"linear-gradient(135deg, #f43f5e 0%, #dc2626 100%)",padding:"16px 24px",boxShadow:"0 8px 24px rgba(244, 63, 94, 0.3)",fontSize:"15px",fontWeight:"800",borderRadius:"14px",border:"none",position:"relative"},children:a("submitReports")})]}),(I||v&&ke)&&e.jsxs("div",{className:"glass-card",style:{padding:"clamp(16px, 4vw, 24px)"},children:[e.jsxs("div",{className:"modal-header",style:{marginBottom:"clamp(16px, 4vw, 24px)"},children:[v&&e.jsx("button",{onClick:()=>me(!1),style:{background:"rgba(255,255,255,0.08)",color:"white",padding:"6px",borderRadius:"8px"},children:e.jsx(Qe,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"modal-title",children:a(I?"dutyPunchIn":"dutyPunchOut")}),e.jsx("p",{className:"section-subtitle",children:a(I?"start":"end")})]})]}),e.jsxs("div",{className:"input-wrapper-full",style:{marginBottom:"clamp(16px, 4vw, 20px)"},children:[e.jsx("label",{className:"input-label",children:a("currentKm")}),e.jsx("input",{type:"number",className:"input-field",placeholder:a("enterKm"),value:O,onChange:t=>z(t.target.value)})]}),I&&e.jsxs("div",{className:"input-wrapper-full",style:{marginBottom:"clamp(16px, 4vw, 20px)"},children:[e.jsx("label",{className:"input-label",children:a("selectVehicle")}),e.jsxs("select",{className:"input-field",value:be,onChange:t=>Ne(t.target.value),style:{background:"rgba(255,255,255,0.05)",color:"white",cursor:"pointer",fontWeight:"700",fontSize:"14px",padding:"12px"},children:[e.jsx("option",{value:"",style:{background:"#0f172a",color:"white"},children:a("selectCar")}),m?.availableVehicles?.map(t=>e.jsxs("option",{value:t._id,style:{background:"#0f172a",color:"white"},children:[t.carNumber," (",t.model,")"]},t._id))]})]}),e.jsxs("div",{className:"photo-capture-grid",style:{marginBottom:"clamp(20px, 5vw, 28px)"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"input-label",style:{marginBottom:"8px"},children:a("driverSelfie")}),x?e.jsxs("div",{className:"photo-preview-container",children:[e.jsx("img",{src:x,alt:"Selfie",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{c(null),H(null)},className:"photo-delete-button",children:e.jsx(P,{size:14})})]}):e.jsxs("div",{onClick:()=>L("selfie"),className:"photo-capture-button",children:[e.jsx($,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontSize:"clamp(10px, 2.5vw, 11px)",color:"var(--text-muted)",fontWeight:"700"},children:a("takeSelfie")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"input-label",style:{marginBottom:"8px"},children:a("kmPhoto")}),fe?e.jsxs("div",{className:"photo-preview-container",children:[e.jsx("img",{src:fe,alt:"KM",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{_(null),le(null)},className:"photo-delete-button",children:e.jsx(P,{size:14})})]}):e.jsxs("div",{onClick:()=>L("km"),className:"photo-capture-button",children:[e.jsx($,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontSize:"clamp(10px, 2.5vw, 11px)",color:"var(--text-muted)",fontWeight:"700"},children:a("takeKmPhoto")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"input-label",style:{marginBottom:"8px"},children:a("carSelfie")}),ve?e.jsxs("div",{className:"photo-preview-container",children:[e.jsx("img",{src:ve,alt:"Car",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{oe(null),pe(null)},className:"photo-delete-button",children:e.jsx(P,{size:14})})]}):e.jsxs("div",{onClick:()=>L("car"),className:"photo-capture-button",children:[e.jsx($,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontSize:"clamp(10px, 2.5vw, 11px)",color:"var(--text-muted)",fontWeight:"700"},children:a("takeCarPhoto")})]})]})]}),v&&e.jsxs("div",{style:{marginBottom:"clamp(20px, 5vw, 28px)"},children:[e.jsx("h3",{className:"section-title",children:a("expenditureDetails")}),e.jsxs("div",{style:{marginBottom:"clamp(16px, 4vw, 20px)"},children:[e.jsx("p",{className:"input-label",style:{marginBottom:"10px"},children:a("outsideCityQuestion")}),e.jsxs("div",{className:"yes-no-button-group",children:[e.jsx("button",{onClick:()=>ue(!0),className:"yes-no-button",style:{background:F?"var(--primary)":"rgba(255,255,255,0.1)",color:"white"},children:a("yes")}),e.jsx("button",{onClick:()=>ue(!1),className:"yes-no-button",style:{background:F?"rgba(255,255,255,0.1)":"var(--primary)",color:"white"},children:a("no")})]}),F&&e.jsxs("div",{className:"checkbox-group",style:{marginTop:"12px"},children:[e.jsxs("div",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",className:"checkbox-input",checked:w.includes("Same Day"),onChange:t=>{t.target.checked?X([...w,"Same Day"]):X(w.filter(i=>i!=="Same Day"))}}),e.jsx("label",{className:"checkbox-label",children:a("sameDay")})]}),e.jsxs("div",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",className:"checkbox-input",checked:w.includes("Night Stay"),onChange:t=>{t.target.checked?X([...w,"Night Stay"]):X(w.filter(i=>i!=="Night Stay"))}}),e.jsx("label",{className:"checkbox-label",children:a("nightStay")})]})]})]}),e.jsxs("div",{style:{display:"none"},children:[e.jsx("p",{className:"input-label",style:{marginBottom:"10px"},children:a("selectDutyCount")}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"8px"},children:[1,2,3,4,5].map(t=>e.jsx("button",{onClick:()=>Z(t),style:{padding:"12px 8px",borderRadius:"12px",fontSize:"14px",fontWeight:"900",border:"1px solid",borderColor:T===t?"var(--primary)":"rgba(255,255,255,0.1)",background:T===t?"rgba(14, 165, 233, 0.2)":"rgba(255,255,255,0.05)",color:T===t?"white":"rgba(255,255,255,0.5)",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:T===t?"scale(1.05)":"scale(1)",boxShadow:T===t?"0 4px 12px rgba(14, 165, 233, 0.2)":"none"},children:t},t))})]})]}),v&&e.jsxs("div",{style:{marginBottom:"clamp(20px, 5vw, 28px)"},children:[e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",children:a("remarksAdmin")}),e.jsxs("div",{style:{display:"grid",gap:"10px"},children:[C.map((t,i)=>e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"rgba(14, 165, 233, 0.1)",color:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"800",border:"1px solid rgba(14, 165, 233, 0.2)"},children:i+1}),e.jsx("input",{type:"text",className:"input-field",placeholder:`Duty ${i+1} (e.g. Reports)`,value:t,onChange:s=>{const r=[...C];r[i]=s.target.value,J(r),Z(r.filter(S=>S.trim()).length||1)},style:{flex:1,padding:"10px",fontSize:"14px",height:"40px"}}),C.length>1&&e.jsx("button",{onClick:()=>{const s=C.filter((r,S)=>S!==i);J(s),Z(s.filter(r=>r.trim()).length||1)},style:{color:"#f43f5e",background:"rgba(244, 63, 94, 0.1)",padding:"8px",borderRadius:"8px"},children:e.jsx(Te,{size:16})})]},i)),e.jsxs("button",{onClick:()=>J([...C,""]),style:{marginTop:"6px",padding:"10px",borderRadius:"10px",border:"1px dashed rgba(14, 165, 233, 0.3)",background:"rgba(14, 165, 233, 0.05)",color:"var(--primary)",fontSize:"12px",fontWeight:"800",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[e.jsx(Xe,{size:16})," Add Another Duty"]})]})]}),e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px"},children:[e.jsx("label",{className:"input-label",children:a("otherRemarks")}),e.jsx("textarea",{className:"input-field",placeholder:a("explainOptional"),value:Se,onChange:t=>he(t.target.value),style:{fontSize:"14px",resize:"vertical",minHeight:"60px"}})]})]}),ee.text&&e.jsx("div",{style:{padding:"12px",background:ee.type==="error"?"rgba(244,63,94,0.1)":"rgba(16,185,129,0.1)",borderRadius:"10px",marginBottom:"16px"},children:e.jsx("p",{style:{color:ee.type==="error"?"#f43f5e":"#10b981",fontSize:"clamp(12px, 3vw, 13px)",fontWeight:"600",margin:0},children:ee.text})}),e.jsx("button",{onClick:()=>{if(I&&!be)return h({type:"error",text:"Please select a vehicle"});Oe(v?"punch-out":"punch-in")},disabled:R,className:"btn-primary",style:{width:"100%",padding:"16px",fontSize:"clamp(14px, 3.5vw, 16px)",fontWeight:"800"},children:R?a("processing").toUpperCase():v?a("submitPunchOut").toUpperCase():a("submitPunchIn").toUpperCase()})]})]}),Ee&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content glass-card",style:{maxWidth:"450px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",style:{paddingBottom:"16px",borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"modal-title",children:a(y==="fuel"?"logFuel":y==="parking"?"logParking":"driverSeva")}),e.jsx("p",{className:"section-subtitle",children:a("logExpense").toUpperCase()})]}),e.jsx("button",{onClick:()=>{q(!1),l([]),te(null),Q(0)},className:"modal-close-btn",children:e.jsx(P,{size:20})})]}),e.jsx("div",{style:{display:"grid",gap:"16px",marginTop:"20px"},children:o.length===0?e.jsxs("div",{style:{padding:"30px 20px",textAlign:"center",background:"rgba(255,255,255,0.02)",borderRadius:"20px",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px",marginBottom:"20px"},children:a("noExpensesYet")||"No expenses added yet"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[y==="fuel"&&e.jsxs("button",{onClick:()=>l([{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),className:"btn-primary",style:{padding:"12px 24px",fontSize:"14px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(se,{size:20})," ",a("logFuel")]}),y==="parking"&&e.jsxs("button",{onClick:()=>l([{type:"parking",amount:"",quantity:"",km:"",fuelType:"",slip:null,preview:null}]),className:"btn-primary",style:{padding:"12px 24px",fontSize:"14px",borderRadius:"12px",background:"var(--secondary)",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(V,{size:20})," ",a("logParking")]}),y==="other"&&e.jsxs("button",{onClick:()=>l([{type:"other",amount:"",quantity:"",km:"",fuelType:"Other",slip:null,preview:null}]),className:"btn-primary",style:{padding:"12px 24px",fontSize:"14px",borderRadius:"12px",background:"#f43f5e",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(ie,{size:20})," ",a("driverSeva")]})]})]}):e.jsxs(e.Fragment,{children:[o.map((t,i)=>e.jsxs("div",{className:"entry-card",style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",padding:"16px",borderRadius:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:t.type==="fuel"?"rgba(14, 165, 233, 0.15)":t.type==="parking"?"rgba(245, 158, 11, 0.15)":"rgba(244, 63, 94, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.type==="fuel"?e.jsx(se,{size:16,color:"#0ea5e9"}):t.type==="parking"?e.jsx(V,{size:16,color:"#f59e0b"}):e.jsx(ie,{size:16,color:"#f43f5e"})}),e.jsx("span",{style:{fontWeight:"800",fontSize:"12px",color:"white",textTransform:"uppercase"},children:t.type==="fuel"?a("logFuel"):t.type==="parking"?a("logParking"):a("driverSeva")})]}),e.jsx("button",{onClick:()=>l(o.filter((s,r)=>r!==i)),style:{color:"#f43f5e",background:"rgba(244, 63, 94, 0.1)",padding:"6px",borderRadius:"6px"},children:e.jsx(Te,{size:16})})]}),e.jsxs("div",{className:"input-grid-2",style:{marginBottom:"16px"},children:[e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px"},children:a("amount")}),e.jsx("input",{type:"number",className:"input-field",placeholder:"0.00",value:t.amount,onChange:s=>{const r=[...o];r[i].amount=s.target.value,l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]}),t.type==="fuel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px"},children:"Rate (₹/L) - Optional"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"₹/L",value:t.rate||"",onChange:s=>{const r=[...o];r[i].rate=s.target.value,r[i].amount&&s.target.value&&(r[i].quantity=(Number(r[i].amount)/Number(s.target.value)).toFixed(2)),l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]}),e.jsxs("div",{className:"input-wrapper-full",children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px"},children:"Liters - Optional"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"L",value:t.quantity||"",onChange:s=>{const r=[...o];r[i].quantity=s.target.value,r[i].amount&&s.target.value&&(r[i].rate=(Number(r[i].amount)/Number(s.target.value)).toFixed(2)),l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]})]}),t.type==="fuel"&&e.jsxs("div",{className:"input-wrapper-full",children:[e.jsxs("label",{className:"input-label",style:{fontSize:"10px"},children:[a("meterKm")," (Opt)"]}),e.jsx("input",{type:"number",className:"input-field",placeholder:"KM",value:t.km,onChange:s=>{const r=[...o];r[i].km=s.target.value,l(r)},style:{padding:"10px",fontSize:"14px",height:"45px"}})]})]}),t.type==="fuel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px",marginBottom:"16px"},children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px",marginBottom:"6px"},children:a("fuelType")}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px"},children:["Diesel","Petrol","CNG"].map(s=>e.jsx("button",{type:"button",onClick:()=>{const r=[...o];r[i].fuelType=s,l(r)},style:{padding:"8px 4px",borderRadius:"8px",fontSize:"11px",fontWeight:"800",border:"1px solid",borderColor:t.fuelType===s?"var(--primary)":"rgba(255,255,255,0.1)",background:t.fuelType===s?"rgba(14, 165, 233, 0.15)":"rgba(255,255,255,0.02)",color:t.fuelType===s?"var(--primary)":"var(--text-muted)",transition:"all 0.2s ease"},children:a(s.toLowerCase())},s))})]}),e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px",marginBottom:"16px"},children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px",marginBottom:"6px"},children:a("paymentSource")||"Payment Source"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:["Yatree Office","Guest"].map(s=>e.jsx("button",{type:"button",onClick:()=>{const r=[...o];r[i].paymentSource=s,l(r)},style:{padding:"8px 4px",borderRadius:"8px",fontSize:"11px",fontWeight:"800",border:"1px solid",borderColor:(t.paymentSource||"Yatree Office")===s?"var(--primary)":"rgba(255,255,255,0.1)",background:(t.paymentSource||"Yatree Office")===s?"rgba(14, 165, 233, 0.15)":"rgba(255,255,255,0.02)",color:(t.paymentSource||"Yatree Office")===s?"var(--primary)":"var(--text-muted)",transition:"all 0.2s ease"},children:s},s))})]})]}),t.type==="other"&&e.jsxs("div",{className:"input-wrapper-full",style:{marginTop:"4px",marginBottom:"16px"},children:[e.jsx("label",{className:"input-label",style:{fontSize:"10px",marginBottom:"6px"},children:"Service Type"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px"},children:["Puncture","Car Wash","Other"].map(s=>e.jsx("button",{type:"button",onClick:()=>{const r=[...o];r[i].fuelType=s,l(r)},style:{padding:"8px 4px",borderRadius:"8px",fontSize:"11px",fontWeight:"800",border:"1px solid",borderColor:t.fuelType===s?"#f43f5e":"rgba(255,255,255,0.1)",background:t.fuelType===s?"rgba(244, 63, 94, 0.15)":"rgba(255,255,255,0.02)",color:t.fuelType===s?"#f43f5e":"var(--text-muted)",transition:"all 0.2s ease"},children:s},s))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"8px"},children:[e.jsxs("label",{className:"input-label",style:{fontSize:"10px"},children:[a("receipt")," (Optional)"]}),t.preview?e.jsxs("div",{className:"photo-preview-container",style:{height:"80px",borderRadius:"10px"},children:[e.jsx("img",{src:t.preview,alt:"Receipt",className:"photo-preview-image"}),e.jsx("button",{onClick:()=>{const s=[...o];s[i].slip=null,s[i].preview=null,l(s)},className:"photo-delete-button",style:{width:"24px",height:"24px",top:"5px",right:"5px"},children:e.jsx(P,{size:14})})]}):e.jsxs("div",{onClick:()=>{Q(i),L("expense_slip")},className:"photo-capture-button",style:{height:"80px",borderRadius:"10px",background:"rgba(255,255,255,0.02)",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx($,{size:24,color:"var(--primary)"}),e.jsx("span",{style:{fontWeight:"700",color:"var(--text-muted)",fontSize:"10px",marginTop:"4px"},children:a("captureSlip")})]})]})]},i)),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:"12px"},children:[y==="fuel"&&e.jsxs("button",{onClick:()=>l([...o,{type:"fuel",amount:"",quantity:"",km:"",fuelType:"Diesel",paymentSource:"Yatree Office",slip:null,preview:null}]),className:"action-button glass-card-hover-effect",style:{border:"1px dashed rgba(14, 165, 233, 0.3)",color:"#0ea5e9",background:"rgba(14, 165, 233, 0.05)",padding:"12px 24px",display:"flex",alignItems:"center",gap:"8px",borderRadius:"12px",fontSize:"13px",fontWeight:"800"},children:[e.jsx(se,{size:20})," ",a("logFuel")]}),y==="parking"&&e.jsxs("button",{onClick:()=>l([...o,{type:"parking",amount:"",quantity:"",km:"",fuelType:"",slip:null,preview:null}]),className:"action-button glass-card-hover-effect",style:{border:"1px dashed rgba(245, 158, 11, 0.3)",color:"#f59e0b",background:"rgba(245, 158, 11, 0.05)",padding:"12px 24px",display:"flex",alignItems:"center",gap:"8px",borderRadius:"12px",fontSize:"13px",fontWeight:"800"},children:[e.jsx(V,{size:20})," ",a("logParking")]}),y==="other"&&e.jsxs("button",{onClick:()=>l([...o,{type:"other",amount:"",quantity:"",km:"",fuelType:"Other",slip:null,preview:null}]),className:"action-button glass-card-hover-effect",style:{border:"1px dashed rgba(244, 63, 94, 0.3)",color:"#f43f5e",background:"rgba(244, 63, 94, 0.05)",padding:"12px 24px",display:"flex",alignItems:"center",gap:"8px",borderRadius:"12px",fontSize:"13px",fontWeight:"800"},children:[e.jsx(ie,{size:20})," ",a("driverSeva")]})]}),e.jsx("button",{onClick:Fe,disabled:R,className:"btn-primary",style:{width:"100%",padding:"16px",fontWeight:"900",fontSize:"15px",borderRadius:"12px",marginTop:"10px",boxShadow:"0 8px 20px rgba(14, 165, 233, 0.3)"},children:R?a("processing").toUpperCase():a("submit").toUpperCase()})]})})]})}),b&&e.jsx(at,{side:b==="expense_slip"?o[f]?.type==="fuel"?"fuel":o[f]?.type==="parking"?"parking":"other":b,onCapture:(t,i)=>{if(b==="selfie")c(t),H(i);else if(b==="km")_(t),le(i);else if(b==="car")oe(t),pe(i);else if(b==="fuel"){const s=[...ce];s[f].slip=t,s[f].preview=i,je(s)}else if(b==="parking"){const s=[...ge];s[f].slip=t,s[f].preview=i,we(s)}else if(b==="expense_slip"){const s=[...o];s[f].slip=t,s[f].preview=i,l(s)}},onClose:()=>L(null)})]}),B==="ledger"&&e.jsx("div",{className:"ledger-section",children:Pe?e.jsx("div",{className:"glass-card",style:{padding:"60px",textAlign:"center"},children:e.jsx("div",{className:"spinner",style:{margin:"0 auto"}})}):e.jsxs("div",{className:"ledger-content",children:[e.jsxs("div",{className:"ledger-summary-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px",marginBottom:"24px"},children:[e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%)",border:"1px solid rgba(16, 185, 129, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(16, 185, 129, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:a("totalEarned")}),e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:["₹",g?.summary?.totalEarned||0]})]}),e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%)",border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(245, 158, 11, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:a("workingDays")}),e.jsx("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:g?.summary?.workingDays||0})]}),e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%)",border:"1px solid rgba(99, 102, 241, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(99, 102, 241, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:a("pendingAdvance")}),e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:["₹",g?.summary?.pendingAdvance||0]})]}),e.jsxs("div",{className:"glass-card",style:{padding:"16px",background:"linear-gradient(135deg, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0.05) 100%)",border:"1px solid rgba(14, 165, 233, 0.2)"},children:[e.jsx("p",{style:{fontSize:"10px",fontWeight:"800",color:"rgba(14, 165, 233, 0.8)",marginBottom:"4px",textTransform:"uppercase"},children:a("netPayable")}),e.jsxs("h3",{style:{fontSize:"20px",fontWeight:"900",color:"white"},children:["₹",g?.summary?.netPayable||0]})]})]}),e.jsxs("button",{onClick:Le,className:"btn-primary",style:{width:"100%",marginBottom:"24px",padding:"16px",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(Je,{size:20})," ",a("downloadExcel")]}),e.jsx("h4",{style:{color:"white",marginBottom:"16px",fontSize:"16px",fontWeight:"800"},children:a("dutyHistory")}),e.jsx("div",{style:{display:"grid",gap:"12px"},children:g?.history?.map(t=>e.jsxs("div",{className:"glass-card",style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",fontWeight:"800",fontSize:"14px",marginBottom:"2px"},children:t.date}),e.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"12px"},children:[t.vehicle," • ",t.totalKM," KM"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("p",{style:{color:"#10b981",fontWeight:"900",fontSize:"15px"},children:["₹",t.dailyWage+t.bonuses]}),e.jsxs("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:"10px"},children:["Wage: ",t.dailyWage," + Bonus: ",t.bonuses]})]})]},t._id))}),e.jsx("h4",{style:{color:"white",marginTop:"32px",marginBottom:"16px",fontSize:"16px",fontWeight:"800"},children:a("advanceHistory")}),e.jsx("div",{style:{display:"grid",gap:"12px",marginBottom:"40px"},children:g?.advances?.map(t=>e.jsxs("div",{className:"glass-card",style:{padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderLeft:"4px solid #f43f5e"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",fontWeight:"800",fontSize:"14px",marginBottom:"2px"},children:new Date(t.date).toLocaleDateString()}),e.jsx("p",{style:{color:"var(--text-muted)",fontSize:"12px"},children:t.remark})]}),e.jsx("div",{style:{textAlign:"right"},children:e.jsxs("p",{style:{color:"#f43f5e",fontWeight:"900",fontSize:"15px"},children:["₹",t.amount]})})]},t._id))})]})})]})})]})};export{ut as default};
